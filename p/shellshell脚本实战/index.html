<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Shellè„šæœ¬å®æˆ˜ å‰ç½®å­¦ä¹  dirname manå¸®åŠ©æ–‡æ¡£ æ³¨æ„ï¼šæ ‡é¢˜ä¸‹é¢çš„å†…å®¹ä¸­åŠ ç²—å­—ä½“ä¸ºå‘½ä»¤åã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 NAME basename, dirname â€“ return filename or directory portion of pathname SYNOPSIS basename string [suffix] basename [-a] [-s suffix] string [...] dirname string [...] DESCRIPTION The basename utility deletes any prefix ending with the last slash â€˜/â€™ character present in string (after first stripping trailing slashes), and a suffix, if given. The suffix is not stripped if it is identical to the remaining characters in string. The resulting filename is written to the standard output. A non-existent suffix is ignored. If -a is specified, then every argument is treated as a string as if basename were invoked with just one argument. If -s is specified, then the suffix is taken as its argument, and all other arguments are treated as a string. The dirname utility deletes the filename portion, beginning with the last slash â€˜/â€™ character to the end of string (after first stripping trailing slashes), and writes the result to the standard output. EXIT STATUS The basename and dirname utilities exit\u00a00 on success, and\u00a0&gt;0 if an error occurs. EXAMPLES The following line sets the shell variable FOO to /usr/bin. FOO=`dirname /usr/bin/trail` è¯´æ˜ NAMEï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸€ä¸ªç®€è¦çš„è¯´æ˜ã€‚ SYNOPSISï¼š è¯´æ˜è¯­æ³•æ ¼å¼ã€‚ DESCRIPTIONï¼š å¯¹å‘½ä»¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ EXIT STATUSï¼š è¯´æ˜æ‰§è¡Œå®Œé€€å‡ºçš„æƒ…å†µï¼ŒåŠè¿”å›çš„çŠ¶æ€ã€‚ EXAMPLESï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸¾ä¾‹è¯´æ˜ã€‚ ç¤ºä¾‹ 1 echo FOO=`dirname /usr/bin/trail` ">
<title>[Shell]Shellè„šæœ¬å®æˆ˜</title>

<link rel='canonical' href='https://YLine-hub.github.io/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="[Shell]Shellè„šæœ¬å®æˆ˜">
<meta property='og:description' content="Shellè„šæœ¬å®æˆ˜ å‰ç½®å­¦ä¹  dirname manå¸®åŠ©æ–‡æ¡£ æ³¨æ„ï¼šæ ‡é¢˜ä¸‹é¢çš„å†…å®¹ä¸­åŠ ç²—å­—ä½“ä¸ºå‘½ä»¤åã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 NAME basename, dirname â€“ return filename or directory portion of pathname SYNOPSIS basename string [suffix] basename [-a] [-s suffix] string [...] dirname string [...] DESCRIPTION The basename utility deletes any prefix ending with the last slash â€˜/â€™ character present in string (after first stripping trailing slashes), and a suffix, if given. The suffix is not stripped if it is identical to the remaining characters in string. The resulting filename is written to the standard output. A non-existent suffix is ignored. If -a is specified, then every argument is treated as a string as if basename were invoked with just one argument. If -s is specified, then the suffix is taken as its argument, and all other arguments are treated as a string. The dirname utility deletes the filename portion, beginning with the last slash â€˜/â€™ character to the end of string (after first stripping trailing slashes), and writes the result to the standard output. EXIT STATUS The basename and dirname utilities exit\u00a00 on success, and\u00a0&gt;0 if an error occurs. EXAMPLES The following line sets the shell variable FOO to /usr/bin. FOO=`dirname /usr/bin/trail` è¯´æ˜ NAMEï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸€ä¸ªç®€è¦çš„è¯´æ˜ã€‚ SYNOPSISï¼š è¯´æ˜è¯­æ³•æ ¼å¼ã€‚ DESCRIPTIONï¼š å¯¹å‘½ä»¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ EXIT STATUSï¼š è¯´æ˜æ‰§è¡Œå®Œé€€å‡ºçš„æƒ…å†µï¼ŒåŠè¿”å›çš„çŠ¶æ€ã€‚ EXAMPLESï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸¾ä¾‹è¯´æ˜ã€‚ ç¤ºä¾‹ 1 echo FOO=`dirname /usr/bin/trail` ">
<meta property='og:url' content='https://YLine-hub.github.io/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/'>
<meta property='og:site_name' content='ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-12-03T11:31:21&#43;08:00'/><meta property='article:modified_time' content='2025-12-03T11:31:21&#43;08:00'/>
<meta name="twitter:title" content="[Shell]Shellè„šæœ¬å®æˆ˜">
<meta name="twitter:description" content="Shellè„šæœ¬å®æˆ˜ å‰ç½®å­¦ä¹  dirname manå¸®åŠ©æ–‡æ¡£ æ³¨æ„ï¼šæ ‡é¢˜ä¸‹é¢çš„å†…å®¹ä¸­åŠ ç²—å­—ä½“ä¸ºå‘½ä»¤åã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 NAME basename, dirname â€“ return filename or directory portion of pathname SYNOPSIS basename string [suffix] basename [-a] [-s suffix] string [...] dirname string [...] DESCRIPTION The basename utility deletes any prefix ending with the last slash â€˜/â€™ character present in string (after first stripping trailing slashes), and a suffix, if given. The suffix is not stripped if it is identical to the remaining characters in string. The resulting filename is written to the standard output. A non-existent suffix is ignored. If -a is specified, then every argument is treated as a string as if basename were invoked with just one argument. If -s is specified, then the suffix is taken as its argument, and all other arguments are treated as a string. The dirname utility deletes the filename portion, beginning with the last slash â€˜/â€™ character to the end of string (after first stripping trailing slashes), and writes the result to the standard output. EXIT STATUS The basename and dirname utilities exit\u00a00 on success, and\u00a0&gt;0 if an error occurs. EXAMPLES The following line sets the shell variable FOO to /usr/bin. FOO=`dirname /usr/bin/trail` è¯´æ˜ NAMEï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸€ä¸ªç®€è¦çš„è¯´æ˜ã€‚ SYNOPSISï¼š è¯´æ˜è¯­æ³•æ ¼å¼ã€‚ DESCRIPTIONï¼š å¯¹å‘½ä»¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚ EXIT STATUSï¼š è¯´æ˜æ‰§è¡Œå®Œé€€å‡ºçš„æƒ…å†µï¼ŒåŠè¿”å›çš„çŠ¶æ€ã€‚ EXAMPLESï¼š å¯¹å‘½ä»¤è¿›è¡Œä¸¾ä¾‹è¯´æ˜ã€‚ ç¤ºä¾‹ 1 echo FOO=`dirname /usr/bin/trail` ">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_7f398a7818085507.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ–ï¸</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°</a></h1>
            <h2 class="site-description">åŠªåŠ›ä¸ä¸€å®šèƒ½è·å¾—å›æŠ¥ï¼Œä½†ä¸åŠªåŠ›ä¸€å®šä¸ä¼šæœ‰å›æŠ¥ã€‚</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#å‰ç½®å­¦ä¹ ">å‰ç½®å­¦ä¹ </a>
      <ol>
        <li><a href="#dirname">dirname</a>
          <ol>
            <li><a href="#manå¸®åŠ©æ–‡æ¡£">manå¸®åŠ©æ–‡æ¡£</a></li>
            <li><a href="#ç¤ºä¾‹">ç¤ºä¾‹</a></li>
            <li><a href="#å®æˆ˜">å®æˆ˜</a></li>
            <li><a href="#ç”Ÿè¯">ç”Ÿè¯</a></li>
          </ol>
        </li>
        <li><a href="#readlink">readlink</a>
          <ol>
            <li><a href="#manå¸®åŠ©æ–‡æ¡£-1">manå¸®åŠ©æ–‡æ¡£</a></li>
            <li><a href="#ç¤ºä¾‹-1">ç¤ºä¾‹</a></li>
            <li><a href="#å®æˆ˜-1">å®æˆ˜</a></li>
            <li><a href="#ç”Ÿè¯-1">ç”Ÿè¯</a></li>
          </ol>
        </li>
        <li><a href="#awk">awk</a>
          <ol>
            <li><a href="#è¯­æ³•">è¯­æ³•</a></li>
            <li><a href="#å®æˆ˜-2">å®æˆ˜</a></li>
          </ol>
        </li>
        <li><a href="#localå…³é”®å­—">localå…³é”®å­—</a>
          <ol>
            <li><a href="#ä»‹ç»">ä»‹ç»</a></li>
            <li><a href="#ç¤ºä¾‹-2">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#å’Œç‰¹æ®Šå˜é‡çš„ä½¿ç”¨ç»†èŠ‚"><code>$</code>å’Œç‰¹æ®Šå˜é‡çš„ä½¿ç”¨ç»†èŠ‚</a>
          <ol>
            <li><a href="#å•çº¯çš„å˜é‡å">å•çº¯çš„<code>$å˜é‡å</code></a></li>
            <li><a href="#å˜é‡å"><code>${å˜é‡å}</code></a></li>
            <li><a href="#-è„šæœ¬-"><code>$( è„šæœ¬ )</code></a></li>
            <li><a href="#-è¿ç®—å¼--å’Œ-è¿ç®—å¼"><code>$(( è¿ç®—å¼ ))</code> å’Œ <code>$[è¿ç®—å¼]</code></a></li>
            <li><a href="#å’Œæœ‰å…³çš„ç‰¹æ®Šå˜é‡">å’Œ<code>$</code>æœ‰å…³çš„ç‰¹æ®Šå˜é‡</a></li>
            <li><a href="#å…³äº-å’Œçš„åŒºåˆ«">å…³äº<code>$*</code> å’Œ<code>$@</code>çš„åŒºåˆ«</a></li>
          </ol>
        </li>
        <li><a href="#æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦">æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦</a>
          <ol>
            <li><a href="#å®æˆ˜-3">å®æˆ˜</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#shelléƒ¨ç½²è„šæœ¬-nginx">shelléƒ¨ç½²è„šæœ¬-nginx</a>
      <ol>
        <li><a href="#ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</a></li>
        <li><a href="#æ–‡ä»¶åŠå…¶å†…å®¹">æ–‡ä»¶åŠå…¶å†…å®¹</a>
          <ol>
            <li><a href="#install_nginxsh"><code>install_nginx.sh</code></a></li>
            <li><a href="#nginx_confsh"><code>nginx_conf.sh</code></a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#shelléƒ¨ç½²è„šæœ¬-mysql">shelléƒ¨ç½²è„šæœ¬-mysql</a>
      <ol>
        <li><a href="#ç›®å½•ç»“æ„-1">ç›®å½•ç»“æ„</a></li>
        <li><a href="#æ–‡ä»¶åŠå…¶å†…å®¹-1">æ–‡ä»¶åŠå…¶å†…å®¹</a>
          <ol>
            <li><a href="#install_mysql8sh"><code>install_mysql8.sh</code></a></li>
            <li><a href="#mysql8_confsh"><code>mysql8_conf.sh</code></a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ç”Ÿè¯-2">ç”Ÿè¯</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/shell/" >
                Shell
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/">[Shell]Shellè„šæœ¬å®æˆ˜</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-12-03</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="shellè„šæœ¬å®æˆ˜">Shellè„šæœ¬å®æˆ˜
</h1><h2 id="å‰ç½®å­¦ä¹ ">å‰ç½®å­¦ä¹ 
</h2><h3 id="dirname">dirname
</h3><h4 id="manå¸®åŠ©æ–‡æ¡£">manå¸®åŠ©æ–‡æ¡£
</h4><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image.png"
	width="2828"
	height="1102"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image_hu_50b707d945765cfc.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image_hu_79493be9f34ca5e6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="256"
		data-flex-basis="615px"
	
></p>
<p><font color=red>æ³¨æ„ï¼šæ ‡é¢˜ä¸‹é¢çš„å†…å®¹ä¸­åŠ ç²—å­—ä½“ä¸ºå‘½ä»¤åã€‚</font></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">NAME</span>
</span></span><span class="line"><span class="cl">     <span class="n">basename</span><span class="p">,</span> <span class="n">dirname</span> <span class="err">â€“</span> <span class="k">return</span> <span class="n">filename</span> <span class="ow">or</span> <span class="n">directory</span> <span class="n">portion</span> <span class="n">of</span> <span class="n">pathname</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">SYNOPSIS</span>
</span></span><span class="line"><span class="cl">     <span class="n">basename</span> <span class="n">string</span> <span class="p">[</span><span class="n">suffix</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">     <span class="n">basename</span> <span class="p">[</span><span class="o">-</span><span class="n">a</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">s</span> <span class="n">suffix</span><span class="p">]</span> <span class="n">string</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">     <span class="n">dirname</span> <span class="n">string</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">DESCRIPTION</span>
</span></span><span class="line"><span class="cl">     <span class="n">The</span> <span class="n">basename</span> <span class="n">utility</span> <span class="n">deletes</span> <span class="n">any</span> <span class="n">prefix</span> <span class="n">ending</span> <span class="n">with</span> <span class="n">the</span> <span class="n">last</span> <span class="n">slash</span> <span class="err">â€˜</span><span class="o">/</span><span class="err">â€™</span> <span class="n">character</span> <span class="n">present</span> <span class="ow">in</span> <span class="n">string</span> <span class="p">(</span><span class="n">after</span> <span class="n">first</span> <span class="n">stripping</span> <span class="n">trailing</span> <span class="n">slashes</span><span class="p">),</span> <span class="ow">and</span> <span class="n">a</span> <span class="n">suffix</span><span class="p">,</span> <span class="k">if</span> <span class="n">given</span><span class="o">.</span>  <span class="n">The</span> <span class="n">suffix</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">stripped</span> <span class="k">if</span>
</span></span><span class="line"><span class="cl">     <span class="n">it</span> <span class="n">is</span> <span class="n">identical</span> <span class="n">to</span> <span class="n">the</span> <span class="n">remaining</span> <span class="n">characters</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span>  <span class="n">The</span> <span class="n">resulting</span> <span class="n">filename</span> <span class="n">is</span> <span class="n">written</span> <span class="n">to</span> <span class="n">the</span> <span class="n">standard</span> <span class="n">output</span><span class="o">.</span>  <span class="n">A</span> <span class="n">non</span><span class="o">-</span><span class="n">existent</span> <span class="n">suffix</span> <span class="n">is</span> <span class="n">ignored</span><span class="o">.</span>  <span class="n">If</span> <span class="o">-</span><span class="n">a</span> <span class="n">is</span> <span class="n">specified</span><span class="p">,</span> <span class="n">then</span> <span class="n">every</span> <span class="n">argument</span> <span class="n">is</span>
</span></span><span class="line"><span class="cl">     <span class="n">treated</span> <span class="n">as</span> <span class="n">a</span> <span class="n">string</span> <span class="n">as</span> <span class="k">if</span> <span class="n">basename</span> <span class="n">were</span> <span class="n">invoked</span> <span class="n">with</span> <span class="n">just</span> <span class="n">one</span> <span class="n">argument</span><span class="o">.</span>  <span class="n">If</span> <span class="o">-</span><span class="n">s</span> <span class="n">is</span> <span class="n">specified</span><span class="p">,</span> <span class="n">then</span> <span class="n">the</span> <span class="n">suffix</span> <span class="n">is</span> <span class="n">taken</span> <span class="n">as</span> <span class="n">its</span> <span class="n">argument</span><span class="p">,</span> <span class="ow">and</span> <span class="n">all</span> <span class="n">other</span> <span class="n">arguments</span> <span class="n">are</span> <span class="n">treated</span> <span class="n">as</span> <span class="n">a</span> <span class="n">string</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     <span class="n">The</span> <span class="n">dirname</span> <span class="n">utility</span> <span class="n">deletes</span> <span class="n">the</span> <span class="n">filename</span> <span class="n">portion</span><span class="p">,</span> <span class="n">beginning</span> <span class="n">with</span> <span class="n">the</span> <span class="n">last</span> <span class="n">slash</span> <span class="err">â€˜</span><span class="o">/</span><span class="err">â€™</span> <span class="n">character</span> <span class="n">to</span> <span class="n">the</span> <span class="n">end</span> <span class="n">of</span> <span class="n">string</span> <span class="p">(</span><span class="n">after</span> <span class="n">first</span> <span class="n">stripping</span> <span class="n">trailing</span> <span class="n">slashes</span><span class="p">),</span> <span class="ow">and</span> <span class="n">writes</span> <span class="n">the</span> <span class="n">result</span> <span class="n">to</span> <span class="n">the</span> <span class="n">standard</span>
</span></span><span class="line"><span class="cl">     <span class="n">output</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">EXIT</span> <span class="n">STATUS</span>
</span></span><span class="line"><span class="cl">     <span class="n">The</span> <span class="n">basename</span> <span class="ow">and</span> <span class="n">dirname</span> <span class="n">utilities</span> <span class="n">exit</span>Â <span class="mi">0</span> <span class="n">on</span> <span class="n">success</span><span class="p">,</span> <span class="ow">and</span>Â <span class="o">&gt;</span><span class="mi">0</span> <span class="k">if</span> <span class="n">an</span> <span class="n">error</span> <span class="n">occurs</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">EXAMPLES</span>
</span></span><span class="line"><span class="cl">     <span class="n">The</span> <span class="n">following</span> <span class="n">line</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">shell</span> <span class="n">variable</span> <span class="n">FOO</span> <span class="n">to</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">           <span class="n">FOO</span><span class="o">=</span><span class="err">`</span><span class="n">dirname</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">trail</span><span class="err">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="è¯´æ˜">è¯´æ˜
</h5><ul>
<li><strong>NAMEï¼š</strong> å¯¹å‘½ä»¤è¿›è¡Œä¸€ä¸ªç®€è¦çš„è¯´æ˜ã€‚</li>
<li><strong>SYNOPSISï¼š</strong> è¯´æ˜è¯­æ³•æ ¼å¼ã€‚</li>
<li><strong>DESCRIPTIONï¼š</strong> å¯¹å‘½ä»¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</li>
<li><strong>EXIT STATUSï¼š</strong> è¯´æ˜æ‰§è¡Œå®Œé€€å‡ºçš„æƒ…å†µï¼ŒåŠè¿”å›çš„çŠ¶æ€ã€‚</li>
<li><strong>EXAMPLESï¼š</strong> å¯¹å‘½ä»¤è¿›è¡Œä¸¾ä¾‹è¯´æ˜ã€‚</li>
</ul>
<h4 id="ç¤ºä¾‹">ç¤ºä¾‹
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">FOO</span><span class="o">=</span><span class="sb">`</span>dirname /usr/bin/trail<span class="sb">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-1.png"
	width="770"
	height="70"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-1_hu_dda1ab8d334dfdc2.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-1_hu_183e09deac6e9f78.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1100"
		data-flex-basis="2640px"
	
></p>
<h4 id="å®æˆ˜">å®æˆ˜
</h4><h5 id="ä½¿ç”¨dirnameå’Œ0æ‰“å°æ–‡ä»¶æ‰€åœ¨è·¯å¾„">ä½¿ç”¨<code>dirname</code>å’Œ<code>$0</code>æ‰“å°æ–‡ä»¶æ‰€åœ¨è·¯å¾„
</h5><ul>
<li>è·å–æ–‡ä»¶å(åœ¨æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">FILE_NAME</span><span class="o">=</span><span class="nv">$0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">FILE_NAME</span><span class="si">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@localhost bin]# sh test.sh
</span></span><span class="line"><span class="cl">test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-10.png"
	width="476"
	height="108"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-10_hu_da9a5410fa175e09.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-10_hu_8a57ff5313f08b4a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="440"
		data-flex-basis="1057px"
	
></p>
<ul>
<li>è·å–æ–‡ä»¶ç»å¯¹è·¯å¾„(åœ¨å…¶ä»–ç›®å½•ä¸‹)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">FILE_PATH</span><span class="o">=</span><span class="nv">$0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">FILE_PATH</span><span class="si">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">localhost</span> <span class="o">/</span><span class="p">]</span><span class="c1"># sh /data/tools/centos7_env_tools/bin/test.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">centos7_env_tools</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-11.png"
	width="916"
	height="66"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-11_hu_679e502fedc65d32.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-11_hu_88c55acdc8db4558.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1387"
		data-flex-basis="3330px"
	
></p>
<ul>
<li>æ‰“å°æ–‡ä»¶æ‰€åœ¨è·¯å¾„(åœ¨æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">FILE_PATH</span><span class="o">=</span><span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">FILE_PATH</span><span class="si">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@localhost bin]# sh test.sh
</span></span><span class="line"><span class="cl">.
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-12.png"
	width="470"
	height="62"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-12_hu_bec5af081cd249a2.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-12_hu_44b21cf3f6d866a3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="758"
		data-flex-basis="1819px"
	
></p>
<ul>
<li>æ‰“å°æ–‡ä»¶æ‰€åœ¨è·¯å¾„(åœ¨å…¶ä»–ç›®å½•ä¸‹)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">FILE_PATH</span><span class="o">=</span><span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">FILE_PATH</span><span class="si">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">localhost</span> <span class="o">/</span><span class="p">]</span><span class="c1"># sh /data/tools/centos7_env_tools/bin/test.sh</span>
</span></span><span class="line"><span class="cl"><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">centos7_env_tools</span><span class="o">/</span><span class="n">bin</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-13.png"
	width="920"
	height="70"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-13_hu_35475219e716a3ee.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-13_hu_c100c2af01f0dbf5.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1314"
		data-flex-basis="3154px"
	
></p>
<h4 id="ç”Ÿè¯">ç”Ÿè¯
</h4><ul>
<li>existent / ÉªÉ¡ËˆzÉªstÉ™nt / adjã€ç°å­˜çš„ï¼Œç°æœ‰çš„ï¼›ç”Ÿå­˜çš„ï¼›nã€å­˜åœ¨çš„äº‹ç‰©</li>
<li>identical / aÉªËˆdentÉªk(É™)l / adjã€å®Œå…¨çš„ï¼›åŒä¸€çš„</li>
<li>invoke / ÉªnËˆvoÊŠk / vã€è¡Œä½¿ï¼Œå®æ–½ï¼›æåŠï¼›ï¼ˆè®¡ç®—æœºï¼‰è°ƒç”¨ï¼Œæ¿€æ´»</li>
<li>portion / ËˆpÉ”ËrÊƒ(É™)n / nã€ä¸€éƒ¨åˆ†</li>
<li>present / Ëˆprez(É™)nt; prÉªËˆzent / adjã€åœ¨åœºçš„ï¼›å­˜åœ¨çš„ï¼›ç°åœ¨çš„ï¼Œç›®å‰çš„ï¼›nã€ç°åœ¨ï¼Œç›®å‰ï¼›vã€é¢å‘ï¼Œèµ é€ï¼›æå‡ºï¼›ä¸Šæ˜ </li>
<li>stripping / ËˆstrÉªpÉªÅ‹ / vã€å‰¥å»ï¼›è„±æ‰ï¼›æ‹†é™¤ï¼Œç§»é™¤</li>
<li>suffix / ËˆsÊŒfÉªks / nã€åç¼€</li>
<li>synopsis / sÉªËˆnÉ‘ËpsÉªs / nã€æ¦‚è¦ï¼›æ‘˜è¦ï¼›ï¼ˆè¿™é‡Œå¯ä»¥ç¿»è¯‘æˆè¯­æ³•ï¼‰</li>
<li>trailing / ËˆtreÉªlÉªÅ‹ / vã€æ‹–ï¼Œæ‹‰</li>
<li>treat / triËt / vã€å¯¹å¾…ï¼Œçœ‹å¾…ï¼›</li>
<li>utility / juËËˆtÉªlÉ™ti / nã€åº”ç”¨ç¨‹åºï¼›adjã€æœ‰ç”¨çš„ï¼›</li>
</ul>
<h3 id="readlink">readlink
</h3><h4 id="manå¸®åŠ©æ–‡æ¡£-1">manå¸®åŠ©æ–‡æ¡£
</h4><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-3.png"
	width="2120"
	height="1306"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-3_hu_3767b230f543e89c.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-3_hu_64202c97784ac3d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="162"
		data-flex-basis="389px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">NAME
</span></span><span class="line"><span class="cl">       readlink - print resolved symbolic links or canonical file names
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SYNOPSIS
</span></span><span class="line"><span class="cl">       readlink [OPTION]... FILE...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DESCRIPTION
</span></span><span class="line"><span class="cl">       Print value of a symbolic link or canonical file name
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -f, --canonicalize
</span></span><span class="line"><span class="cl">              canonicalize by following every symlink in every component of the given name recursively; all but the last component must exist
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -e, --canonicalize-existing
</span></span><span class="line"><span class="cl">              canonicalize by following every symlink in every component of the given name recursively, all components must exist
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -m, --canonicalize-missing
</span></span><span class="line"><span class="cl">              canonicalize by following every symlink in every component of the given name recursively, without requirements on components existence
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -n, --no-newline
</span></span><span class="line"><span class="cl">              do not output the trailing delimiter
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -q, --quiet,
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -s, --silent
</span></span><span class="line"><span class="cl">              suppress most error messages
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -v, --verbose
</span></span><span class="line"><span class="cl">              report error messages
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       -z, --zero
</span></span><span class="line"><span class="cl">              separate output with NUL rather than newline
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       --help display this help and exit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       --version
</span></span><span class="line"><span class="cl">              output version information and exit
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">       GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt; Report readlink translation bugs to &lt;http://translationproject.org/team/&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-1">ç¤ºä¾‹
</h4><ul>
<li>é€šè¿‡é€’å½’åœ°è·Ÿè¸ªç»™å®šåç§°çš„æ¯ä¸ªç»„ä»¶ä¸­çš„æ¯ä¸ªç¬¦å·é“¾æ¥æ¥è§„èŒƒåŒ–ï¼›é™¤äº†æœ€åä¸€ä¸ªéƒ¨åˆ†éƒ½å¿…é¡»å­˜åœ¨</li>
</ul>
<p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-8.png"
	width="928"
	height="68"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-8_hu_61a1b84b669ac9f8.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-8_hu_833f87b5a3a22776.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1364"
		data-flex-basis="3275px"
	
></p>
<p><code>zsoelim</code> ä¸ºç¬¦å·é“¾æ¥ æŒ‡å‘ <code>soelim</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">readlink /usr/bin/zsoelim
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-4.png"
	width="658"
	height="62"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-4_hu_61f91958c23e0588.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-4_hu_464d2c566a8ee816.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1061"
		data-flex-basis="2547px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">readlink -f /usr/bin/zsoelim
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-5.png"
	width="694"
	height="66"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-5_hu_25796f21c2532606.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-5_hu_f06630a2f6094273.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1051"
		data-flex-basis="2523px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">readlink /usr/bin/soelim
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-6.png"
	width="644"
	height="70"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-6_hu_583dd3f2c90460c7.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-6_hu_31d53f39876ebfd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="920"
		data-flex-basis="2208px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">readlink -f /usr/bin/soelim
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-7.png"
	width="682"
	height="66"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-7_hu_cc5b57a3ac60e781.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-7_hu_15dd32d6ed84854b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1033"
		data-flex-basis="2480px"
	
></p>
<h4 id="å®æˆ˜-1">å®æˆ˜
</h4><ul>
<li>è¿”å›å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">readlink -f ../
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-9.png"
	width="550"
	height="74"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-9_hu_e253bb727c93cd91.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-9_hu_fcf21af18b4f7b6a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="743"
		data-flex-basis="1783px"
	
></p>
<h4 id="ç”Ÿè¯-1">ç”Ÿè¯
</h4><ul>
<li>resolved / rÉªËˆzÉ‘Ëlvd / adjã€åšå†³çš„ï¼›è§£æçš„</li>
<li>symbolic / sÉªmËˆbÉ‘ËlÉªk / adjã€ç¬¦å·çš„ï¼›è±¡å¾çš„</li>
<li>canonical / kÉ™ËˆnÉ‘ËnÉªkl / adjã€æ ‡å‡†çš„ï¼›å‡†ç¡®çš„</li>
<li>canonicalize vã€è§„èŒƒåŒ–ï¼›ä½¿æ ‡å‡†åŒ–</li>
<li>symlink nã€ç¬¦å·é“¾æ¥</li>
<li>component / kÉ™mËˆpoÊŠnÉ™nt / adjã€ç»„æˆçš„ï¼›nã€ç»„æˆéƒ¨åˆ†</li>
<li>recursive / rÉªËˆkÉœËrsÉªv / adjã€é€’å½’çš„ï¼›å¾ªç¯çš„</li>
<li>suppress / sÉ™Ëˆpres / vã€é•‡å‹ï¼›é˜»æ­¢ï¼›éšç’ï¼›æŠ‘åˆ¶ï¼›å…‹åˆ¶ï¼›æ¶ˆé™¤</li>
<li>separate / ËˆseprÉ™t / adjã€å•ç‹¬çš„ï¼Œåˆ†å¼€çš„ï¼›ä¸åŒçš„ï¼Œä¸ç›¸å…³çš„ï¼› vã€ï¼ˆä½¿ï¼‰åˆ†ç¦»ï¼›ï¼ˆæŠŠ&hellip;&hellip;ï¼‰åˆ†æˆä¸åŒéƒ¨åˆ†ï¼›åŒºåˆ†</li>
<li>delimiter / dÉªËˆlÉªmÉªtÉ™r / nã€å®šç•Œç¬¦ï¼›åˆ†éš”ç¬¦</li>
</ul>
<p>çŸ­è¯­ï¼š</p>
<ul>
<li>all but  é™¤äº†&hellip;..éƒ½</li>
</ul>
<h3 id="awk">awk
</h3><p>ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ã€‚</p>
<h4 id="è¯­æ³•">è¯­æ³•
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">awk options &#39;pattern {action}&#39; file
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>é€‰é¡¹å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>options</code>ï¼šæ˜¯ä¸€äº›é€‰é¡¹ï¼Œç”¨äºæ§åˆ¶ awk çš„è¡Œä¸ºã€‚</li>
<li><code>pattern</code>ï¼šæ˜¯ç”¨äºåŒ¹é…è¾“å…¥æ•°æ®çš„æ¨¡å¼ã€‚å¦‚æœçœç•¥ï¼Œåˆ™ awk å°†å¯¹æ‰€æœ‰è¡Œè¿›è¡Œæ“ä½œã€‚</li>
<li><code>{action}</code>ï¼šæ˜¯åœ¨åŒ¹é…åˆ°æ¨¡å¼çš„è¡Œä¸Šæ‰§è¡Œçš„åŠ¨ä½œã€‚å¦‚æœçœç•¥ï¼Œåˆ™é»˜è®¤åŠ¨ä½œæ˜¯æ‰“å°æ•´è¡Œã€‚</li>
</ul>
<p><strong>options å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li>
<p><code>-F &lt;åˆ†éš”ç¬¦&gt;</code> æˆ– &ndash;field-separator=&lt;åˆ†éš”ç¬¦&gt;ï¼š æŒ‡å®šè¾“å…¥å­—æ®µçš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ã€‚ä½¿ç”¨è¿™ä¸ªé€‰é¡¹å¯ä»¥æŒ‡å®šä¸åŒäºé»˜è®¤åˆ†éš”ç¬¦çš„å­—æ®µåˆ†éš”ç¬¦ã€‚</p>
</li>
<li>
<p><code>-v &lt;å˜é‡å&gt;=&lt;å€¼&gt;</code>ï¼š è®¾ç½® awk å†…éƒ¨çš„å˜é‡å€¼ã€‚å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹å°†å¤–éƒ¨å€¼ä¼ é€’ç»™ awk è„šæœ¬ä¸­çš„å˜é‡ã€‚</p>
</li>
<li>
<p><code>-f &lt;è„šæœ¬æ–‡ä»¶&gt;</code>ï¼š æŒ‡å®šä¸€ä¸ªåŒ…å« awk è„šæœ¬çš„æ–‡ä»¶ã€‚è¿™æ ·å¯ä»¥åœ¨æ–‡ä»¶ä¸­ç¼–å†™è¾ƒå¤§çš„ awk è„šæœ¬ï¼Œç„¶åé€šè¿‡ -f é€‰é¡¹å°†å…¶åŠ è½½ã€‚</p>
</li>
<li>
<p><code>-V</code> æˆ– &ndash;versionï¼š æ˜¾ç¤º awk çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><code>-h</code> æˆ– &ndash;helpï¼š æ˜¾ç¤º awk çš„å¸®åŠ©ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€‰é¡¹å’Œç”¨æ³•ç¤ºä¾‹ã€‚</p>
</li>
</ul>
<h4 id="å®æˆ˜-2">å®æˆ˜
</h4><p><strong>è·å–mysqlé»˜è®¤å¯†ç </strong></p>
<ul>
<li>æ‰“å°æœ€åä¸€åˆ—æ•°æ®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">awk &#39;{print $NF}&#39; file
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è·å–æ•°æ®åº“æ—¥å¿—ï¼Œå­˜åœ¨ä¸´æ—¶å¯†ç è¡Œ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">grep &#39;temporary password&#39; ${MYSQL_DATA_DIR}/log/mysql-error.log
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è·å–mysqlé»˜è®¤å¯†ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">grep &#39;temporary password&#39; ${MYSQL_DATA_DIR}/log/mysql-error.log | awk &#39;{print $NF}&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="localå…³é”®å­—">localå…³é”®å­—
</h3><h4 id="ä»‹ç»">ä»‹ç»
</h4><p><code>local</code> æ˜¯ä¸€ä¸ªç”¨äºå£°æ˜å±€éƒ¨å˜é‡çš„å…³é”®å­—ã€‚å½“åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ <code>local</code> å£°æ˜å˜é‡æ—¶ï¼Œè¯¥å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šå¯¹å‡½æ•°å¤–éƒ¨çš„åŒåå˜é‡äº§ç”Ÿå½±å“ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ä¸ä¼šæ„å¤–åœ°è¦†ç›–å…¨å±€å˜é‡æˆ–å…¶ä»–å‡½æ•°ä¸­çš„å˜é‡ã€‚</p>
<h4 id="ç¤ºä¾‹-2">ç¤ºä¾‹
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-SH" data-lang="SH"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡</span>
</span></span><span class="line"><span class="cl"><span class="nv">global_var</span><span class="o">=</span><span class="s2">&#34;å…¨å±€å˜é‡&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> example_function<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡</span>
</span></span><span class="line"><span class="cl">	<span class="nb">local</span> <span class="nv">local_var</span><span class="o">=</span><span class="s2">&#34;å±€éƒ¨å˜é‡&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># å†…éƒ¨è°ƒç”¨å±€éƒ¨å˜é‡</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å±€éƒ¨å˜é‡ï¼š</span><span class="si">${</span><span class="nv">local_var</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼š</span><span class="si">${</span><span class="nv">global_var</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è°ƒç”¨å‡½æ•°</span>
</span></span><span class="line"><span class="cl">example_function
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¤–éƒ¨è°ƒç”¨å±€éƒ¨å˜é‡</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®å±€éƒ¨å˜é‡ï¼š</span><span class="si">${</span><span class="nv">local_var</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼š</span><span class="si">${</span><span class="nv">global_var</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@localhost bin]# sh test.sh
</span></span><span class="line"><span class="cl">åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å±€éƒ¨å˜é‡ï¼šå±€éƒ¨å˜é‡
</span></span><span class="line"><span class="cl">åœ¨å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼šå…¨å±€å˜é‡
</span></span><span class="line"><span class="cl">åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®å±€éƒ¨å˜é‡ï¼š
</span></span><span class="line"><span class="cl">åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®å…¨å±€å˜é‡ï¼šå…¨å±€å˜é‡
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-14.png"
	width="474"
	height="168"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-14_hu_8aa88d931700e439.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-14_hu_cf854de6a444f00e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="282"
		data-flex-basis="677px"
	
></p>
<h3 id="å’Œç‰¹æ®Šå˜é‡çš„ä½¿ç”¨ç»†èŠ‚"><code>$</code>å’Œç‰¹æ®Šå˜é‡çš„ä½¿ç”¨ç»†èŠ‚
</h3><h4 id="å•çº¯çš„å˜é‡å">å•çº¯çš„<code>$å˜é‡å</code>
</h4><p>å½“æˆ‘ä»¬å®šä¹‰å®Œä¸€ä¸ªå˜é‡åï¼ˆæˆ–è€…æ˜¯å·²çŸ¥ç¯å¢ƒå˜é‡ä¸­å­˜åœ¨çš„å˜é‡åï¼‰ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åœ¨å˜é‡åå‰é¢åŠ <code>$</code>çš„æ–¹å¼æ¥å¼•ç”¨è¿™äº›å˜é‡</p>
<h5 id="ç¤ºä¾‹-3">ç¤ºä¾‹
</h5><ul>
<li>å¼•ç”¨å˜é‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">field1</span><span class="o">=</span>Hello 
</span></span><span class="line"><span class="cl"><span class="nv">field2</span><span class="o">=</span>World
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$field1</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$field2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Hello
</span></span><span class="line"><span class="cl">World
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å®šä¹‰çš„å˜é‡æ˜¯å¯ä»¥æ­£å¸¸æ‰“å°åˆ°æ§åˆ¶å°çš„</p>
<p><strong>ä½¿ç”¨$å˜é‡éœ€è¦æ³¨æ„çš„ç»†èŠ‚</strong></p>
<p>å˜é‡ååé¢ä¸è¦ç›´æ¥åŠ å…¶ä»–å­—ç¬¦ä¸²ï¼Œé˜²æ­¢è¯†åˆ«é”™è¯¯ã€‚</p>
<ul>
<li>åœ¨å˜é‡åç›´æ¥åŠ ä¸Šå­—ç¬¦ä¸²</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">field1</span><span class="o">=</span>Hello
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;-----------&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$field1World</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;-----------&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-----------
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">-----------
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯ä»¥å‘ç°ï¼Œæ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯ç©ºã€‚è¿™æ˜¯å› ä¸ºå­—ç¬¦ä¸²å’Œå˜é‡åä¸­é—´æ²¡æœ‰ç©ºæ ¼çš„è¯ï¼Œè„šæœ¬åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šæŠŠfield1Worldçœ‹æˆæ˜¯ä¸€æ•´ä¸ªçš„å˜é‡åï¼Œè€Œè¿™ä¸ªå˜é‡åæˆ‘ä»¬æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥è‡ªç„¶æ˜¯æ‰¾ä¸åˆ°ç»“æœçš„ã€‚</p>
<h4 id="å˜é‡å"><code>${å˜é‡å}</code>
</h4><p><code>${å˜é‡å}</code>å’Œ<code>$å˜é‡å</code>çš„æ•ˆæœå·®ä¸å¤šï¼Œä½œç”¨æ˜¯å¼•ç”¨æˆ‘ä»¬å®šä¹‰çš„å˜é‡ï¼ˆåŒ…æ‹¬ç¯å¢ƒå˜é‡ï¼‰ï¼Œä½†<code>${å˜é‡å}</code>å¯ä»¥æ˜¾å¼åœ°æ ‡è¯†æˆ‘ä»¬å¸Œæœ›å¼•ç”¨çš„å…·ä½“çš„å˜é‡ã€‚</p>
<h5 id="ç¤ºä¾‹-4">ç¤ºä¾‹
</h5><ul>
<li>å˜é‡åé¢åŠ ä¸Šå­—ç¬¦ä¸²</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">field1</span><span class="o">=</span>Hello
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;-----------&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="si">${</span><span class="nv">field1</span><span class="si">}</span>World
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;-----------&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">-----------
</span></span><span class="line"><span class="cl">HelloWorld
</span></span><span class="line"><span class="cl">-----------
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå³ä½¿å­—ç¬¦ä¸²Worldå’Œå˜é‡ä¹‹é—´ä¸éœ€è¦ç©ºæ ¼ï¼Œè„šæœ¬æ‰§è¡Œçš„æ—¶å€™ä¹Ÿå¯ä»¥æ­£å¸¸å¼•ç”¨å˜é‡ã€‚</p>
<h4 id="-è„šæœ¬-"><code>$( è„šæœ¬ )</code>
</h4><p>åœ¨æ‰§è¡Œä¸€æ¡å‘½ä»¤æ—¶ï¼Œshellä¼šå°†<code>$()</code>ä¸­çš„è¯­å¥å½“åšå‘½ä»¤æ‰§è¡Œä¸€éï¼Œå†å°†ç»“æœåŠ å…¥åˆ°åŸå‘½ä»¤ä¸­é‡æ–°æ‰§è¡Œã€‚ç®€å•æ¦‚æ‹¬çš„è¯ï¼Œ<code>$( è„šæœ¬ )</code>å¯ä»¥è®©æˆ‘ä»¬è·å–åˆ°å‘½ä»¤æ‰§è¡Œçš„ç»“æœå€¼ã€‚</p>
<h5 id="ç¤ºä¾‹-5">ç¤ºä¾‹
</h5><ul>
<li>è¾“å‡ºå½“å‰æ—¥æœŸ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;--------------------------&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> current date is <span class="s2">&#34;</span><span class="k">$(</span>date +%Y-%m-%d<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;--------------------------&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">--------------------------
</span></span><span class="line"><span class="cl">current date is 2025-12-04
</span></span><span class="line"><span class="cl">--------------------------
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè„šæœ¬åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œç¡®å®æ˜¯å…ˆæŠŠ<code>$()</code>çš„å†…å®¹æ‰§è¡Œåï¼Œå†åŠ å…¥åˆ°äº†æœ€ç»ˆçš„æ–‡æœ¬ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¾“å‡ºechoçš„å†…å®¹çš„æ—¶å€™ï¼Œä¸å¯ä»¥ä½¿ç”¨&rsquo;&rsquo;ï¼Œå•å¼•å·é‡Œé¢çš„å†…å®¹ä¼šè¢«å½“åšæ™®é€šæ–‡æœ¬æ¥å¤„ç†ã€‚</p>
<p>PSï¼šè¿™é‡Œç¨å¾®æ‹“å±•ä¸€ä¸‹ï¼Œ`è„šæœ¬` å’Œ<code>$(è„šæœ¬)</code> è¿™ä¸¤ä¸ªè¯­æ³•å®ç°çš„æ•ˆæœæ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥æœ‰æ—¶å€™æˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰äº›äººæ˜¯ç”¨`è„šæœ¬`çš„æ–¹å¼æ¥è·å–è„šæœ¬çš„æ‰§è¡Œç»“æœçš„ã€‚</p>
<h4 id="-è¿ç®—å¼--å’Œ-è¿ç®—å¼"><code>$(( è¿ç®—å¼ ))</code> å’Œ <code>$[è¿ç®—å¼]</code>
</h4><p>è¿™ä¸¤ä¸ªè¯­æ³•ä¸»è¦æ˜¯ç”¨æ¥å¸®åŠ©æˆ‘ä»¬åšä¸€äº›è®¡ç®—çš„ã€‚æˆ‘ä»¬çŸ¥é“åœ¨shellè„šæœ¬ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰çš„æ•°å­—é»˜è®¤éƒ½ä¼šè¢«è¯†åˆ«ä¸ºå­—ç¬¦ä¸²ã€‚æ‰€ä»¥æ¶‰åŠåˆ°æ•°å€¼è¿ç®—çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>$(( è¿ç®—å¼ ))</code> æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆä¸€äº›è®¡ç®—ã€‚</p>
<h5 id="ç¤ºä¾‹-6">ç¤ºä¾‹
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nv">result1</span><span class="o">=</span><span class="k">$((</span><span class="m">1</span><span class="o">+</span><span class="m">2</span><span class="o">+</span><span class="m">3</span><span class="k">))</span>
</span></span><span class="line"><span class="cl"><span class="nv">result2</span><span class="o">=</span>1+2+3
</span></span><span class="line"><span class="cl"><span class="nv">result3</span><span class="o">=</span>$<span class="o">[</span>1+2+3<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;------------&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1+2+3<span class="o">=</span><span class="nv">$result1</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1+2+3<span class="o">=</span><span class="nv">$result2</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> 1+2+3<span class="o">=</span><span class="nv">$result3</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;------------&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">------------
</span></span><span class="line"><span class="cl">1+2+3=6
</span></span><span class="line"><span class="cl">1+2+3=1+2+3
</span></span><span class="line"><span class="cl">1+2+3=6
</span></span><span class="line"><span class="cl">------------
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å’Œæœ‰å…³çš„ç‰¹æ®Šå˜é‡">å’Œ<code>$</code>æœ‰å…³çš„ç‰¹æ®Šå˜é‡
</h4><p>åœ¨shellè„šæœ¬ä¸­ï¼Œé™¤äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„å˜é‡ä»¥åŠç¯å¢ƒå˜é‡å¤–ï¼Œshellä¸­è¿˜å­˜åœ¨ç€ä¸€äº›è‡ªå¸¦çš„ç‰¹æ®Šå˜é‡æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚è¿™äº›ç‰¹æ®Šå˜é‡åœ¨æˆ‘ä»¬è·‘ä¸€äº›æ¯”è¾ƒå¤æ‚çš„è„šæœ¬çš„æ—¶å€™ï¼Œç»™äºˆå¾ˆå¤§çš„å¸®åŠ©ã€‚</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>å˜é‡</th>
          <th>å«ä¹‰</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>$0</td>
          <td>å½“å‰è„šæœ¬çš„æ–‡ä»¶å</td>
      </tr>
      <tr>
          <td>$n(n&gt;1)</td>
          <td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚næ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºç¬¬å‡ ä¸ªå‚æ•°ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯1,ç¬¬äºŒä¸ªå‚æ•°æ˜¯2ã€‚è‹¥nå¤§äº10ï¼Œåˆ™è¯­æ³•ä¸º${n}</td>
      </tr>
      <tr>
          <td>$#</td>
          <td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ä¸ªæ•°</td>
      </tr>
      <tr>
          <td>$*</td>
          <td>ä¼ é€’ç»™è„šæœ¬æˆ–è€…å‡½æ•°çš„æ‰€æœ‰å‚æ•°</td>
      </tr>
      <tr>
          <td>$@</td>
          <td>ä¼ é€’ç»™è„šæœ¬æˆ–å‡½æ•°çš„æ‰€æœ‰å‚æ•°ã€‚å½“è¢«åŒå¼•å·&quot;&ldquo;åŒ…å«æ—¶ï¼Œ$@å’Œ@*ç¨æœ‰ä¸åŒ</td>
      </tr>
      <tr>
          <td>$?</td>
          <td>ä¸Šä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œæˆ–å‡½æ•°çš„è¿”å›å€¼</td>
      </tr>
      <tr>
          <td>$$</td>
          <td>å½“å‰Shellè¿›ç¨‹IDã€‚å¯¹äºShellè„šæœ¬ï¼Œå°±æ˜¯è¿™äº›è„šæœ¬æ‰€åœ¨è¿›ç¨‹ID</td>
      </tr>
  </tbody>
</table></div>
<h5 id="ç¤ºä¾‹-7">ç¤ºä¾‹
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;=====================&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;å½“å‰è„šæœ¬æ–‡ä»¶å\$0= </span><span class="nv">$0</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ç¬¬ä¸€ä¸ªå‚æ•°\$1= </span><span class="nv">$1</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;ç¬¬äºŒä¸ªå‚æ•°\$2= </span><span class="nv">$2</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;æ‰€æœ‰å‚æ•°ä¸ªæ•°\$#= </span><span class="nv">$#</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;æ‰€æœ‰å‚æ•°\$*= </span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;æ‰€æœ‰å‚æ•°\$@= </span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;å½“å‰è¿›ç¨‹ID\$</span>$<span class="s2">= </span><span class="nv">$$</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;=====================&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ‰§è¡Œè„šæœ¬</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sh test.sh aa bb cc
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">=====================
</span></span><span class="line"><span class="cl">å½“å‰è„šæœ¬æ–‡ä»¶å$0= test.sh
</span></span><span class="line"><span class="cl">ç¬¬ä¸€ä¸ªå‚æ•°$1= aa
</span></span><span class="line"><span class="cl">ç¬¬äºŒä¸ªå‚æ•°$2= bb
</span></span><span class="line"><span class="cl">æ‰€æœ‰å‚æ•°ä¸ªæ•°$#= 3
</span></span><span class="line"><span class="cl">æ‰€æœ‰å‚æ•°$*= aa bb cc
</span></span><span class="line"><span class="cl">æ‰€æœ‰å‚æ•°$@= aa bb cc
</span></span><span class="line"><span class="cl">å½“å‰è¿›ç¨‹ID$$= 2206
</span></span><span class="line"><span class="cl">=====================
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å…³äº-å’Œçš„åŒºåˆ«">å…³äº<code>$*</code> å’Œ<code>$@</code>çš„åŒºåˆ«
</h4><p>åœ¨ä¸Šä¸€ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°<code>$*</code>å’Œ<code>$@</code>æ‰“å°å‡ºæ¥çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œé‚£å®é™…ä¸Šè¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡æœ‰å­˜åœ¨ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿå¦‚æœè¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡æ²¡æœ‰è¢«&quot;&ldquo;åŒ…å«çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æ²¡æœ‰åŒºåˆ†çš„ã€‚ä½†å½“ä»–ä»¬è¢«&quot;&ldquo;åŒ…å«æ—¶ï¼ŒåŒºåˆ«å°±æ˜¾ç¤ºå‡ºæ¥äº†ï¼š<code>$*</code>æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œè€Œ<code>$@</code>æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ã€‚</p>
<h5 id="ç¤ºä¾‹-8">ç¤ºä¾‹
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;========================&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;print all params by \&#34;\$*\&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$*</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$var</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;========================&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;========================&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;print all params by \&#34;\$@\&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> var in <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="nv">$var</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;========================&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ‰§è¡Œè„šæœ¬</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sh test.sh aa bb cc
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">========================
</span></span><span class="line"><span class="cl">print all params by &#34;$*&#34;
</span></span><span class="line"><span class="cl">aa bb cc
</span></span><span class="line"><span class="cl">========================
</span></span><span class="line"><span class="cl">========================
</span></span><span class="line"><span class="cl">print all params by &#34;$@&#34;
</span></span><span class="line"><span class="cl">aa
</span></span><span class="line"><span class="cl">bb
</span></span><span class="line"><span class="cl">cc
</span></span><span class="line"><span class="cl">========================
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦">æ–‡ä»¶æµ‹è¯•è¿ç®—ç¬¦ä¸é€»è¾‘è¿ç®—ç¬¦
</h3><ul>
<li><code>&amp;&amp;</code></li>
</ul>
<p>åªæœ‰å‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼ˆé€€å‡ºçŠ¶æ€ç  0ï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤ï¼›å¦‚æœå‰é¢å‘½ä»¤å¤±è´¥ï¼Œåé¢å‘½ä»¤ç›´æ¥è·³è¿‡ã€‚</p>
<ul>
<li><code>||</code></li>
</ul>
<p>åªæœ‰å‰é¢çš„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼ˆé€€å‡ºçŠ¶æ€ç  â‰  0ï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤ï¼›å¦‚æœå‰é¢å‘½ä»¤æˆåŠŸï¼Œåé¢å‘½ä»¤ç›´æ¥è·³è¿‡ã€‚</p>
<h4 id="å®æˆ˜-3">å®æˆ˜
</h4><ul>
<li>æ£€æµ‹ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨(æˆåŠŸ)åˆ™åˆ é™¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> remove_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ¤æ–­æ˜¯å¦å­˜åœ¨nginxæ ¹ç›®å½•ï¼Œå¦‚æœå­˜åœ¨åˆ™åˆ é™¤</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d /usr/local/nginx <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -rf /usr/local/nginx 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	remove_nginx
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">main
</span></span></code></pre></td></tr></table>
</div>
</div><p>åˆ›å»ºnginxç›®å½•</p>
<p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-17.png"
	width="702"
	height="478"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-17_hu_bc3c1dc8bc83a5fa.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-17_hu_a2dd7d80bcbdff7e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="146"
		data-flex-basis="352px"
	
></p>
<p>æ‰§è¡Œè„šæœ¬</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sh test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-16.png"
	width="476"
	height="70"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-16_hu_efe7a098335878e.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-16_hu_e86d1ebb69aaa1b2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="680"
		data-flex-basis="1632px"
	
></p>
<p>æŸ¥çœ‹nginxç›®å½•æ˜¯å¦å­˜åœ¨</p>
<p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-18.png"
	width="702"
	height="410"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-18_hu_6af8bb1e9752c351.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-18_hu_64875a309915d233.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="171"
		data-flex-basis="410px"
	
></p>
<ul>
<li>æ£€æµ‹ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨(å¤±è´¥)åˆ™åˆ›å»º</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> install_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ¤æ–­æ˜¯å¦å­˜åœ¨nginxæ ¹ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d /usr/local/nginx <span class="o">]</span> <span class="o">||</span> mkdir -p /usr/local/nginx
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	install_nginx
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">main
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>æ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨(å¤±è´¥)åˆ™åˆ›å»º</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> edit_nginx_conf<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ¤æ–­æ˜¯å¦å­˜åœ¨nginxæ ¹ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d /usr/local/nginx <span class="o">]</span> <span class="o">||</span> mkdir -p /usr/local/nginx
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ¤æ–­æ˜¯å¦å­˜åœ¨confé…ç½®ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d /usr/local/nginx/conf <span class="o">]</span> <span class="o">||</span> mkdir -p /usr/local/nginx/conf
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ¤è¯»æ˜¯å¦å­˜åœ¨nginxé…ç½®æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f /usr/local/nginx/conf/nginx.conf <span class="o">]</span> <span class="o">||</span> touch /usr/local/nginx/conf/nginx.conf
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	edit_nginx_conf
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">main
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="shelléƒ¨ç½²è„šæœ¬-nginx">shelléƒ¨ç½²è„šæœ¬-nginx
</h2><h3 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„
</h3><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-15.png"
	width="370"
	height="248"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-15_hu_7c139c89fc7521b2.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-15_hu_c3731e01e5f33fda.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="149"
		data-flex-basis="358px"
	
></p>
<ul>
<li><code>tools</code> ï¼š å­˜æ”¾æ‰€æœ‰è„šæœ¬</li>
<li><code>centos7_env_tools</code> : å­˜æ”¾centos7ç¯å¢ƒçš„è„šæœ¬</li>
<li><code>bin</code> : è„šæœ¬çš„shå¯æ‰§è¡Œæ–‡ä»¶</li>
<li><code>conf</code> : è„šæœ¬è°ƒç”¨çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå­˜æ”¾é…ç½®å‚æ•°çš„æ–‡ä»¶</li>
<li><code>source</code> : è„šæœ¬è°ƒç”¨çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚tar.gzå®‰è£…åŒ…ç­‰æ–‡ä»¶</li>
<li><code>logs</code> : å­˜æ”¾è„šæœ¬è°ƒç”¨åç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶</li>
</ul>
<h3 id="æ–‡ä»¶åŠå…¶å†…å®¹">æ–‡ä»¶åŠå…¶å†…å®¹
</h3><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-19.png"
	width="522"
	height="448"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-19_hu_135a3af3ea5b9571.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-19_hu_dc86d46190a23729.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="279px"
	
></p>
<p>åªéœ€è¦è¿™ä¸¤ä¸ªæ–‡ä»¶å³å¯</p>
<h4 id="install_nginxsh"><code>install_nginx.sh</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">APP_ROOT</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span> <span class="o">&amp;&amp;</span> readlink -f ../<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">source</span> <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/conf/nginx_conf.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_user_is_root<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">UID</span><span class="si">}</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;Please use the root user to execute!&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> log<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="nb">local</span> <span class="nv">msg</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> log_error<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="nb">local</span> <span class="nv">msg</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-ERROR:</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is exit--------------------------------------------------------------&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log						 
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-ERROR:</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is exit--------------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl">															 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æµ‹ç›®å½•æ˜¯å¦å®Œæ•´</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_tools_directory<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    <span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source
</span></span><span class="line"><span class="cl">    <span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥nginxæ˜¯å¦è¿è¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_nginx_is_run<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>ps -ef <span class="p">|</span> grep <span class="s2">&#34;nginx: master process&#34;</span> <span class="p">|</span> wc -l<span class="k">)</span> -gt <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># è¿è¡Œä¸­å°±é€€å‡º</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;nginx is running... Exit the installation program &#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;nginx is not running...&#34;</span>
</span></span><span class="line"><span class="cl">		check_nginx_directory_without_run
</span></span><span class="line"><span class="cl">		
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥nginxç›®å½•æ˜¯å¦å­˜åœ¨</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_nginx_directory<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -d /usr/local/nginx <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># å­˜åœ¨å°±åˆ é™¤</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;The nginx directory already exists. Stop installing the program.&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span> 
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;The nginx directory was not found. Please uninstall it manually.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥nginxç›®å½•æ˜¯å¦å­˜åœ¨</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_nginx_directory_without_run<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -d /usr/local/nginx <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># å­˜åœ¨å°±åˆ é™¤</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;The nginx directory already exists. Stop installing the program.&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span> 
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;The nginx directory was not found.&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åœæ­¢nginx</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> stop_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;nginx is stoping...&#34;</span>
</span></span><span class="line"><span class="cl">	/usr/local/nginx/sbin/nginx -s stop
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> !<span class="o">=</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;Failed to shut down nginx.Please manually delete and install nginx&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;nginx is stop&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç§»é™¤nginxç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> remove_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	rm -rf /usr/local/nginx
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½å®‰è£…nginxéœ€è¦çš„ç¯å¢ƒ</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> install_env<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	yum -y install wget gcc-c++ pcre pcre-devel zlib zlib-devel openssl openssl-devel make 
</span></span><span class="line"><span class="cl">	<span class="c1"># log &#34;The installation environment is completed.&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;install env true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;install env false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ä¸‹è½½å®‰è£…åŒ…</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> download_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># æŸ¥çœ‹ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨nginxå®‰è£…åŒ…ï¼Œä¸å­˜åœ¨åˆ™ä¸‹è½½</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz <span class="o">]</span> <span class="o">||</span> wget -P <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source https://nginx.org/download/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;download nginx true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;download nginx false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£…nginx</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> install_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># å¦‚æœä¸å­˜åœ¨ç›®å½•å°±åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d /usr/local/nginx <span class="o">]</span> <span class="o">||</span> mkdir -p /usr/local/nginx
</span></span><span class="line"><span class="cl">	<span class="c1"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨å®‰è£…åŒ…</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -f <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># å¦‚æœå·²ç»è§£å‹äº†</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">			<span class="nb">cd</span> <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">			./configure --prefix<span class="o">=</span>/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module
</span></span><span class="line"><span class="cl">			make
</span></span><span class="line"><span class="cl">			make install
</span></span><span class="line"><span class="cl">			<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">				log <span class="s2">&#34;install nginx true&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span>
</span></span><span class="line"><span class="cl">				log <span class="s2">&#34;install nginx false&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="k">fi</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">			tar -zxvf <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>.tar.gz -C <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/
</span></span><span class="line"><span class="cl">			<span class="nb">cd</span> <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx-<span class="si">${</span><span class="nv">NGINX_VERSION</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">			./configure --prefix<span class="o">=</span>/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module
</span></span><span class="line"><span class="cl">			make
</span></span><span class="line"><span class="cl">			make install
</span></span><span class="line"><span class="cl">			<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">				log <span class="s2">&#34;install nginx true&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="k">else</span>
</span></span><span class="line"><span class="cl">				log <span class="s2">&#34;install nginx false&#34;</span>
</span></span><span class="line"><span class="cl">			<span class="k">fi</span>
</span></span><span class="line"><span class="cl">		<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;No nginx installation package was found. Download stopped.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¼€æ”¾80ç«¯å£</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> open_80_port<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># æ£€æŸ¥80 ç«¯å£æ˜¯å¦å¼€æ”¾</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>firewall-cmd --query-port<span class="o">=</span>80/tcp<span class="sb">`</span> <span class="o">==</span> <span class="s2">&#34;no&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> 
</span></span><span class="line"><span class="cl">		<span class="c1"># å¼€å¯80ç«¯å£</span>
</span></span><span class="line"><span class="cl">		firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>80/tcp --permanent
</span></span><span class="line"><span class="cl">		<span class="c1"># é‡å¯é˜²ç«å¢™</span>
</span></span><span class="line"><span class="cl">		firewall-cmd --reload
</span></span><span class="line"><span class="cl">		<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">			log <span class="s2">&#34;open 80 port true&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">			log <span class="s2">&#34;open 80 port false&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span> 
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;Port 80 is now open&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æµ‹nginxæœåŠ¡å¹¶å®‰è£…</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_and_install_nginx_sys<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -f /usr/lib/systemd/system/nginx.service <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;The nginx service already exists&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		check_source_nginx_sys
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	sys_nginx
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;install nginx service true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;install nginx service false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥sourceç›®å½•ä¸‹ï¼Œæ˜¯å¦å­˜åœ¨nginxæœåŠ¡æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_source_nginx_sys<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -f <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx.service <span class="o">]</span><span class="p">;</span> <span class="k">then</span> 
</span></span><span class="line"><span class="cl">		cp <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/nginx.service /usr/lib/systemd/system/
</span></span><span class="line"><span class="cl">		chmod <span class="m">744</span> /usr/lib/systemd/system/nginx.service
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		cat_nginx_service
</span></span><span class="line"><span class="cl">		chmod <span class="m">744</span> /usr/lib/systemd/system/nginx.service
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å†™å…¥nginxæœåŠ¡</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> cat_nginx_service<span class="o">(){</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç”¨ cat è¾“å‡ºå†…å®¹å¹¶å†™å…¥æ–‡ä»¶(æ³¨æ„ï¼ŒEOFè¿™æ®µå¿…é¡»é¡¶æ ¼å†™)</span>
</span></span><span class="line"><span class="cl">cat &gt; <span class="s2">&#34;</span><span class="nv">$NGINX_SERVICE_FILE</span><span class="s2">&#34;</span> <span class="s">&lt;&lt; &#39;EOF&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">[Unit]
</span></span></span><span class="line"><span class="cl"><span class="s">Description=nginx - web server
</span></span></span><span class="line"><span class="cl"><span class="s">After=network.target remote-fs.target nss-lookup.target
</span></span></span><span class="line"><span class="cl"><span class="s">[Service]
</span></span></span><span class="line"><span class="cl"><span class="s">Type=forking
</span></span></span><span class="line"><span class="cl"><span class="s">PIDFile=/usr/local/nginx/logs/nginx.pid
</span></span></span><span class="line"><span class="cl"><span class="s">ExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf
</span></span></span><span class="line"><span class="cl"><span class="s">ExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf
</span></span></span><span class="line"><span class="cl"><span class="s">ExecReload=/usr/local/nginx/sbin/nginx -s reload
</span></span></span><span class="line"><span class="cl"><span class="s">ExecStop=/usr/local/nginx/sbin/nginx -s stop
</span></span></span><span class="line"><span class="cl"><span class="s">ExecQuit=/usr/local/nginx/sbin/nginx -s quit
</span></span></span><span class="line"><span class="cl"><span class="s">PrivateTmp=true
</span></span></span><span class="line"><span class="cl"><span class="s">[Install]
</span></span></span><span class="line"><span class="cl"><span class="s">WantedBy=multi-user.target
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£…æˆç³»ç»ŸæœåŠ¡</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> sys_nginx<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	systemctl daemon-reload
</span></span><span class="line"><span class="cl">	systemctl start nginx
</span></span><span class="line"><span class="cl">	systemctl <span class="nb">enable</span> nginx
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">(){</span>
</span></span><span class="line"><span class="cl">    check_tools_directory
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is running-----------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl">	check_user_is_root
</span></span><span class="line"><span class="cl">	check_nginx_is_run
</span></span><span class="line"><span class="cl">	install_env
</span></span><span class="line"><span class="cl">	download_nginx
</span></span><span class="line"><span class="cl">	install_nginx
</span></span><span class="line"><span class="cl">	open_80_port
</span></span><span class="line"><span class="cl">	check_and_install_nginx_sys
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is complete----------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">main
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="nginx_confsh"><code>nginx_conf.sh</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">NGINX_VERSION=&#34;1.22.1&#34;
</span></span><span class="line"><span class="cl">NGINX_SERVICE_FILE=&#34;/usr/lib/systemd/system/nginx.service&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="shelléƒ¨ç½²è„šæœ¬-mysql">shelléƒ¨ç½²è„šæœ¬-mysql
</h2><h3 id="ç›®å½•ç»“æ„-1">ç›®å½•ç»“æ„
</h3><p><img src="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-20.png"
	width="854"
	height="416"
	srcset="/p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-20_hu_a92ce074de89f957.png 480w, /p/shellshell%E8%84%9A%E6%9C%AC%E5%AE%9E%E6%88%98/image-20_hu_e77f54f2cf18fe50.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="205"
		data-flex-basis="492px"
	
></p>
<h3 id="æ–‡ä»¶åŠå…¶å†…å®¹-1">æ–‡ä»¶åŠå…¶å†…å®¹
</h3><h4 id="install_mysql8sh"><code>install_mysql8.sh</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!bin/bash 
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nv">APP_ROOT</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="k">$(</span>dirname <span class="nv">$0</span><span class="k">)</span> <span class="o">&amp;&amp;</span> readlink -f ../<span class="k">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">source</span> <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/conf/mysql8_conf.sh
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_user_is_root<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">UID</span><span class="si">}</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="nb">echo</span> <span class="s2">&#34;Please use root user to execute!&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> log<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="nb">local</span> <span class="nv">msg</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> log_error<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="nb">local</span> <span class="nv">msg</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-ERROR:</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is exit--------------------------------------------------------------&#34;</span> &gt;&gt; <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs/<span class="k">$(</span>basename <span class="nv">$0</span> .sh<span class="k">)</span>.log 
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-ERROR:</span><span class="si">${</span><span class="nv">msg</span><span class="si">}</span><span class="s2">&#34;</span> 
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date <span class="s1">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="k">)</span><span class="s2">-</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is exit--------------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_tools_direcotry<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/logs
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_mysql_is_run<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>ps -ef <span class="p">|</span> grep mysqld <span class="p">|</span> wc -l<span class="k">)</span> -gt <span class="m">1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="c1"># mysql æ­£åœ¨è¿è¡Œ</span>
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;mysql is running. stop the installation program.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;mysql is not running&#34;</span>
</span></span><span class="line"><span class="cl">		check_mysql_directory
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_mysql_directory<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -d /usr/local/mysql <span class="o">]</span><span class="p">;</span> <span class="k">then</span> 
</span></span><span class="line"><span class="cl">		log_error <span class="s2">&#34;The mysql directory already exits.Stop installing the program.&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;mysql is installing....&#34;</span>
</span></span><span class="line"><span class="cl">		check_mysql_env
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> download_mysql<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># æŸ¥çœ‹ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨mysqlçš„å®‰è£…åŒ…ï¼Œè¦æ˜¯ä¸å­˜åœ¨çš„è¯å°±ä¸‹è½½</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span>.tar.xz <span class="o">]</span> <span class="o">||</span> wget -P <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source https://downloads.mysql.com/archives/get/p/23/file/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span>.tar.xz
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;download mysql true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;download mysql false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> install_mysql<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># è§£å‹æ–‡ä»¶åˆ°æŒ‡å®šä½ç½®</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		cp -r <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span> /usr/local/mysql
</span></span><span class="line"><span class="cl">	<span class="k">else</span> 
</span></span><span class="line"><span class="cl">		tar -xvf <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span>.tar.xz -C <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/
</span></span><span class="line"><span class="cl">		cp -r <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/mysql-<span class="si">${</span><span class="nv">MYSQL_VERSION</span><span class="si">}</span> /usr/local/mysql
</span></span><span class="line"><span class="cl">	<span class="k">fi</span> 
</span></span><span class="line"><span class="cl">	<span class="c1"># å¦‚æœæ²¡æœ‰å­˜å‚¨æ•°æ®çš„æ–‡ä»¶å¤¹çš„è¯ï¼Œåˆ™åˆ›å»º</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span> <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/data <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/data
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/log <span class="o">]</span> <span class="o">||</span> mkdir -p <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/log
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;create mysql data directory true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>	
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;create mysql data directory false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	create_group_and_user
</span></span><span class="line"><span class="cl">	<span class="c1"># ç¼–è¾‘my.cnfæ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">	edit_mysql_cnf
</span></span><span class="line"><span class="cl">	<span class="c1"># å®‰è£…mysql</span>
</span></span><span class="line"><span class="cl">	/usr/local/mysql/bin/mysqld --initialize --user<span class="o">=</span>mysql --datadir<span class="o">=</span><span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/data --basedir<span class="o">=</span><span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># è·å–mysqlå¯†ç </span>
</span></span><span class="line"><span class="cl">	<span class="nv">TEMP_MYSQL_PWD</span><span class="o">=</span><span class="k">$(</span> grep <span class="s1">&#39;temporary password&#39;</span> <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>/log/mysql.log <span class="p">|</span> awk <span class="s1">&#39;{print $NF}&#39;</span> <span class="k">)</span>
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;the mysql temporary password is </span><span class="si">${</span><span class="nv">TEMP_MYSQL_PWD</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># æ·»åŠ mysqlæœåŠ¡</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># add_mysql_sys</span>
</span></span><span class="line"><span class="cl">    edit_mysql_sys
</span></span><span class="line"><span class="cl">	<span class="c1"># å¯åŠ¨mysql</span>
</span></span><span class="line"><span class="cl">	start_mysql_sys
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ›å»ºmysqlè½¯é“¾æ¥</span>
</span></span><span class="line"><span class="cl">	link_mysql
</span></span><span class="line"><span class="cl">	<span class="c1"># ä¿®æ”¹mysqlå¯†ç </span>
</span></span><span class="line"><span class="cl">	set_root_pwd_and_remote
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> create_group_and_user<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ›å»ºç”¨æˆ·ç»„</span>
</span></span><span class="line"><span class="cl">	groupadd mysql
</span></span><span class="line"><span class="cl">	<span class="c1"># åˆ›å»ºç”¨æˆ· </span>
</span></span><span class="line"><span class="cl">	useradd -s /usr/sbin/nologin -r -g mysql mysql
</span></span><span class="line"><span class="cl">	<span class="c1"># è®¾ç½®æƒé™</span>
</span></span><span class="line"><span class="cl">	chown -R mysql:mysql /usr/local/mysql  
</span></span><span class="line"><span class="cl">	chmod -R <span class="m">755</span> /usr/local/mysql 
</span></span><span class="line"><span class="cl">	chown -R mysql:mysql <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">	chmod -R <span class="m">755</span> <span class="si">${</span><span class="nv">MYSQL_DATA_DIR</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;create group and user true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;create group and user false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> check_mysql_env<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># å¸è½½mariadbï¼Œå¦‚æœå­˜åœ¨çš„è¯</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>rpm -qa <span class="p">|</span> grep mariadb <span class="p">|</span> wc -l<span class="k">)</span> -gt <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		rpm -e --nodeps <span class="k">$(</span>rpm -qa <span class="p">|</span> grep mariadb<span class="k">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>rpm -qa <span class="p">|</span> grep libaio <span class="p">|</span> wc -l<span class="k">)</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		yum install libaio -y
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>rpm -qa <span class="p">|</span> grep numactl <span class="p">|</span> wc -l<span class="k">)</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		yum install numactl -y
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="k">$(</span>rpm -qa <span class="p">|</span> grep wget <span class="p">|</span> wc -l<span class="k">)</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		yum install wget -y
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> edit_mysql_cnf<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f <span class="si">${</span><span class="nv">MYSQL_CONF</span><span class="si">}</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -rf <span class="si">${</span><span class="nv">MYSQL_CONF</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">cat &gt; <span class="si">${</span><span class="nv">MYSQL_CONF</span><span class="si">}</span> <span class="s">&lt;&lt; EOF
</span></span></span><span class="line"><span class="cl"><span class="s">[mysql]
</span></span></span><span class="line"><span class="cl"><span class="s"># é»˜è®¤å­—ç¬¦é›†
</span></span></span><span class="line"><span class="cl"><span class="s">default-character-set=utf8mb4
</span></span></span><span class="line"><span class="cl"><span class="s">[client]
</span></span></span><span class="line"><span class="cl"><span class="s">port       = 3306
</span></span></span><span class="line"><span class="cl"><span class="s">socket     = /tmp/mysql.sock
</span></span></span><span class="line"><span class="cl"><span class="s">[mysqld]
</span></span></span><span class="line"><span class="cl"><span class="s">port       = 3306
</span></span></span><span class="line"><span class="cl"><span class="s">server-id  = 3306
</span></span></span><span class="line"><span class="cl"><span class="s">user       = mysql
</span></span></span><span class="line"><span class="cl"><span class="s">socket     = /tmp/mysql.sock
</span></span></span><span class="line"><span class="cl"><span class="s"># å®‰è£…ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="s">basedir    = ${MYSQL_DATA_DIR}
</span></span></span><span class="line"><span class="cl"><span class="s"># æ•°æ®å­˜æ”¾ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="s">datadir    = ${MYSQL_DATA_DIR}/data
</span></span></span><span class="line"><span class="cl"><span class="s">log-bin    = ${MYSQL_DATA_DIR}/data/mysql-bin
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_data_home_dir      =${MYSQL_DATA_DIR}/data
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_log_group_home_dir =${MYSQL_DATA_DIR}/data
</span></span></span><span class="line"><span class="cl"><span class="s"># æ—¥å¿—åŠè¿›ç¨‹æ•°æ®çš„å­˜æ”¾ç›®å½•
</span></span></span><span class="line"><span class="cl"><span class="s">log-error =${MYSQL_DATA_DIR}/log/mysql.log
</span></span></span><span class="line"><span class="cl"><span class="s">pid-file  =${MYSQL_DATA_DIR}/data/mysql.pid
</span></span></span><span class="line"><span class="cl"><span class="s"># æœåŠ¡ç«¯å­—ç¬¦é›†
</span></span></span><span class="line"><span class="cl"><span class="s">character-set-server=utf8mb4
</span></span></span><span class="line"><span class="cl"><span class="s">lower_case_table_names=1
</span></span></span><span class="line"><span class="cl"><span class="s">autocommit =1
</span></span></span><span class="line"><span class="cl"><span class="s">##### ä»¥ä¸Šæ¶‰åŠæ–‡ä»¶å¤¹æ˜ï¼Œæ³¨æ„ä¿®æ”¹
</span></span></span><span class="line"><span class="cl"><span class="s">skip-external-locking
</span></span></span><span class="line"><span class="cl"><span class="s">key_buffer_size = 256M
</span></span></span><span class="line"><span class="cl"><span class="s">max_allowed_packet = 1M
</span></span></span><span class="line"><span class="cl"><span class="s">table_open_cache = 1024
</span></span></span><span class="line"><span class="cl"><span class="s">sort_buffer_size = 4M
</span></span></span><span class="line"><span class="cl"><span class="s">net_buffer_length = 8K
</span></span></span><span class="line"><span class="cl"><span class="s">read_buffer_size = 4M
</span></span></span><span class="line"><span class="cl"><span class="s">read_rnd_buffer_size = 512K
</span></span></span><span class="line"><span class="cl"><span class="s">myisam_sort_buffer_size = 64M
</span></span></span><span class="line"><span class="cl"><span class="s">thread_cache_size = 128
</span></span></span><span class="line"><span class="cl"><span class="s">#query_cache_size = 128M
</span></span></span><span class="line"><span class="cl"><span class="s">tmp_table_size = 128M
</span></span></span><span class="line"><span class="cl"><span class="s">explicit_defaults_for_timestamp = true
</span></span></span><span class="line"><span class="cl"><span class="s">max_connections = 500
</span></span></span><span class="line"><span class="cl"><span class="s">max_connect_errors = 100
</span></span></span><span class="line"><span class="cl"><span class="s">open_files_limit = 65535
</span></span></span><span class="line"><span class="cl"><span class="s">binlog_format=mixed
</span></span></span><span class="line"><span class="cl"><span class="s">binlog_expire_logs_seconds =864000
</span></span></span><span class="line"><span class="cl"><span class="s"># åˆ›å»ºè¡¨æ—¶ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“
</span></span></span><span class="line"><span class="cl"><span class="s">default_storage_engine = InnoDB
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_data_file_path = ibdata1:10M:autoextend
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_buffer_pool_size = 1024M
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_log_file_size = 256M
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_log_buffer_size = 8M
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_flush_log_at_trx_commit = 1
</span></span></span><span class="line"><span class="cl"><span class="s">innodb_lock_wait_timeout = 50
</span></span></span><span class="line"><span class="cl"><span class="s">transaction-isolation=READ-COMMITTED
</span></span></span><span class="line"><span class="cl"><span class="s">[mysqldump]
</span></span></span><span class="line"><span class="cl"><span class="s">quick
</span></span></span><span class="line"><span class="cl"><span class="s">max_allowed_packet = 16M
</span></span></span><span class="line"><span class="cl"><span class="s">[myisamchk]
</span></span></span><span class="line"><span class="cl"><span class="s">key_buffer_size = 256M
</span></span></span><span class="line"><span class="cl"><span class="s">sort_buffer_size = 4M
</span></span></span><span class="line"><span class="cl"><span class="s">read_buffer = 2M
</span></span></span><span class="line"><span class="cl"><span class="s">write_buffer = 2M
</span></span></span><span class="line"><span class="cl"><span class="s">[mysqlhotcopy]
</span></span></span><span class="line"><span class="cl"><span class="s">interactive-timeout
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># è®¾ç½®æƒé™</span>
</span></span><span class="line"><span class="cl">	chmod <span class="m">644</span> <span class="si">${</span><span class="nv">MYSQL_CONF</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># éœ€è¦èƒ½å¤Ÿè¿æ¥github</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> add_mysql_sys<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	add_mysql_sys_env
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/jemalloc <span class="o">]</span>  <span class="o">||</span> git clone https://github.com/jemalloc/jemalloc.git <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/jemalloc
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> ! -d <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/jemalloc/lib <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		<span class="nb">cd</span> <span class="si">${</span><span class="nv">APP_ROOT</span><span class="si">}</span>/source/jemalloc
</span></span><span class="line"><span class="cl">		./autogen.sh
</span></span><span class="line"><span class="cl">		./configure
</span></span><span class="line"><span class="cl">	    make -j4
</span></span><span class="line"><span class="cl">		make install
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f /etc/sysconfig/mysql <span class="o">]</span> <span class="o">&amp;&amp;</span> rm -rf /etc/sysconfig/mysql
</span></span><span class="line"><span class="cl">	<span class="nb">echo</span> <span class="s2">&#34;LD_PRELOAD=/usr/local/lib/libjemalloc.so.2&#34;</span> &gt;&gt; /etc/sysconfig/mysql
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> add_mysql_sys_env<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	yum install -y automake autoconf  libtool  autoreconf bzip2 git make 
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;add mysql sys env true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;add mysql sys env false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> edit_mysql_sys<span class="o">(){</span>
</span></span><span class="line"><span class="cl">cat &gt; <span class="si">${</span><span class="nv">MYSQLD_SERVICE</span><span class="si">}</span> <span class="s">&lt;&lt; &#39;EOF&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">[Unit]
</span></span></span><span class="line"><span class="cl"><span class="s">Description=MySQL Server
</span></span></span><span class="line"><span class="cl"><span class="s">Documentation=man:mysqld(8)
</span></span></span><span class="line"><span class="cl"><span class="s">Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.html
</span></span></span><span class="line"><span class="cl"><span class="s">After=network.target
</span></span></span><span class="line"><span class="cl"><span class="s">After=syslog.target
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">[Service]
</span></span></span><span class="line"><span class="cl"><span class="s">User=mysql
</span></span></span><span class="line"><span class="cl"><span class="s">Group=mysql
</span></span></span><span class="line"><span class="cl"><span class="s">Type=notify
</span></span></span><span class="line"><span class="cl"><span class="s">TimeoutSec=0
</span></span></span><span class="line"><span class="cl"><span class="s">OOMScoreAdjust=-1000
</span></span></span><span class="line"><span class="cl"><span class="s">ExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnf $MYSQLD_OPTS
</span></span></span><span class="line"><span class="cl"><span class="s"># EnvironmentFile=-/etc/sysconfig/mysql
</span></span></span><span class="line"><span class="cl"><span class="s">LimitNOFILE = 65536
</span></span></span><span class="line"><span class="cl"><span class="s">Restart=on-failure
</span></span></span><span class="line"><span class="cl"><span class="s">RestartPreventExitStatus=1
</span></span></span><span class="line"><span class="cl"><span class="s">Environment=MYSQLD_PARENT_PID=1
</span></span></span><span class="line"><span class="cl"><span class="s">PrivateTmp=false
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">[Install]
</span></span></span><span class="line"><span class="cl"><span class="s">WantedBy=multi-user.target
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> start_mysql_sys<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	systemctl daemon-reload
</span></span><span class="line"><span class="cl">	systemctl <span class="nb">enable</span> mysqld
</span></span><span class="line"><span class="cl">	systemctl start mysqld
</span></span><span class="line"><span class="cl">	<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;start mysql sys true&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span>
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;start mysql sys false&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span> 
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> set_root_pwd_and_remote<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	mysql -uroot -p<span class="s2">&#34;</span><span class="si">${</span><span class="nv">TEMP_MYSQL_PWD</span><span class="si">}</span><span class="s2">&#34;</span> --connect-expired-password -e <span class="s2">&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">	alter user &#39;root&#39;@&#39;localhost&#39; identified by &#39;</span><span class="si">${</span><span class="nv">MYSQL_ROOT_PWD</span><span class="si">}</span><span class="s2">&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s2">	use mysql; 
</span></span></span><span class="line"><span class="cl"><span class="s2">	update user set user.Host=&#39;%&#39; where user.User=&#39;root&#39;;
</span></span></span><span class="line"><span class="cl"><span class="s2">	flush privileges;
</span></span></span><span class="line"><span class="cl"><span class="s2">	&#34;</span> <span class="o">||</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    	log <span class="s2">&#34;set root pwd false&#34;</span>
</span></span><span class="line"><span class="cl">    	<span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¼€æ”¾3306ç«¯å£</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> open_3306_port<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="c1"># æ£€æŸ¥80 ç«¯å£æ˜¯å¦å¼€æ”¾</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">[</span> <span class="sb">`</span>firewall-cmd --query-port<span class="o">=</span>3306/tcp<span class="sb">`</span> <span class="o">==</span> <span class="s2">&#34;no&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span> 
</span></span><span class="line"><span class="cl">		<span class="c1"># å¼€å¯80ç«¯å£</span>
</span></span><span class="line"><span class="cl">		firewall-cmd --zone<span class="o">=</span>public --add-port<span class="o">=</span>3306/tcp --permanent
</span></span><span class="line"><span class="cl">		<span class="c1"># é‡å¯é˜²ç«å¢™</span>
</span></span><span class="line"><span class="cl">		firewall-cmd --reload
</span></span><span class="line"><span class="cl">		<span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="o">[</span> <span class="si">${</span><span class="nv">RETVAL</span><span class="si">}</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">			log <span class="s2">&#34;open 3306 port true&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="k">else</span>
</span></span><span class="line"><span class="cl">			log <span class="s2">&#34;open 3306 port false&#34;</span>
</span></span><span class="line"><span class="cl">		<span class="k">fi</span>
</span></span><span class="line"><span class="cl">	<span class="k">else</span> 
</span></span><span class="line"><span class="cl">		log <span class="s2">&#34;Port 3306 is now open&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="k">fi</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> link_mysql<span class="o">(){</span>
</span></span><span class="line"><span class="cl">	<span class="o">[</span> -f /usr/bin/mysql <span class="o">]</span> <span class="o">||</span> ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">function</span> main <span class="o">(){</span>
</span></span><span class="line"><span class="cl">	check_tools_direcotry
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is running-----------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl">	check_user_is_root
</span></span><span class="line"><span class="cl">	check_mysql_is_run
</span></span><span class="line"><span class="cl">	download_mysql
</span></span><span class="line"><span class="cl">	install_mysql
</span></span><span class="line"><span class="cl">	open_3306_port
</span></span><span class="line"><span class="cl">	log <span class="s2">&#34;</span><span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span><span class="s2"> is complete----------------------------------------------------------&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">main
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mysql8_confsh"><code>mysql8_conf.sh</code>
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="nv">MYSQL_VERSION</span><span class="o">=</span><span class="s2">&#34;8.0.35-linux-glibc2.17-aarch64&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_ROOT_PWD</span><span class="o">=</span><span class="s2">&#34;123456&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_PORT</span><span class="o">=</span><span class="m">3306</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_CHARSET</span><span class="o">=</span><span class="s2">&#34;utf8mb4&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_COLLATION</span><span class="o">=</span><span class="s2">&#34;utf8mb4_general_ci&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_DATA_DIR</span><span class="o">=</span><span class="s2">&#34;/usr/local/mysql&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQL_CONF</span><span class="o">=</span><span class="s2">&#34;/etc/my.cnf&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">MYSQLD_SERVICE</span><span class="o">=</span><span class="s2">&#34;/usr/lib/systemd/system/mysqld.service&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç”Ÿè¯-2">ç”Ÿè¯
</h2><ul>
<li>initialization / ÉªËŒnÉªÊƒÉ™lÉ™ËˆzeÉªÊƒn / nã€åˆå§‹åŒ–ï¼›èµ‹åˆå€¼ï¼›</li>
</ul>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/shell%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/">
        
        

        <div class="article-details">
            <h2 class="article-title">Shellæ–‡ä»¶åŒ…å«</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/shell%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91/">
        
        

        <div class="article-details">
            <h2 class="article-title">Shellè¾“å…¥è¾“å‡ºé‡å®šå‘</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/shell%E5%87%BD%E6%95%B0/">
        
        

        <div class="article-details">
            <h2 class="article-title">Shellå‡½æ•°</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/shell%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4/">
        
        

        <div class="article-details">
            <h2 class="article-title">Shellå®ç”¨æŒ‡ä»¤</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/shell%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
        
        

        <div class="article-details">
            <h2 class="article-title">Shellæ­£åˆ™è¡¨è¾¾å¼</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
