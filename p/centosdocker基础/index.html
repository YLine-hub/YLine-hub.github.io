<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="docker docker理念 一次镜像，处处运行。 docker是什么 Docker是基于Go语言实现的云开源项目。\nDocker的主要目标是“Build，Ship and Run Any App，Anywhere”，也就是通过对应组件的封装、分发、部署、运行的那个生命周期的管理，使用户的APP（可以是一个WEB应用或数据库应用等等）及其运行环境能呕做到“一次镜像，处处运行”。\n">
<title>[CentOS]docker基础</title>

<link rel='canonical' href='https://YLine-hub.github.io/p/centosdocker%E5%9F%BA%E7%A1%80/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="[CentOS]docker基础">
<meta property='og:description' content="docker docker理念 一次镜像，处处运行。 docker是什么 Docker是基于Go语言实现的云开源项目。\nDocker的主要目标是“Build，Ship and Run Any App，Anywhere”，也就是通过对应组件的封装、分发、部署、运行的那个生命周期的管理，使用户的APP（可以是一个WEB应用或数据库应用等等）及其运行环境能呕做到“一次镜像，处处运行”。\n">
<meta property='og:url' content='https://YLine-hub.github.io/p/centosdocker%E5%9F%BA%E7%A1%80/'>
<meta property='og:site_name' content='リンボの個人ブログ'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-10-19T22:51:05&#43;08:00'/><meta property='article:modified_time' content='2025-10-19T22:51:05&#43;08:00'/>
<meta name="twitter:title" content="[CentOS]docker基础">
<meta name="twitter:description" content="docker docker理念 一次镜像，处处运行。 docker是什么 Docker是基于Go语言实现的云开源项目。\nDocker的主要目标是“Build，Ship and Run Any App，Anywhere”，也就是通过对应组件的封装、分发、部署、运行的那个生命周期的管理，使用户的APP（可以是一个WEB应用或数据库应用等等）及其运行环境能呕做到“一次镜像，处处运行”。\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_7f398a7818085507.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🏖️</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">リンボの個人ブログ</a></h1>
            <h2 class="site-description">努力不一定能获得回报，但不努力一定不会有回报。</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>暗色模式</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#docker理念">docker理念</a></li>
    <li><a href="#docker是什么">docker是什么</a></li>
    <li><a href="#容器与虚拟机">容器与虚拟机</a>
      <ol>
        <li><a href="#虚拟机">虚拟机</a></li>
        <li><a href="#linux容器">Linux容器</a></li>
        <li><a href="#对比">对比</a></li>
      </ol>
    </li>
    <li><a href="#docker作用">docker作用</a></li>
    <li><a href="#docker三要素">docker三要素</a>
      <ol>
        <li><a href="#镜像与容器">镜像与容器</a></li>
      </ol>
    </li>
    <li><a href="#centos7上安装docker">CentOS7上安装docker</a>
      <ol>
        <li><a href="#检查centos内核版本">检查centos内核版本</a></li>
        <li><a href="#更新yum包">更新yum包</a></li>
        <li><a href="#卸载老版本docker">卸载老版本docker</a></li>
        <li><a href="#安装docker所需依赖">安装docker所需依赖</a></li>
        <li><a href="#设置docker镜像源为阿里源">设置docker镜像源为阿里源</a></li>
        <li><a href="#安装docker">安装docker</a>
          <ol>
            <li><a href="#问题一找不到docker-ce阿里云网址">问题一：找不到docker-ce阿里云网址</a></li>
          </ol>
        </li>
        <li><a href="#启动docker">启动docker</a></li>
        <li><a href="#安装成功">安装成功</a>
          <ol>
            <li><a href="#问题二无法连接">问题二：无法连接</a></li>
          </ol>
        </li>
        <li><a href="#问题">问题</a>
          <ol>
            <li><a href="#问题一找不到docker-ce阿里云网址-1">问题一：找不到docker-ce阿里云网址</a></li>
            <li><a href="#问题二无法连接-1">问题二：无法连接</a></li>
          </ol>
        </li>
        <li><a href="#安装docker-compose">安装docker-compose</a></li>
      </ol>
    </li>
    <li><a href="#centos9上安装docker">CentOS9上安装docker</a>
      <ol>
        <li><a href="#安装步骤">安装步骤</a>
          <ol>
            <li><a href="#删除老版本">删除老版本</a></li>
            <li><a href="#使用rpm仓库安装">使用rpm仓库安装</a></li>
            <li><a href="#第一个镜像">第一个镜像</a></li>
          </ol>
        </li>
        <li><a href="#卸载">卸载</a></li>
      </ol>
    </li>
    <li><a href="#阿里云镜像加速器配置">阿里云镜像加速器配置</a></li>
    <li><a href="#为什么docker会比虚拟机块">为什么docker会比虚拟机块</a></li>
    <li><a href="#docker常用命令">Docker常用命令</a>
      <ol>
        <li><a href="#帮助启动类">帮助启动类</a></li>
        <li><a href="#镜像命令">镜像命令</a>
          <ol>
            <li><a href="#查询本地镜像">查询本地镜像</a></li>
            <li><a href="#搜索仓库镜像">搜索仓库镜像</a></li>
            <li><a href="#拉取镜像">拉取镜像</a></li>
            <li><a href="#查看镜像容器数据卷所占空间">查看镜像/容器/数据卷所占空间</a></li>
            <li><a href="#删除镜像">删除镜像</a></li>
          </ol>
        </li>
        <li><a href="#面试题">面试题</a>
          <ol>
            <li><a href="#谈谈docker虚悬镜像是什么">谈谈docker虚悬镜像是什么？</a></li>
          </ol>
        </li>
        <li><a href="#容器命令">容器命令</a>
          <ol>
            <li><a href="#拉取镜像ubuntu">拉取镜像（ubuntu）</a></li>
            <li><a href="#新建并启动容器">新建并启动容器</a></li>
            <li><a href="#查看容器">查看容器</a></li>
            <li><a href="#退出容器">退出容器</a></li>
            <li><a href="#启动已经停止的容器">启动已经停止的容器</a></li>
            <li><a href="#重启容器">重启容器</a></li>
            <li><a href="#停止容器">停止容器</a></li>
            <li><a href="#强制停止容器">强制停止容器</a></li>
            <li><a href="#删除已停止的容器">删除已停止的容器</a></li>
            <li><a href="#一次性删除多个容器">一次性删除多个容器</a></li>
          </ol>
        </li>
        <li><a href="#容器命令重要">容器命令（重要）</a>
          <ol>
            <li><a href="#下载镜像redis">下载镜像(redis)</a></li>
            <li><a href="#启动守护式容器后台服务器">启动守护式容器（后台服务器）</a></li>
            <li><a href="#查看容器日志">查看容器日志</a></li>
            <li><a href="#查看容器内运行的进程">查看容器内运行的进程</a></li>
            <li><a href="#查看容器内部细节">查看容器内部细节</a></li>
            <li><a href="#进入正在运行的容器并以命令行交互">进入正在运行的容器并以命令行交互</a></li>
            <li><a href="#进入正在运行的redis容器进行交互">进入正在运行的redis容器进行交互</a></li>
            <li><a href="#从容器内拷贝拷贝文件到主机上">从容器内拷贝拷贝文件到主机上</a></li>
            <li><a href="#导入导出容器">导入导出容器</a></li>
            <li><a href="#生词-4">生词</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#docker镜像">Docker镜像</a>
      <ol>
        <li><a href="#镜像是什么">镜像是什么</a>
          <ol>
            <li><a href="#分层的镜像">分层的镜像</a></li>
            <li><a href="#unionfs联合文件系统">UnionFS（联合文件系统）</a></li>
            <li><a href="#docker镜像加载原理">Docker镜像加载原理</a></li>
          </ol>
        </li>
        <li><a href="#重点理解">重点理解</a></li>
        <li><a href="#docker镜像commit操作案例">Docker镜像commit操作案例</a></li>
        <li><a href="#小总结">小总结</a></li>
      </ol>
    </li>
    <li><a href="#本地镜像发布到阿里云">本地镜像发布到阿里云</a>
      <ol>
        <li><a href="#流程图">流程图</a></li>
        <li><a href="#镜像的生成方法">镜像的生成方法</a></li>
        <li><a href="#将本地镜像推送到阿里云">将本地镜像推送到阿里云</a>
          <ol>
            <li><a href="#本地镜像素材原型">本地镜像素材原型</a></li>
            <li><a href="#阿里云">阿里云</a></li>
            <li><a href="#创建仓库镜像">创建仓库镜像</a></li>
            <li><a href="#将镜像推送到阿里云">将镜像推送到阿里云</a></li>
          </ol>
        </li>
        <li><a href="#将阿里云上的镜像拉取到本地">将阿里云上的镜像拉取到本地</a></li>
      </ol>
    </li>
    <li><a href="#docker私有库">docker私有库</a>
      <ol>
        <li><a href="#是什么">是什么</a></li>
        <li><a href="#将本地镜像推送到私有库">将本地镜像推送到私有库</a>
          <ol>
            <li><a href="#下载镜像docker-registry">下载镜像Docker registry</a></li>
            <li><a href="#运行私有库registry相当于本地有个私有docker-hub">运行私有库registry，相当于本地有个私有Docker hub</a></li>
            <li><a href="#案例演示创建一个新镜像ubuntu安装ifconfig命令">案例演示创建一个新镜像，ubuntu安装ifconfig命令</a></li>
            <li><a href="#curl-验证私服库上有什么镜像">curl 验证私服库上有什么镜像</a></li>
            <li><a href="#生词-5">生词</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#docker容器数据卷">docker容器数据卷</a>
      <ol>
        <li><a href="#坑容器卷记得加入">坑：容器卷记得加入</a></li>
        <li><a href="#简介">简介</a></li>
        <li><a href="#作用">作用</a></li>
        <li><a href="#案例-1">案例</a>
          <ol>
            <li><a href="#宿主vs容器之间映射添加容器卷">宿主vs容器之间映射添加容器卷</a></li>
            <li><a href="#读写规则映射添加说明">读写规则映射添加说明</a></li>
            <li><a href="#卷的继承和共享">卷的继承和共享</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#docker-上安装常用软件">docker 上安装常用软件</a>
      <ol>
        <li><a href="#总体步骤">总体步骤</a></li>
        <li><a href="#安装tomcat">安装tomcat</a>
          <ol>
            <li><a href="#最新版">最新版</a></li>
            <li><a href="#免修改版">免修改版</a></li>
          </ol>
        </li>
        <li><a href="#安装mysql">安装mysql</a>
          <ol>
            <li><a href="#docker-hub上查找mysql镜像">docker hub上查找mysql镜像</a></li>
            <li><a href="#从docker-hub上阿里云加速器拉取mysql镜像到本地标签为57">从docker hub上（阿里云加速器）拉取mysql镜像到本地标签为5.7</a></li>
            <li><a href="#使用mysql57镜像创建容器运行容器">使用mysql5.7镜像创建容器（运行容器）</a></li>
          </ol>
        </li>
        <li><a href="#安装redis">安装redis</a>
          <ol>
            <li><a href="#验证宿主机redisconf是否生效">验证宿主机redis.conf是否生效</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/docker/" >
                Docker
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/centosdocker%E5%9F%BA%E7%A1%80/">[CentOS]docker基础</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-10-19</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="docker">docker
</h1><h2 id="docker理念">docker理念
</h2><ul>
<li>一次镜像，处处运行。</li>
</ul>
<h2 id="docker是什么">docker是什么
</h2><ul>
<li>
<p><font color=red>Docker是基于Go语言实现的云开源项目。</font></p>
</li>
<li>
<p>Docker的主要目标是“Build，Ship and Run Any App，Anywhere”，也就是通过对应组件的封装、分发、部署、运行的那个生命周期的管理，使用户的APP（可以是一个WEB应用或数据库应用等等）及其运行环境能呕做到<font color=red>“一次镜像，处处运行”</font>。</p>
</li>
<li>
<p><font color=blue>Linux容器技术的出现就解决了这样一个问题，而Docker就是在它的基础上发展过来的。</font>将应用打成镜像，通过镜像成为运行在Docker容器上面的实例，而Docker容器在任何操作系统上都是一致的，这就实现了跨平台、跨服务器。<font color=red>只需要一次配置好环境，换到别的机子上就可以一键部署好，大大简化了操作。</font></p>
</li>
</ul>
<p><font color=red>总结：解决了运行环境和配置问题的软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术。</font></p>
<h2 id="容器与虚拟机">容器与虚拟机
</h2><h3 id="虚拟机">虚拟机
</h3><p>虚拟机：带环境安装的一种解决方案。它可以在一种操作系统里运行另一种操作系统。</p>
<ul>
<li>缺点：
<ul>
<li>资源占用多</li>
<li>冗余步骤多</li>
<li>启动慢</li>
</ul>
</li>
</ul>
<h3 id="linux容器">Linux容器
</h3><p>Linux容器：与系统其它部分隔离开的一系列进程，从另一个镜像运行，并由该镜像提供支持进程所需的全部文件。</p>
<h3 id="对比">对比
</h3><p>Docker容器是在操作系统层面上实现虚拟化，直接复用本地主机的操作系统，而传统虚拟机则是在硬件层面实现虚拟化。与传统虚拟机相比，Docker优势体现为<font color=red>启动速度快，占用体积小</font>。</p>
<p>Docker与传统虚拟机：</p>
<ul>
<li>传统虚拟机技术是虚拟出一套硬件后，在其上运行一个完整操作系统，在该系统上再运行所需应用进程；</li>
<li>容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核且也没有进行硬件虚拟。因此容器要比传统虚拟机更为轻便。</li>
<li>每个容器之间相互隔离，每个容器有自己的文件系统，容器之间进程不会相互影响，能区分计算资源。</li>
</ul>
<h2 id="docker作用">docker作用
</h2><ul>
<li>一次构建、随处运行。
<ul>
<li>更快速的应用交付和部署</li>
<li>更便捷的升级和扩缩容。</li>
<li>更简单的系统运维。</li>
<li>更高效的计算资源利用。</li>
</ul>
</li>
</ul>
<h2 id="docker三要素">docker三要素
</h2><ul>
<li>镜像（image）：一个只读的模板。镜像可以用来创建Docker容器，一个镜像可以创建很多容器。</li>
<li>容器（container）：用镜像创建的运行实例。</li>
<li>仓库（repository）：集中存放镜像文件的场所。
<ul>
<li>公开仓库：最大的公开仓库<a class="link" href="https://hub.docker.com"  target="_blank" rel="noopener"
    >Docker Hub</a></li>
<li>私有仓库</li>
</ul>
</li>
</ul>
<h3 id="镜像与容器">镜像与容器
</h3><ul>
<li>从面向对象角度</li>
</ul>
<p>Docker利用容器独立运行的一个或一组应用，应用程序或服务运行在容器里，容器就类似于一个虚拟化的运行环境，容器是用镜像创建的运行实例。就像是Java中的类和实例对象一样，镜像是静态的定义，容器是镜像运行时的实体。容器为镜像提供了一个标准的和隔离的运行环境，它可以被启动、开始、停止、删除。每个容器都是相互隔离的、保证安全的平台。</p>
<ul>
<li>从镜像容器角度</li>
</ul>
<p>可以把容器看作是一个简易版的Linux环境（包括root用户权限、进程空间、用户空间和网络空间等）和运行在其中的应用程序。</p>
<h2 id="centos7上安装docker">CentOS7上安装docker
</h2><h3 id="检查centos内核版本">检查centos内核版本
</h3><ul>
<li>Docker要求CentOS系统的内核版本高于3.10，验证CentOS版本是否支持Docker。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">uname -r
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="更新yum包">更新yum包
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo yum update -y
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="卸载老版本docker">卸载老版本docker
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yum remove docker \
</span></span><span class="line"><span class="cl">                   docker-client \
</span></span><span class="line"><span class="cl">                   docker-client-latest \
</span></span><span class="line"><span class="cl">                   docker-common \
</span></span><span class="line"><span class="cl">                   docker-latest \
</span></span><span class="line"><span class="cl">                   docker-latest-logrotate \
</span></span><span class="line"><span class="cl">                   docker-logrotate \
</span></span><span class="line"><span class="cl">                   docker-selinux \
</span></span><span class="line"><span class="cl">                   docker-engine-selinux \
</span></span><span class="line"><span class="cl">                   docker-engine \
</span></span><span class="line"><span class="cl">                   docker-ce
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装docker所需依赖">安装docker所需依赖
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yum -y install yum-utils device-mapper-persistent-data lvm2
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="设置docker镜像源为阿里源">设置docker镜像源为阿里源
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装docker">安装docker
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yum -y install docker-ce
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="问题一找不到docker-ce阿里云网址">问题一：找不到docker-ce阿里云网址
</h4><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-86.png"
	width="1100"
	height="68"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-86_hu_8e188eadddf35f72.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-86_hu_20887c5d5a761eea.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1617"
		data-flex-basis="3882px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">failure: repodata/repomd.xml from mirrors.aliyun.com_docker-ce_linux_centos_docker-ce.repoyum-config-manager: [Errno 256] No more mirrors to try.
</span></span><span class="line"><span class="cl">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repoyum-config-manager/repodata/repomd.xml: [Errno 14] HTTP Error 404 - Not Found
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="启动docker">启动docker
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 设置开机启动
</span></span><span class="line"><span class="cl">systemctl enable docker
</span></span><span class="line"><span class="cl"># 启动
</span></span><span class="line"><span class="cl">systemctl start docker 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装成功">安装成功
</h3><ul>
<li>检验是否安装成功</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker version
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>第一个docker：hello-world</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="问题二无法连接">问题二：无法连接
</h4><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-87.png"
	width="920"
	height="73"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-87_hu_b8e2d629b3be42df.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-87_hu_80700db3801c7fea.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1260"
		data-flex-basis="3024px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker: Error response from daemon: Get &#34;https://registry-1.docker.io/v2/&#34;: dial tcp 96.44.137.28:443: i/o timeout.
</span></span></code></pre></td></tr></table>
</div>
</div><p>问题解决方法在下文</p>
<ul>
<li>hello-world运行成功</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-88.png"
	width="642"
	height="413"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-88_hu_563ca87b5ee957bb.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-88_hu_e1932da47435523a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="155"
		data-flex-basis="373px"
	
></p>
<h3 id="问题">问题
</h3><h4 id="问题一找不到docker-ce阿里云网址-1">问题一：找不到docker-ce阿里云网址
</h4><p><strong>解决方法：删除再重新配置</strong></p>
<ul>
<li>进入/etc/yum.repos.d目录下</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /etc/yum.repos.d
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-89.png"
	width="997"
	height="212"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-89_hu_4dea52fcb24b3666.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-89_hu_b171901c2d9afc6d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="470"
		data-flex-basis="1128px"
	
></p>
<ul>
<li>删除有关docker的镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">rm -rf docker-ce.repo mirrors.aliyun.com_docker-ce_linux_centos_docker-ce.repoyum-config-manager.repo
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>重新配置docker源，下载</li>
</ul>
<h4 id="问题二无法连接-1">问题二：无法连接
</h4><p><strong>解决方法：修改docker源</strong></p>
<ul>
<li>编辑配置文件（默认没有，需要自己创建）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/docker/daemon.json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;registry-mirrors&#34; : [
</span></span><span class="line"><span class="cl">    &#34;https://docker.registry.cyou&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker-cf.registry.cyou&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dockercf.jsdelivr.fyi&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.jsdelivr.fyi&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dockertest.jsdelivr.fyi&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://mirror.aliyuncs.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dockerproxy.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://mirror.baidubce.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.m.daocloud.io&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.nju.edu.cn&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.mirrors.sjtug.sjtu.edu.cn&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.mirrors.ustc.edu.cn&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://mirror.iscas.ac.cn&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.rainbond.cc&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://do.nark.eu.org&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dc.j8.work&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dockerproxy.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://gst6rzl9.mirror.aliyuncs.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://registry.docker-cn.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;http://hub-mirror.c.163.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;http://mirrors.ustc.edu.cn/&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://mirrors.tuna.tsinghua.edu.cn/&#34;,
</span></span><span class="line"><span class="cl">    &#34;http://mirrors.sohu.com/&#34; 
</span></span><span class="line"><span class="cl">],
</span></span><span class="line"><span class="cl"> &#34;insecure-registries&#34; : [
</span></span><span class="line"><span class="cl">    &#34;registry.docker-cn.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;docker.mirrors.ustc.edu.cn&#34;
</span></span><span class="line"><span class="cl">    ],
</span></span><span class="line"><span class="cl">&#34;debug&#34;: true,
</span></span><span class="line"><span class="cl">&#34;experimental&#34;: false
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>重启docker</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># 重载生效</span>
</span></span><span class="line"><span class="cl"><span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 重启docker</span>
</span></span><span class="line"><span class="cl"><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">docker</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看镜像是否安装成功</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker info
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装docker-compose">安装docker-compose
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">compose</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">v2</span><span class="o">.</span><span class="mf">20.2</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">-</span><span class="err">`</span><span class="n">uname</span> <span class="o">-</span><span class="n">s</span><span class="err">`</span><span class="o">-</span><span class="err">`</span><span class="n">uname</span> <span class="o">-</span><span class="n">m</span><span class="err">`</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">chmod</span> <span class="o">+</span><span class="n">x</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="centos9上安装docker">CentOS9上安装docker
</h2><h3 id="安装步骤">安装步骤
</h3><ul>
<li>
<p>官方文档：<a class="link" href="https://docs.docker.com/engine/install/centos"  target="_blank" rel="noopener"
    >Install Docker Engine on CentOS</a></p>
</li>
<li>
<p>环境要求：CentOS Stream 9 或者 CentOS Stream 10</p>
</li>
</ul>
<h4 id="删除老版本">删除老版本
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo dnf remove docker \
</span></span><span class="line"><span class="cl">                  docker-client \
</span></span><span class="line"><span class="cl">                  docker-client-latest \
</span></span><span class="line"><span class="cl">                  docker-common \
</span></span><span class="line"><span class="cl">                  docker-latest \
</span></span><span class="line"><span class="cl">                  docker-latest-logrotate \
</span></span><span class="line"><span class="cl">                  docker-logrotate \
</span></span><span class="line"><span class="cl">                  docker-engine
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image.png"
	width="694"
	height="642"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image_hu_6a5ee3d1aec8ce6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image_hu_ec8106ebad44e0e4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="108"
		data-flex-basis="259px"
	
></p>
<h4 id="使用rpm仓库安装">使用rpm仓库安装
</h4><ul>
<li><strong>生词：</strong>
repository / rɪˈpɑːzətɔːri / n、仓库</li>
</ul>
<h5 id="步骤">步骤
</h5><ul>
<li>安装仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo dnf -y install dnf-plugins-core
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-1.png"
	width="938"
	height="472"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-1_hu_85135f40fe6433ea.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-1_hu_43dafb1a54a17843.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="198"
		data-flex-basis="476px"
	
></p>
<ul>
<li>设置仓库源
<ul>
<li>国内源（推荐）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo dnf config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>官方源</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">dnf</span> <span class="n">config</span><span class="o">-</span><span class="n">manager</span> <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">repo</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">centos</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">.</span><span class="n">repo</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-2.png"
	width="1188"
	height="108"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-2_hu_66530f1a2cb3813f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-2_hu_2f953baf7084e2d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1100"
		data-flex-basis="2640px"
	
></p>
<ul>
<li>安装docker引擎</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 安装最新版本docker引擎
</span></span><span class="line"><span class="cl">sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-3.png"
	width="1194"
	height="708"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-3_hu_e4f0cb4576177591.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-3_hu_a8372f0c2b6e30d4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="168"
		data-flex-basis="404px"
	
></p>
<ul>
<li>配置国内镜像加速</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/docker/daemon.json
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;registry-mirrors&#34;: [
</span></span><span class="line"><span class="cl">    &#34;https://docker.m.daocloud.io&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://hub-mirror.c.163.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://mirrors.tuna.tsinghua.edu.cn/docker-ce/&#34;
</span></span><span class="line"><span class="cl">  ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>开始docker引擎</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo systemctl enable --now docker
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-4.png"
	width="1188"
	height="100"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-4_hu_c26bdeb442aaa498.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-4_hu_2be8504ff3f6d67c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1188"
		data-flex-basis="2851px"
	
></p>
<ul>
<li>验证</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo docker version
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-6.png"
	width="728"
	height="780"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-6_hu_b4d1fc5ac4030389.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-6_hu_defb23e86504ab7c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="93"
		data-flex-basis="224px"
	
></p>
<h4 id="第一个镜像">第一个镜像
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-5.png"
	width="1190"
	height="142"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-5_hu_7b821d161b6030fc.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-5_hu_b38fad7fbb3ca081.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="838"
		data-flex-basis="2011px"
	
></p>
<h5 id="报错">报错
</h5><blockquote>
<p>docker: Error response from daemon: Get &ldquo;<a class="link" href="https://registry-1.docker.io/v2/%22"  target="_blank" rel="noopener"
    >https://registry-1.docker.io/v2/"</a>: dial tcp: lookup registry-1.docker.io on 172.16.140.2:53: no such host</p>
</blockquote>
<p><strong>解决方法：配置DNS</strong></p>
<p><strong>设置静态ip及dns:</strong></p>
<ul>
<li>查看网络信息</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ifconfig
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-7.png"
	width="1140"
	height="938"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-7_hu_58d7c9238c50b251.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-7_hu_257dcf5e743f6088.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="121"
		data-flex-basis="291px"
	
></p>
<p>可以看到网卡为ens160</p>
<ul>
<li>查找网络文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 在/etc目录文件匹配关键字&#39;ens160&#39;查找
</span></span><span class="line"><span class="cl">grep -rnw &#39;/etc&#39; -e &#39;ens160&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-8.png"
	width="1188"
	height="106"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-8_hu_dfc6d23acd4e00ff.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-8_hu_427cfbd54fcc3455.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1120"
		data-flex-basis="2689px"
	
></p>
<ul>
<li>编辑网络配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/NetworkManager/system-connections/ens160.nmconnection
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>初始网络配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[connection]
</span></span><span class="line"><span class="cl">id=ens160
</span></span><span class="line"><span class="cl">uuid=cda03551-52cb-3117-ac32-60f962d7c856
</span></span><span class="line"><span class="cl">type=ethernet
</span></span><span class="line"><span class="cl">autoconnect-priority=-999
</span></span><span class="line"><span class="cl">interface-name=ens160
</span></span><span class="line"><span class="cl">timestamp=1760902922
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[ethernet]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[ipv4]
</span></span><span class="line"><span class="cl">method=auto
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[ipv6]
</span></span><span class="line"><span class="cl">addr-gen-mode=eui64
</span></span><span class="line"><span class="cl">method=auto
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[proxy]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>添加如下内容</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[ipv4]
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">address1=ip/24,gateway
</span></span><span class="line"><span class="cl">dns=dnsip1;dnsip2;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-8.png"
	width="1188"
	height="106"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-8_hu_dfc6d23acd4e00ff.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-8_hu_427cfbd54fcc3455.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1120"
		data-flex-basis="2689px"
	
></p>
<ul>
<li>重新加载配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">nmcli</span> <span class="n">c</span> <span class="n">reload</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>启动ens160网卡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nmcli c up ens160
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="再次运行hello-world">再次运行hello-world
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run hello-world
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-10.png"
	width="1184"
	height="930"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-10_hu_4a9c34547b7d1f1f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-10_hu_e3d651557b9ecb7f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="127"
		data-flex-basis="305px"
	
></p>
<h3 id="卸载">卸载
</h3><h2 id="阿里云镜像加速器配置">阿里云镜像加速器配置
</h2><ul>
<li>登陆阿里云，并点击控制台</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-11.png"
	width="2880"
	height="1580"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-11_hu_1ef01145c22b5605.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-11_hu_e05f030e95980a02.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<ul>
<li>在控制台中点击左上角的三横杠</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-12.png"
	width="946"
	height="648"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-12_hu_edae68889a53be35.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-12_hu_359b1fdc8c0cc811.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="145"
		data-flex-basis="350px"
	
></p>
<ul>
<li>在产品与服务中找到容器镜像服务</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-13.png"
	width="606"
	height="734"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-13_hu_601b558cd009c996.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-13_hu_a98bb1f102ec095.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="82"
		data-flex-basis="198px"
	
></p>
<ul>
<li>选择镜像工具下的镜像加速器</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-14.png"
	width="430"
	height="452"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-14_hu_5be1576a4b0440f7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-14_hu_805908736c5f7b44.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="228px"
	
></p>
<ul>
<li>通过操作文档配置镜像加速</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-15.png"
	width="1064"
	height="1188"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-15_hu_244fac55759727a4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-15_hu_1e6a33159fcb8a1c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="89"
		data-flex-basis="214px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">docker</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">docker</span><span class="o">/</span><span class="n">daemon</span><span class="o">.</span><span class="n">json</span> <span class="o">&lt;&lt;-</span><span class="s1">&#39;EOF&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;registry-mirrors&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;https://********.mirror.aliyuncs.com&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">EOF</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">restart</span> <span class="n">docker</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="为什么docker会比虚拟机块">为什么docker会比虚拟机块
</h2><ul>
<li>docker有着比虚拟机更少的抽象层</li>
</ul>
<p>由于docker不需要Hypervisor（虚拟机）实现硬件资源虚拟化，运行在docker容器上的程序直接使用的都是实际物理机的硬件资源。因此在CPU、内存利用率上docker将会在效率上有明显优势。</p>
<ul>
<li>docker利用的是宿主机的内核，而不需要加载操作系统OS内核</li>
</ul>
<p>当新建一个容器时，docker不需要和虚拟机一样重新加载一个操作系统内核。进而避免引寻、加载操作系统内核返回等比较费事费资源的过程，当新建一个虚拟机时，虚拟机软件需要加载OS，返回新建过程时分钟级别的。而docer由于直接利用宿主机的操作系统，则省略了返回过程，因此新建一个docker容器只需要几秒钟。</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th></th>
          <th>Docker容器</th>
          <th>虚拟机（VM）</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>操作系统</td>
          <td>与宿主机共享OS</td>
          <td>宿主机OS上运行虚拟机OS</td>
      </tr>
      <tr>
          <td>存储大小</td>
          <td>镜像小，便于存储和传输</td>
          <td>镜像庞大（vmdk、vdi等）</td>
      </tr>
      <tr>
          <td>运行性能</td>
          <td>几乎无额外性能损失</td>
          <td>操作系统额外的CPU、内存消耗</td>
      </tr>
      <tr>
          <td>移植性</td>
          <td>轻便、灵活，适应于Linux</td>
          <td>笨重，与虚拟化技术耦合度高</td>
      </tr>
      <tr>
          <td>硬件亲和性</td>
          <td>面向软件开发者</td>
          <td>面向硬件运维者</td>
      </tr>
      <tr>
          <td>部署速度</td>
          <td>速度快，秒级</td>
          <td>较慢，10s以上</td>
      </tr>
  </tbody>
</table></div>
<h2 id="docker常用命令">Docker常用命令
</h2><h3 id="帮助启动类">帮助启动类
</h3><ul>
<li>启动类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">systemctl start   docker # 启动docker
</span></span><span class="line"><span class="cl">systemctl stop    docker # 停止docker
</span></span><span class="line"><span class="cl">systemctl restart docker # 重启docker
</span></span><span class="line"><span class="cl">systemctl status  docker # 查看docker状态
</span></span><span class="line"><span class="cl">systemctl enable  docker # 开机启动
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>帮助类</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker info          # 查看docker概要信息
</span></span><span class="line"><span class="cl">docker --help        # 查看docker总体帮助文档
</span></span><span class="line"><span class="cl">docker 具体命令 help  # 查看docker命令帮助文档
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="镜像命令">镜像命令
</h3><h4 id="查询本地镜像">查询本地镜像
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-16.png"
	width="724"
	height="190"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-16_hu_738a91e470567456.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-16_hu_7dadc756996ed754.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="381"
		data-flex-basis="914px"
	
></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>列名</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>REPOSITORY</td>
          <td>表示镜像的仓库源</td>
      </tr>
      <tr>
          <td>TAG</td>
          <td>镜像的标签版本号</td>
      </tr>
      <tr>
          <td>IMAGE ID</td>
          <td>镜像ID</td>
      </tr>
      <tr>
          <td>CREATED</td>
          <td>镜像创建时间</td>
      </tr>
      <tr>
          <td>VIRTUAL SIZE</td>
          <td>镜像大小</td>
      </tr>
  </tbody>
</table></div>
<p>同一个仓库源有多个TAG版本，代表这个仓库源的不同个版本，我们使用REPOSITORY:TAG来定义不同的镜像。如果你不指定一个镜像的版本标签，例如你只使用ubuntu，docker将默认使用ubuntu:latest镜像</p>
<ul>
<li>options</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>参数</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>-a</td>
          <td>列出本地所有的镜像（含历史映像层）</td>
      </tr>
      <tr>
          <td>-q</td>
          <td>只显示镜像ID</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>列出所有镜像ID</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images -qa
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-21.png"
	width="890"
	height="380"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-21_hu_9e668a10ce6d6611.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-21_hu_84d5243cb2b01153.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="234"
		data-flex-basis="562px"
	
></p>
<h4 id="搜索仓库镜像">搜索仓库镜像
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker search INAEM（镜像名称）
</span></span></code></pre></td></tr></table>
</div>
</div><div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>参数</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>NAME</td>
          <td>镜像名称</td>
      </tr>
      <tr>
          <td>DESCRIPTION</td>
          <td>镜像描述</td>
      </tr>
      <tr>
          <td>STARS</td>
          <td>点赞数量</td>
      </tr>
      <tr>
          <td>OFFICIAL</td>
          <td>是否是官方的</td>
      </tr>
      <tr>
          <td>AUTOMATED</td>
          <td>是否是自动构建的</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>
<p>options:</p>
<ul>
<li><code>--limit N</code>:只列出N个镜像，默认25个</li>
</ul>
</li>
<li>
<p>查询前5个名称中有redis的镜像</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker search --limit 5 redis
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="拉取镜像">拉取镜像
</h4><ul>
<li>下载最新版</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull &lt;image-name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>下载指定版本</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull &lt;image-name&gt;[:TAG]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>下载redis:6.0.8</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-17.png"
	width="1142"
	height="374"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-17_hu_b65d75c07b526a22.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-17_hu_249a6d8df6c7fb4e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="305"
		data-flex-basis="732px"
	
></p>
<h5 id="生词">生词
</h5><ul>
<li>suppress / səˈpres / v、（武力）镇压；阻止（进程）；隐瞒（消息）</li>
<li>verbose / vɜːrˈboʊs / adj、冗长的；啰嗦的</li>
</ul>
<h4 id="查看镜像容器数据卷所占空间">查看镜像/容器/数据卷所占空间
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker system df
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-18.png"
	width="872"
	height="210"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-18_hu_1d20ae5754e96ed3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-18_hu_11c65baefb8cbde9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="415"
		data-flex-basis="996px"
	
></p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>列名</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>TYPE</td>
          <td>类型</td>
      </tr>
      <tr>
          <td>TOTAL</td>
          <td>总数</td>
      </tr>
      <tr>
          <td>ACTIVE</td>
          <td>正在使用数</td>
      </tr>
      <tr>
          <td>SIZE</td>
          <td>大小</td>
      </tr>
      <tr>
          <td>RECLAIMABLE</td>
          <td>可回收的磁盘空间大小</td>
      </tr>
  </tbody>
</table></div>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>TYPE</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Images</td>
          <td>镜像</td>
      </tr>
      <tr>
          <td>Containers</td>
          <td>容器</td>
      </tr>
      <tr>
          <td>Local Volumes</td>
          <td>本地卷（用于持久化数据）</td>
      </tr>
      <tr>
          <td>Build Cache</td>
          <td>建缓存（用于加速 Docker 构建过程）</td>
      </tr>
  </tbody>
</table></div>
<h5 id="生词-1">生词
</h5><ul>
<li>reclaimable / rɪˈkleɪməbəl / adj、可回收的</li>
<li>volumes / ˈvɑːljəmz / n、体积，容量；卷</li>
</ul>
<h4 id="删除镜像">删除镜像
</h4><ul>
<li>删除镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi INAME_or_IMAGEID
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>options</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-19.png"
	width="1380"
	height="336"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-19_hu_8972a3d4321f629f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-19_hu_cc3c8eda3d2cb975.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="410"
		data-flex-basis="985px"
	
></p>
<ul>
<li>删除单个镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi -f INAME_or_IMAGEID
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>删除多个镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi -f INAME1:TAG_or_IMAGEID INAME2:TAG_or_IMAGEID
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-20.png"
	width="1318"
	height="478"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-20_hu_8c5ba86a6c2c8af4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-20_hu_afa48cb9a759476.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="275"
		data-flex-basis="661px"
	
></p>
<ul>
<li>删除全部镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi -f $(docker images -qa)
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-22.png"
	width="1330"
	height="748"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-22_hu_cd929ebc418822d5.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-22_hu_9cedd43f9810231d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="177"
		data-flex-basis="426px"
	
></p>
<h3 id="面试题">面试题
</h3><h4 id="谈谈docker虚悬镜像是什么">谈谈docker虚悬镜像是什么？
</h4><ul>
<li>是什么？</li>
</ul>
<p>仓库名、标签名都是<code>&lt;none&gt;</code>的镜像，俗称虚悬镜像dangling image</p>
<h3 id="容器命令">容器命令
</h3><h4 id="拉取镜像ubuntu">拉取镜像（ubuntu）
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-23.png"
	width="1140"
	height="534"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-23_hu_c75309245a71fa8b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-23_hu_a739f5bed102998.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="213"
		data-flex-basis="512px"
	
></p>
<h4 id="新建并启动容器">新建并启动容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run [option] IMAGE [COMMAND] [ARG...]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>options</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>参数</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>&ndash;name=&ldquo;NAME&rdquo;</td>
          <td>为容器指定一个名称</td>
      </tr>
      <tr>
          <td>-d</td>
          <td>后台运行容器并返回容器ID，也即启动守护式容器（后台运行）</td>
      </tr>
      <tr>
          <td>-i</td>
          <td>以交互模式运行容器，通常与-t同时使用</td>
      </tr>
      <tr>
          <td>-t</td>
          <td>为容器分配一个伪输入终端，与-i同时使用，也即启动交互式容器（前台有伪终端，等待交互）</td>
      </tr>
      <tr>
          <td>-P</td>
          <td>随机端口映射，大写P</td>
      </tr>
      <tr>
          <td>-p</td>
          <td>指定端口映射，小写p</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>docker启动ubuntu</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 启动ubuntu
</span></span><span class="line"><span class="cl">docker run ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-24.png"
	width="1518"
	height="200"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-24_hu_125df5c0f48a189e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-24_hu_b8072fa26f2105c6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="759"
		data-flex-basis="1821px"
	
></p>
<p><strong>启动后自动退出</strong>
原因：需要用伪终端交互打开</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 使用伪终端交互使用ubuntu，并设置shell交互命令的接口(bin或者/bin/bash)
</span></span><span class="line"><span class="cl"># 在容器内使用bash命令
</span></span><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span><span class="line"><span class="cl">docker run -it ubuntu bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-25.png"
	width="746"
	height="82"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-25_hu_5a92b43523cc39c5.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-25_hu_9038f2e350b7a2b6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="909"
		data-flex-basis="2183px"
	
></p>
<ul>
<li>查看docker正在运行的镜像</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-26.png"
	width="1366"
	height="604"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-26_hu_e472db946dd14d8d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-26_hu_1409abc2d4a38a71.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="226"
		data-flex-basis="542px"
	
></p>
<ul>
<li>运行ubuntu并命名myu1</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --name=myu1 ubuntu bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-27.png"
	width="1210"
	height="364"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-27_hu_bc4d5f729f7cc23c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-27_hu_a14505a50d213579.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="332"
		data-flex-basis="797px"
	
></p>
<h5 id="生词-2">生词
</h5><ul>
<li>
<p><code>-i</code> : interactive / ˌɪntərˈæktɪv / adj、交互式的</p>
</li>
<li>
<p><code>-t</code> : tty 终端</p>
</li>
<li>
<p>allocate / ˈæləkeɪt / v、分配</p>
</li>
</ul>
<h4 id="查看容器">查看容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps [options]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>options</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>参数</th>
          <th>说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>-a</td>
          <td>show all containers</td>
      </tr>
      <tr>
          <td>-l</td>
          <td>show the latest created container</td>
      </tr>
      <tr>
          <td>-n</td>
          <td>show n last created containers</td>
      </tr>
      <tr>
          <td>-q</td>
          <td>only display container IDs</td>
      </tr>
  </tbody>
</table></div>
<ul>
<li>展示最后创建的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -l
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-28.png"
	width="1224"
	height="168"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-28_hu_e6503ccc28184c42.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-28_hu_2121e6cb7cb185db.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="728"
		data-flex-basis="1748px"
	
></p>
<ul>
<li>展示正在运行的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-29.png"
	width="1194"
	height="102"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-29_hu_891a73d6da41c6f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-29_hu_994465a505ae85fb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1170"
		data-flex-basis="2809px"
	
></p>
<ul>
<li>展示最后4个创建的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -n 4
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-30.png"
	width="1550"
	height="212"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-30_hu_67b884fd594280ac.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-30_hu_71819d34c956ebfb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="731"
		data-flex-basis="1754px"
	
></p>
<ul>
<li>只展示容器的ID</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -q
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-31.png"
	width="502"
	height="68"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-31_hu_d9d46e212b416938.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-31_hu_22bebfc4920a131e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="738"
		data-flex-basis="1771px"
	
></p>
<h5 id="生词-3">生词
</h5><ul>
<li><code>-q</code> quiet / ˈkwaɪət / n/v、（使）安静 ； adj、安静的；沉默寡言的</li>
</ul>
<h4 id="退出容器">退出容器
</h4><ul>
<li>创建两个容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-32.png"
	width="1314"
	height="138"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-32_hu_1568f4068e745ca0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-32_hu_8f74a7238814fd26.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="952"
		data-flex-basis="2285px"
	
></p>
<ul>
<li>
<p>方式一：exit</p>
<ul>
<li>run进去容器，exit退出，容器停止</li>
</ul>
</li>
<li>
<p>退出容器 <code>0a48ed6d8300</code></p>
</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-33.png"
	width="500"
	height="222"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-33_hu_c06e4133c334989e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-33_hu_5a29c6a68fec1aa6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="225"
		data-flex-basis="540px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-34.png"
	width="1326"
	height="320"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-34_hu_82be01aeae1bed7c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-34_hu_9b3b9c82a9f683a6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="414"
		data-flex-basis="994px"
	
></p>
<p>发现运行中的容器<code>0a48ed6d8300</code>已经没了</p>
<ul>
<li>方式二：ctrl+p+q
<ul>
<li>run进去容器，ctrl+p+q退出，容器不停止</li>
</ul>
</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-35.png"
	width="1560"
	height="266"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-35_hu_7a6b6eb87a44c8b8.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-35_hu_987b1d5d285de3dd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="586"
		data-flex-basis="1407px"
	
></p>
<p>使用ctrl+p+q，退出了容器，但是容器还在运行</p>
<h4 id="启动已经停止的容器">启动已经停止的容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker start CONTAINER_ID_OR_NAME
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看最后两个容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -n 2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-36.png"
	width="1506"
	height="204"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-36_hu_a845bf3fc501e5a1.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-36_hu_a13c42cf022e69e4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="738"
		data-flex-basis="1771px"
	
></p>
<p>可以看到其中ID为<code>0a48ed6d8300</code>的状态已经停止了</p>
<ul>
<li>重启<code>0a48ed6d8300</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker start 0a48ed6d8300
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-37.png"
	width="1560"
	height="270"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-37_hu_75b0b79e49ab9a2f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-37_hu_d06d7c753c2b329e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="577"
		data-flex-basis="1386px"
	
></p>
<p>可以看到重启的容器状态已经是开启了</p>
<h4 id="重启容器">重启容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker restart CONTAINER_ID_OR_NAME
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="停止容器">停止容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker stop CONTAINER_ID_OR_NAME
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="强制停止容器">强制停止容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker kill CONTAINER_ID_OR_NAME
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="删除已停止的容器">删除已停止的容器
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm CONTAINER_ID
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>删除正在运行的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm 0a48ed6d8300
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-38.png"
	width="1546"
	height="286"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-38_hu_f1f67e4136ad9699.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-38_hu_3c4b261305a045fe.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="540"
		data-flex-basis="1297px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Error response from daemon: cannot remove container &#34;0a48ed6d8300&#34;: container is running: stop the container before removing or force remove
</span></span><span class="line"><span class="cl">来自daemon的错误响应：不能移除容器&#34;0a48ed6d8300&#34;，容器正在运行：移除之前停止这个容器或者强制移除
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>停止容器并删除</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 停止容器0a48ed6d8300
</span></span><span class="line"><span class="cl">docker stop 0a48ed6d8300
</span></span><span class="line"><span class="cl"># 删除容器0a48ed6d8300
</span></span><span class="line"><span class="cl">docker rm 0a48ed6d8300
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-39.png"
	width="1294"
	height="282"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-39_hu_487ac040ad834e83.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-39_hu_bb8abd7a49d9f9d4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="458"
		data-flex-basis="1101px"
	
></p>
<p>成功删除容器</p>
<ul>
<li>再次启动容器<code>0a48ed6d8300</code></li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-40.png"
	width="846"
	height="104"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-40_hu_78f093e851b0a3aa.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-40_hu_a692db747bd9316a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="813"
		data-flex-basis="1952px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Error response from daemon: No such container: 0a48ed6d8300
</span></span><span class="line"><span class="cl">Error: failed to start containers: 0a48ed6d8300
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">来自daemon的错误响应：没有这样的容器：0a48ed6d8300
</span></span><span class="line"><span class="cl">错误：启动失败容器：0a48ed6d8300
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>强制删除容器<code>3c64d193e546</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm -f 3c64d193e546
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-41.png"
	width="1316"
	height="288"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-41_hu_aec8d626b1443a50.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-41_hu_724e8839ed21dcd3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="456"
		data-flex-basis="1096px"
	
></p>
<h4 id="一次性删除多个容器">一次性删除多个容器
</h4><ul>
<li>方式一</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm -f $(docker ps -a -q)
</span></span></code></pre></td></tr></table>
</div>
</div><p>分析：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 查询所有容器，并只展示ID
</span></span><span class="line"><span class="cl">docker ps -a -q
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 将查询出来的容器IDs作为参数传给 docker rm -f 
</span></span><span class="line"><span class="cl">docker rm -f $(docker ps -a -q)
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>方式二</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docer ps -a -q | xargs docker rm
</span></span></code></pre></td></tr></table>
</div>
</div><p>分析：</p>
<p>docker ps -a -q 查询出来的数据传给xargs，然后作为参数执行docker rm</p>
<h3 id="容器命令重要">容器命令（重要）
</h3><h4 id="下载镜像redis">下载镜像(redis)
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull redis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-42.png"
	width="1140"
	height="252"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-42_hu_3811e497ac99eb65.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-42_hu_c0c7c9a8a4def333.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="452"
		data-flex-basis="1085px"
	
></p>
<h4 id="启动守护式容器后台服务器">启动守护式容器（后台服务器）
</h4><blockquote>
<p>在大部分的场景下，我们希望docker服务式在后台运行的，我们可以过-d指定容器的后台运行模式</p>
</blockquote>
<ul>
<li>启动守护式容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d &lt;container_name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ubuntu前后台启动演示:</strong></p>
<ul>
<li>使用镜像ubuntu以后台模式启动一个容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-43.png"
	width="1010"
	height="192"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-43_hu_995801d301c3c620.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-43_hu_a998171b5a0dc647.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="526"
		data-flex-basis="1262px"
	
></p>
<p>发现docker中没有运行中的容器</p>
<ul>
<li>查看docker容器运行（含历史映像）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-44.png"
	width="1592"
	height="344"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-44_hu_ad5db098519bee5.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-44_hu_38b1cb8060995d0e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="462"
		data-flex-basis="1110px"
	
></p>
<p>发现容器<code>8d9e73743b1b</code>已经退出了</p>
<p><strong>原因</strong>：<font color=red>Docker容器后台运行，就必须有一个前台进程。</font>容器运行的命令如果不是那些<font color=red>一直挂起的命令</font>（比如运行top，tail），就是会自动退出的。</p>
<p>这个是docker的机制问题，比如你的web容器，我们以nginx为例，正常情况下，我们配置服启动服务只需要启动响应式的service即可。例如service nginx start。但是，这样做，nginx为后台进程模式运行，就导致docker前台没有运行的应用，这样的容器后台启动后，就会立即自杀，因为他觉得他没事可做了。
所以，<strong>最佳的解决方案是</strong>，<font color=red>将你要运行的程序以前台进程的形式运行，常见就是命令行模式，表示我还有交互操作，别中断。</font></p>
<ul>
<li>前台运行ubuntu</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-45.png"
	width="602"
	height="74"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-45_hu_90065d93964464ff.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-45_hu_681d574823cf97d0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="813"
		data-flex-basis="1952px"
	
></p>
<p><strong>redis前后台启动演示：</strong></p>
<ol>
<li>前台交互式启动</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it redis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-46.png"
	width="1644"
	height="916"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-46_hu_e007d60623dbf4db.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-46_hu_5cae51640bacdc12.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="179"
		data-flex-basis="430px"
	
></p>
<p>如果不小心关掉，或者ctrl+c退出进程，redis就直接停止服务</p>
<ol start="2">
<li>后台守护式启动</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d redis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-47.png"
	width="1554"
	height="322"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-47_hu_a20b6bceff14a47a.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-47_hu_9d6a42f393851ac4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="482"
		data-flex-basis="1158px"
	
></p>
<h4 id="查看容器日志">查看容器日志
</h4><ul>
<li>语法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker logs &lt;container_id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-48.png"
	width="1532"
	height="98"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-48_hu_4d00eaf5f14f487c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-48_hu_e14613ca4a893d53.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1563"
		data-flex-basis="3751px"
	
></p>
<ul>
<li>查看redis容器日志</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker logs a55b19d4ab06
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-49.png"
	width="1644"
	height="916"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-49_hu_c524ad41eb139494.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-49_hu_f51a32903110e850.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="179"
		data-flex-basis="430px"
	
></p>
<h4 id="查看容器内运行的进程">查看容器内运行的进程
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker top &lt;container_id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看redis容器内部运行的进程</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker top 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-50.png"
	width="2264"
	height="154"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-50_hu_a7700982b1d2511.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-50_hu_286c1bf58adc6cd1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1470"
		data-flex-basis="3528px"
	
></p>
<h4 id="查看容器内部细节">查看容器内部细节
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker inspect &lt;container_id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看redis容器内部细节</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker inspect 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-51.png"
	width="1872"
	height="916"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-51_hu_5c4cba0f96442d69.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-51_hu_203698cdc880eaeb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="204"
		data-flex-basis="490px"
	
></p>
<h4 id="进入正在运行的容器并以命令行交互">进入正在运行的容器并以命令行交互
</h4><p><strong>方法一：docker exec</strong></p>
<ul>
<li>语法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec [options] &lt;container_id&gt; &lt;command&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>创建一个ubuntu</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-52.png"
	width="734"
	height="68"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-52_hu_395aa113635b7d57.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-52_hu_b71663c8818aafd4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1079"
		data-flex-basis="2590px"
	
></p>
<p>id为<code>1fac0e86217b</code></p>
<ul>
<li>使用ctrl+p+q退出容器</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-53.png"
	width="588"
	height="122"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-53_hu_980c9255c04fccb.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-53_hu_775800f4f1243e35.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="481"
		data-flex-basis="1156px"
	
></p>
<ul>
<li>查看正在运行的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-54.png"
	width="1546"
	height="194"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-54_hu_12aea7d75df7cdab.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-54_hu_dff113877535cc1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="796"
		data-flex-basis="1912px"
	
></p>
<ul>
<li>重新进入ubuntu容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it 1fac0e86217b /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-55.png"
	width="830"
	height="68"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-55_hu_62bb10fd1b6b07b8.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-55_hu_d9b1c0eaced6a17f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1220"
		data-flex-basis="2929px"
	
></p>
<p><strong>方法二：docker attach</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker attach &lt;container_id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>进入ubuntu容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker attach 1fac0e86217b
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>docker exec和docker attach的区别</strong></p>
<blockquote>
<p>attach直接进入容器启动命令的终端，不会启动新的进程用exit退出，会导致容器的停止。
exec是在容器中打开新的终端，并且可以启动新的进程，用exit退出，不会导致容器的停止。</p>
</blockquote>
<ul>
<li>docker exec</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-56.png"
	width="1690"
	height="644"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-56_hu_196cc7f3d36a988f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-56_hu_6e377a201c6eac7a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="262"
		data-flex-basis="629px"
	
></p>
<ul>
<li>docekr attach</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-58.png"
	width="1642"
	height="410"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-58_hu_955d9bb752678a9e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-58_hu_f3118ed8bb55fa9c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="400"
		data-flex-basis="961px"
	
></p>
<p>可以看到使用exit退出后就没了</p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-59.png"
	width="1812"
	height="130"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-59_hu_1340f2bdb9663e24.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-59_hu_ab6863974bd22a1d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1393"
		data-flex-basis="3345px"
	
></p>
<p>可以看到容器处于停止状态</p>
<ul>
<li>推荐使用exec</li>
</ul>
<h4 id="进入正在运行的redis容器进行交互">进入正在运行的redis容器进行交互
</h4><ul>
<li>查看容器id</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-60.png"
	width="1468"
	height="152"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-60_hu_dc1344111a2ad29c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-60_hu_f99fdc613d0bd0d8.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="965"
		data-flex-basis="2317px"
	
></p>
<ul>
<li>进入redis容器，使用/bin/bash</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it a55b19d4ab06 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-61.png"
	width="850"
	height="80"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-61_hu_e45b9f5019b52c2d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-61_hu_9ae60f09bbad61f2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1062"
		data-flex-basis="2550px"
	
></p>
<ul>
<li>使用redis客户端进入redis</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">redis-cli -p 6379
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-62.png"
	width="602"
	height="64"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-62_hu_f94661b9e982f6a9.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-62_hu_321cb6574fc0bfa1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="940"
		data-flex-basis="2257px"
	
></p>
<ul>
<li>测试redis功能</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-63.png"
	width="370"
	height="266"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-63_hu_56a0f6f81723bba4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-63_hu_7fa04e4a978a4b0d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="139"
		data-flex-basis="333px"
	
></p>
<ul>
<li>退出容器</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-64.png"
	width="424"
	height="150"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-64_hu_ccf2fca5ee21f5e7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-64_hu_ad1632e4999ed80d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="282"
		data-flex-basis="678px"
	
></p>
<ul>
<li>使用redis客户端打开redis容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it a55b19d4ab06 redis-cli
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-65.png"
	width="828"
	height="70"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-65_hu_8d9b7f978c304186.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-65_hu_bc6ee93416e63ac7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1182"
		data-flex-basis="2838px"
	
></p>
<h4 id="从容器内拷贝拷贝文件到主机上">从容器内拷贝拷贝文件到主机上
</h4><ul>
<li>语法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker cp &lt;container_id&gt;:path destination_path
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>新建ubuntu</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在容器内创建a.txt文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 进入临时目录
</span></span><span class="line"><span class="cl">cd /tmp
</span></span><span class="line"><span class="cl"># 创建a.txt文件
</span></span><span class="line"><span class="cl">touch a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-66.png"
	width="516"
	height="132"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-66_hu_88a93b4c7027f9a2.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-66_hu_aa58b65e6bfa9eb3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="390"
		data-flex-basis="938px"
	
></p>
<ul>
<li>复制文件a.txt到本地/opt目录下</li>
</ul>
<p>path:/tmp/a.txt</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker cp 006e879ee419:/tmp/a.txt /opt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-67.png"
	width="834"
	height="68"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-67_hu_c87993f7c15c4252.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-67_hu_713b335db0284c63.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1226"
		data-flex-basis="2943px"
	
></p>
<ul>
<li>查看拷贝的文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ls /opt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-68.png"
	width="394"
	height="110"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-68_hu_ab07bb23dd7e019b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-68_hu_ae0e483ef08f8a1c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="358"
		data-flex-basis="859px"
	
></p>
<h4 id="导入导出容器">导入导出容器
</h4><h5 id="export-导入容器的内容流作为一个tar归档文件对应import命令">export 导入容器的内容流作为一个tar归档文件[对应import命令]
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">docker</span> <span class="k">export</span> <span class="p">[</span><span class="n">container_id</span><span class="p">]</span> <span class="o">&gt;</span> <span class="p">[</span><span class="n">file_name</span><span class="p">]</span><span class="o">.</span><span class="n">tar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="import-从tar包中的内容创建一个新的文件系统再导入为镜像对应expor">import 从tar包中的内容创建一个新的文件系统再导入为镜像[对应expor]
</h5><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat &lt;file_name&gt;.tar | docker import - &lt;image_user&gt;/&lt;image_name&gt;:&lt;image_version&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="案例">案例
</h5><ul>
<li>查询容器id</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>导出ubuntu容器(默认导出到当前目录)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">docker</span> <span class="k">export</span> <span class="mf">006e879</span><span class="n">ee419</span> <span class="o">&gt;</span> <span class="n">ubuntu_backup</span><span class="o">.</span><span class="n">tar</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-69.png"
	width="1566"
	height="400"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-69_hu_5402503c3aecfcb.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-69_hu_b2b7b6b89dec2f52.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="391"
		data-flex-basis="939px"
	
></p>
<ul>
<li>删除正在运行的ubuntu容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm -f 006e879ee419
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-70.png"
	width="1464"
	height="212"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-70_hu_3d991ea4065eb81e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-70_hu_aaa2ae93c0508d24.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="690"
		data-flex-basis="1657px"
	
></p>
<ul>
<li>导入容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat ubuntu_back.tar | docker import - yline/ubuntu:6.6.6
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-71.png"
	width="1112"
	height="296"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-71_hu_7c2d041da6925535.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-71_hu_99b02627558c2188.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="375"
		data-flex-basis="901px"
	
></p>
<ul>
<li>运行刚刚导入的镜像，并找到a.txt</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it 7fd7d82b1ac0 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-72.png"
	width="854"
	height="296"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-72_hu_c273aa8402219366.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-72_hu_e674ece44483dbb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="288"
		data-flex-basis="692px"
	
></p>
<h4 id="生词-4">生词
</h4><ul>
<li>detach / dɪˈtætʃ / v、使分离；脱离；派遣</li>
<li>override / ˌoʊvərˈraɪd / v、否决，推翻；比&hellip;.更重要；n、（预算、薪金等）增加；（对决定等的）否决，撤销</li>
<li>sequence / ˈsiːkwəns / v、按顺序排列； n、顺序，次序</li>
<li>alias / ˈeɪliəs / n、别名</li>
<li>destination / ˌdestɪˈneɪʃ(ə)n / n、目的地</li>
</ul>
<h2 id="docker镜像">Docker镜像
</h2><h3 id="镜像是什么">镜像是什么
</h3><ul>
<li>
<p>是一种轻量级、可执行的独立软件包，它包含运行某个软件所需的所有内容，我们把应用程序和配置依赖打包好形成一个可交付的运行环境（包括代码、运行时需要的库、环境变量和配置文件等），这个打包好的运行环境就是image镜像文件。</p>
</li>
<li>
<p>只有通过这个镜像文件才能生成Docker容器实例（类似java中new出一个对象）。</p>
</li>
</ul>
<h4 id="分层的镜像">分层的镜像
</h4><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-73.png"
	width="353"
	height="302"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-73_hu_d56052fea6e653e0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-73_hu_348ce418908ea40.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="280px"
	
></p>
<p>可以看到镜像下载是一层一层的</p>
<h4 id="unionfs联合文件系统">UnionFS（联合文件系统）
</h4><blockquote>
<p>Unios文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持<font color=red>对文件系统的修改作为一次提交来一层层的叠加</font>，同时可以将不同目录挂载到同一个虚拟机文件系统下。Union文件系统时Docker镜像的基础。<font color=blue>镜像可以通过分层来进行继承</font>，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。</p>
</blockquote>
<ul>
<li>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终文件系统会包含所有底层文件和目录。</li>
</ul>
<h4 id="docker镜像加载原理">Docker镜像加载原理
</h4><ul>
<li>Docker的镜像实际上由一层一层的文件系统组成，这样层级的文件系统UnionFS。</li>
<li>bootfs(boot file system)主要包含bootloader和kernel，bootloader主要时引导加载kernel，Linux刚启动时会加载bootfs文件系统，<font color=red>在Docker镜像的最底层是引导文件系统bootfs</font>。这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载器完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs。</li>
<li>rootfs(root file system)，在bootfs之上。包含的就是典型Linux系统中的/dev，/proc，/bin，/etc等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。</li>
</ul>
<p>镜像分层最大的一个好处就是<font color=red>共享资源，方便复制迁移，就是为了复用</font></p>
<p>比如说由多个镜像都从相同base镜像构建而来，那么Docker Host只需要在磁盘上保存一份base镜像；同时内存中也只需加载一份base镜像，就可以为所有容器服务了。而且镜像的每一层都可以被共享。</p>
<h3 id="重点理解">重点理解
</h3><blockquote>
<p><font color=red>Docker镜像层都是只读的，容器层是可读的。</font>
当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作“容器层”，“容器层”之下的都叫“镜像层”。</p>
</blockquote>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-74.png"
	width="497"
	height="417"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-74_hu_8ab31955fa5195e3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-74_hu_2cab0e5e0568c697.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="119"
		data-flex-basis="286px"
	
></p>
<h3 id="docker镜像commit操作案例">Docker镜像commit操作案例
</h3><blockquote>
<p>案例：创建并官方ubuntu（无vim），给它安装vim命令，提交使之成为一个新的镜像（自带vim的ubuntu）</p>
</blockquote>
<ul>
<li>启动ubuntu容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>启动容器<code>839be55792c9</code></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-75.png"
	width="422"
	height="58"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-75_hu_c9a0005b3f22a922.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-75_hu_1b633fadaa097c60.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="727"
		data-flex-basis="1746px"
	
></p>
<ul>
<li>检测是否带有vim命令</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-76.png"
	width="252"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-76_hu_c331d32743160cba.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-76_hu_871107eb2769b69c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="504"
		data-flex-basis="1209px"
	
></p>
<p>显示： bash: vim: command not found</p>
<ul>
<li>
<p>安装vim命令</p>
<ul>
<li>更新包管理工具，并等待更新</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">apt-get update
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-77.png"
	width="744"
	height="339"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-77_hu_7c71c30ba9949aed.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-77_hu_a576694dc7a2e9f9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="219"
		data-flex-basis="526px"
	
></p>
<ul>
<li>安装vim</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">apt-get install vim -y
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-78.png"
	width="868"
	height="332"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-78_hu_2ba244a359ced77e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-78_hu_18926417af88f095.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="261"
		data-flex-basis="627px"
	
></p>
<ul>
<li>检测vim命令</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-79.png"
	width="267"
	height="38"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-79_hu_27091c58a098f9e3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-79_hu_998206eccd20e3fd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="702"
		data-flex-basis="1686px"
	
>
<img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-80.png"
	width="874"
	height="525"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-80_hu_1422b6e10612bed0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-80_hu_f4ed91ef4627a614.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="166"
		data-flex-basis="399px"
	
>
<img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-81.png"
	width="254"
	height="54"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-81_hu_1084938266f2b10f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-81_hu_4d27ec2b92cc73b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="470"
		data-flex-basis="1128px"
	
></p>
</li>
<li>
<p>提交容器副本使之成为一个新的镜像</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker commit -m=&#34;注释&#34; -a=&#34;作者&#34; 容器ID 包名/镜像名:版本号
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker commit -m=&#34;add vim cmd&#34; -a=&#34;yline&#34; 839be55792c9 yline/myubuntu:1.1
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-82.png"
	width="756"
	height="49"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-82_hu_3c1ab516d6c69c24.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-82_hu_b3499ebc9b196802.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1542"
		data-flex-basis="3702px"
	
></p>
<ul>
<li>查看镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-83.png"
	width="531"
	height="117"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-83_hu_382267d52e049834.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-83_hu_3e5cfa87872e9599.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="453"
		data-flex-basis="1089px"
	
></p>
<p>能看到，只加了一个vim就从78.1MB变成了205MB</p>
<ul>
<li>启动新镜像与原来的对比</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 查看本地镜像 
</span></span><span class="line"><span class="cl">docker images
</span></span><span class="line"><span class="cl"># 启动官方docker
</span></span><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span><span class="line"><span class="cl"># 测试vim命令
</span></span><span class="line"><span class="cl">vim a.txt
</span></span><span class="line"><span class="cl"># 退出
</span></span><span class="line"><span class="cl">exit
</span></span><span class="line"><span class="cl"># 启动刚刚提交的镜像
</span></span><span class="line"><span class="cl">docker run -it 18e98d78449d /bin/bash
</span></span><span class="line"><span class="cl"># 测试vim命令
</span></span><span class="line"><span class="cl">vim a.txt
</span></span><span class="line"><span class="cl"># 查看a.txt
</span></span><span class="line"><span class="cl">cat a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-84.png"
	width="534"
	height="275"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-84_hu_2d3c66e99dc24ded.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-84_hu_9afda960cedcc6fa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="194"
		data-flex-basis="466px"
	
></p>
<p>从中可以看到刚刚提交的镜像，默认自带vim命令，以及之前创建的a.txt，也会默认自带。也就是得到了原本镜像的vim扩展镜像。</p>
<h3 id="小总结">小总结
</h3><blockquote>
<p>Docker中的镜像分层，<font color=red>支持通过扩展镜像，创建新的镜像。</font>类似Java继承于一个Base基础类，自己再按需扩展。新镜像是从base镜像一层一层叠加生成的。每安装一个软件，就在现有镜像的基础上增加一层。</p>
</blockquote>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-85.png"
	width="995"
	height="324"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-85_hu_cfb7743b60fcaf26.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-85_hu_41d881bc2c188b3d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="307"
		data-flex-basis="737px"
	
></p>
<h2 id="本地镜像发布到阿里云">本地镜像发布到阿里云
</h2><h3 id="流程图">流程图
</h3><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-90.png"
	width="596"
	height="542"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-90_hu_faeffb41aa3afae6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-90_hu_848144ff55d0592c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="109"
		data-flex-basis="263px"
	
></p>
<h3 id="镜像的生成方法">镜像的生成方法
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker commit [OPTIONS] 容器ID [RRPOSITORY[:TAG]]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>示例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker commit -m=&#34;add vim cmd&#34; 18e98d78449d yline/myubuntu:1.1
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="将本地镜像推送到阿里云">将本地镜像推送到阿里云
</h3><h4 id="本地镜像素材原型">本地镜像素材原型
</h4><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-107.png"
	width="525"
	height="139"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-107_hu_f8edfedd74c2785d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-107_hu_9d2062d9341ee4f3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="377"
		data-flex-basis="906px"
	
></p>
<h4 id="阿里云">阿里云
</h4><ul>
<li><a class="link" href="https://www.aliyun.com/"  target="_blank" rel="noopener"
    >阿里云</a></li>
</ul>
<h4 id="创建仓库镜像">创建仓库镜像
</h4><ul>
<li>打开阿里云首页，进入控制台</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-91.png"
	width="689"
	height="294"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-91_hu_fa037ac579750a0a.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-91_hu_fa23b9f22d56ea3d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="234"
		data-flex-basis="562px"
	
></p>
<ul>
<li>进入容器镜像服务</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-92.png"
	width="429"
	height="296"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-92_hu_ff1fb15a9f9df4fa.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-92_hu_d66be55b1b9c0931.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="144"
		data-flex-basis="347px"
	
></p>
<ul>
<li>选择个人实例</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-93.png"
	width="418"
	height="258"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-93_hu_921aaf1ce1e83d50.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-93_hu_24c64f72ddcccf05.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="162"
		data-flex-basis="388px"
	
></p>
<ul>
<li>创建个人实例</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-94.png"
	width="701"
	height="668"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-94_hu_776527313a6a7c06.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-94_hu_2d0877ecb823253e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="104"
		data-flex-basis="251px"
	
></p>
<ul>
<li>选择第一个地域（一般第一个对于当前网络是最快的）</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-95.png"
	width="1305"
	height="403"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-95_hu_927b184b94ac2a35.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-95_hu_5e242908ab4e46da.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="323"
		data-flex-basis="777px"
	
></p>
<ul>
<li>同意使用须知后，点击立即创建</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-96.png"
	width="355"
	height="84"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-96_hu_6da2a7c3d61ddcfc.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-96_hu_fce0d118a2d36b66.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="422"
		data-flex-basis="1014px"
	
></p>
<ul>
<li>设置Registry登陆密码</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-97.png"
	width="537"
	height="364"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-97_hu_bb2926d93a36f130.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-97_hu_2256f4ce84efa44c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="147"
		data-flex-basis="354px"
	
></p>
<ul>
<li>设置完成后点击命名空间</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-98.png"
	width="169"
	height="284"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-98_hu_fe1385e5d28776a4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-98_hu_1413c704b653c90e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="59"
		data-flex-basis="142px"
	
></p>
<ul>
<li>创建命名空间</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-99.png"
	width="531"
	height="182"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-99_hu_fb05edbcbacbefca.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-99_hu_6be0f265ff18ba5.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="291"
		data-flex-basis="700px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-100.png"
	width="535"
	height="328"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-100_hu_80e45ac36a7761c7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-100_hu_bfb78e2c4abca377.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="163"
		data-flex-basis="391px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-101.png"
	width="1133"
	height="166"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-101_hu_c96833534211f05d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-101_hu_3184ec1742a331e3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="682"
		data-flex-basis="1638px"
	
></p>
<ul>
<li>点击镜像仓库</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-102.png"
	width="175"
	height="221"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-102_hu_8126323cd09d179e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-102_hu_d2d65d2a1f2a5f58.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="79"
		data-flex-basis="190px"
	
></p>
<ul>
<li>创建镜像仓库</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-103.png"
	width="687"
	height="164"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-103_hu_340e121116b171b2.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-103_hu_d5f576d9745c51e3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="418"
		data-flex-basis="1005px"
	
></p>
<ul>
<li>选择刚刚创建的命名空间，并输入仓库名称和摘要</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-104.png"
	width="801"
	height="730"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-104_hu_84de6074a9945c5f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-104_hu_3f366eeb59296717.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="109"
		data-flex-basis="263px"
	
></p>
<ul>
<li>选择本地仓库，然后点击创建镜像仓库</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-105.png"
	width="801"
	height="354"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-105_hu_d1eaeb4f1766cb72.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-105_hu_2e701ecf2f83ea4c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="226"
		data-flex-basis="543px"
	
></p>
<ul>
<li>通过镜像推送命令，将镜像推送到阿里云</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ docker login --username=ylinehub **********.cn-hangzhou.personal.cr.aliyuncs.com
</span></span><span class="line"><span class="cl">$ docker tag [ImageId] **********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:[镜像版本号]
</span></span><span class="line"><span class="cl">$ docker push **********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:[镜像版本号]
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-106.png"
	width="815"
	height="642"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-106_hu_3ae6d9b5159a9f02.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-106_hu_35a8a53f20a1ae66.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="126"
		data-flex-basis="304px"
	
></p>
<h4 id="将镜像推送到阿里云">将镜像推送到阿里云
</h4><ul>
<li>查询需要推送的镜像id</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-107.png"
	width="525"
	height="139"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-107_hu_f8edfedd74c2785d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-107_hu_9d2062d9341ee4f3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="377"
		data-flex-basis="906px"
	
></p>
<p>镜像ID：<code>18e98d78449d</code></p>
<ul>
<li>docker登陆阿里云仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker login --username=ylinehub **********.cn-hangzhou.personal.cr.aliyuncs.com
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-108.png"
	width="870"
	height="149"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-108_hu_62456adb4dea1f3c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-108_hu_3e0a97ca71fe9e00.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="583"
		data-flex-basis="1401px"
	
></p>
<p>登陆成功</p>
<ul>
<li>标记镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker tag 18e98d78449d **********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:1.1
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-109.png"
	width="868"
	height="55"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-109_hu_8790ffbe0c6956a3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-109_hu_85593b61464d2217.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1578"
		data-flex-basis="3787px"
	
></p>
<ul>
<li>推送镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker push **********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:1.1
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-110.png"
	width="869"
	height="121"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-110_hu_51ba3b9015933aef.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-110_hu_6bc7c34fee5b7eba.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="718"
		data-flex-basis="1723px"
	
></p>
<p>推送成功</p>
<ul>
<li>在阿里云上选择镜像版本，查看镜像</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-111.png"
	width="192"
	height="200"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-111_hu_1ba0cce820f1019e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-111_hu_6fb1bbd09f9af013.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="96"
		data-flex-basis="230px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-112.png"
	width="1131"
	height="130"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-112_hu_7c852ce871317b2e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-112_hu_3e5f52b57bba1ce9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="870"
		data-flex-basis="2088px"
	
></p>
<h3 id="将阿里云上的镜像拉取到本地">将阿里云上的镜像拉取到本地
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull **********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:[镜像版本号]
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>删除本地镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi -f 18e98d78449d
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-113.png"
	width="1262"
	height="78"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-113_hu_3e478a9b5ebc5e8d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-113_hu_f2f50ec08ec72cf9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1617"
		data-flex-basis="3883px"
	
></p>
<ul>
<li>下载镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull *********.cn-hangzhou.personal.cr.aliyuncs.com/yline/myubuntu:1.1
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-114.png"
	width="913"
	height="111"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-114_hu_6e78b794d43be05f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-114_hu_22bc51851ca659ca.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="822"
		data-flex-basis="1974px"
	
></p>
<ul>
<li>查看镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-115.png"
	width="993"
	height="112"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-115_hu_b0214e8edbf94661.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-115_hu_4889186a291bbb69.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="886"
		data-flex-basis="2127px"
	
></p>
<ul>
<li>运行镜像并测试</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 运行镜像
</span></span><span class="line"><span class="cl">docker run -it 18e98d78449d /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-116.png"
	width="467"
	height="52"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-116_hu_67c1515128239ed2.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-116_hu_9e5d78aa6cc1a230.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="898"
		data-flex-basis="2155px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-117.png"
	width="250"
	height="55"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-117_hu_42cedf44a14fb5c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-117_hu_5e68ce26d2aea06d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="454"
		data-flex-basis="1090px"
	
></p>
<h2 id="docker私有库">docker私有库
</h2><h3 id="是什么">是什么
</h3><ul>
<li>Docker Registry</li>
</ul>
<h3 id="将本地镜像推送到私有库">将本地镜像推送到私有库
</h3><h4 id="下载镜像docker-registry">下载镜像Docker registry
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull registry
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-118.png"
	width="638"
	height="165"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-118_hu_d7280b43261b4295.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-118_hu_e44f48ee554e7c9a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="386"
		data-flex-basis="928px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-119.png"
	width="990"
	height="135"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-119_hu_647ce38a0c94e4ae.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-119_hu_3b43547deb4f0374.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="733"
		data-flex-basis="1760px"
	
></p>
<h4 id="运行私有库registry相当于本地有个私有docker-hub">运行私有库registry，相当于本地有个私有Docker hub
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d -p 5000:5000 -v /yline/myregistry/:/tmp/registry --privileged=true registry
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>-d</code> 表示容器在后台运行，<code>-p</code> 表示端口映射，这里是宿主机5000端口和容器5000端口映射。默认情况下，仓库创建在容器的<code>/var/lib/registry</code>目录下，建议自行用容器卷映射，方便与宿主机联调</p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-120.png"
	width="1104"
	height="110"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-120_hu_10ca6a36f59efe07.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-120_hu_7f7fdc6b16121410.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1003"
		data-flex-basis="2408px"
	
></p>
<h4 id="案例演示创建一个新镜像ubuntu安装ifconfig命令">案例演示创建一个新镜像，ubuntu安装ifconfig命令
</h4><ul>
<li>从hub上下载ubuntu镜像到本地并成功运行</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it ubuntu /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-121.png"
	width="424"
	height="49"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-121_hu_3e1653c5ca699094.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-121_hu_da7254a4b81912d4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="865"
		data-flex-basis="2076px"
	
></p>
<p>容器id为<code>35c637630e00</code></p>
<ul>
<li>原始的ubuntu镜像是不带着ifconfig命令</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ifconfig
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-122.png"
	width="272"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-122_hu_53f47b5219dd73d3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-122_hu_77153ba683069678.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="544"
		data-flex-basis="1305px"
	
></p>
<ul>
<li>外网连通的情况下，安装ifconfig命令测试并通过</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</span></span><span class="line"><span class="cl"><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">net</span><span class="o">-</span><span class="n">tools</span>
</span></span><span class="line"><span class="cl"><span class="n">ifconfig</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-123.png"
	width="747"
	height="315"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-123_hu_d0c4ac9c4e382aaa.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-123_hu_aee2f6980a9b1fc1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="237"
		data-flex-basis="569px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-124.png"
	width="862"
	height="259"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-124_hu_a2529ee12f46a9d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-124_hu_4ed40cc662457a42.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="332"
		data-flex-basis="798px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-125.png"
	width="605"
	height="264"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-125_hu_b583c8bdb2065956.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-125_hu_bd4fbbd125e50859.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="229"
		data-flex-basis="550px"
	
></p>
<ul>
<li>
<p>使用<code>ctrl+p+q</code>退出容器</p>
</li>
<li>
<p>查看容器</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-126.png"
	width="1115"
	height="114"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-126_hu_63d86021f62b9390.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-126_hu_84d160765b51b0e3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="978"
		data-flex-basis="2347px"
	
></p>
<ul>
<li>commit新镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker commit -m=&#34;add ifconfig cmd&#34; -a=&#34;yline&#34; 35c6e7630e00  ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-127.png"
	width="766"
	height="33"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-127_hu_e7ec7b66da131a1d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-127_hu_6754b85c562a17d3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="2321"
		data-flex-basis="5570px"
	
></p>
<ul>
<li>查看镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-128.png"
	width="1039"
	height="120"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-128_hu_18e2546a2a0623f7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-128_hu_52ababf4fbb48f72.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="865"
		data-flex-basis="2078px"
	
></p>
<ul>
<li>启动我们的新镜像并和原来的对比</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it 60bd00c20db2 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-129.png"
	width="576"
	height="278"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-129_hu_2322bec5728fe7ec.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-129_hu_f824fef20603e0b7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="207"
		data-flex-basis="497px"
	
></p>
<h4 id="curl-验证私服库上有什么镜像">curl 验证私服库上有什么镜像
</h4><ul>
<li>查询宿主机ip</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">hostname -i
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-130.png"
	width="1319"
	height="70"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-130_hu_b6bbd742a484ca6d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-130_hu_fcf0549ca216915b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1884"
		data-flex-basis="4522px"
	
></p>
<p>可以看到ip为<code>192.168.172.137</code></p>
<ul>
<li>使用curl向宿主机的5000端口的 <code>/v2/_catalog</code>接口 发送get请求</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl -XGET http://192.168.172.137:5000/v2/_catalog
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-131.png"
	width="572"
	height="65"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-131_hu_e641119b90bd97fb.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-131_hu_ea580347f161a125.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="880"
		data-flex-basis="2112px"
	
></p>
<p>红框内表示仓库此时没有任何镜像</p>
<ul>
<li>将新镜像ylineubuntu:1.2修改符合私服规范的Tag</li>
</ul>
<p>语法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker tag 镜像:Tag Host:Port/Repository:Tag
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker tag ylineubuntu:1.2 192.168.172.137:5000/ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-132.png"
	width="1021"
	height="153"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-132_hu_3a8c4c0bec9098.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-132_hu_32787391d74ccc1d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="667"
		data-flex-basis="1601px"
	
></p>
<ul>
<li>修改配置文件使之支持http</li>
</ul>
<p>打开<code>/etc/docker/daemon.json</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/docker/daemon.json
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-133.png"
	width="369"
	height="160"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-133_hu_cbfde91b12d9f844.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-133_hu_672e9c725eecc034.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="230"
		data-flex-basis="553px"
	
></p>
<p>添加如下配置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;insecure-registries&#34;:[&#34;192.168.172.137:5000&#34;]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改后的配置如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;registry-mirrors&#34;: [
</span></span><span class="line"><span class="cl">    &#34;https://alzgoonw.mirror.aliyuncs.com&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.m.daocloud.io&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://dockerhub.icu&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.anyhub.us.kg&#34;,
</span></span><span class="line"><span class="cl">    &#34;https://docker.1panel.live&#34;
</span></span><span class="line"><span class="cl">  ],
</span></span><span class="line"><span class="cl">  &#34;insecure-registries&#34;: [&#34;192.168.172.137:5000&#34;]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-134.png"
	width="414"
	height="168"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-134_hu_2b5b9e7cdcf0cd21.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-134_hu_6b6ca29060e3a20e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="246"
		data-flex-basis="591px"
	
></p>
<ul>
<li>重新加载配置，并重启docker</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">systemctl</span> <span class="n">daemon</span><span class="o">-</span><span class="n">reload</span>
</span></span><span class="line"><span class="cl"><span class="n">systemctl</span> <span class="n">restart</span> <span class="n">docker</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>push推送到私服库</li>
</ul>
<p>公式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker push 容器名
</span></span></code></pre></td></tr></table>
</div>
</div><p>查看容器名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-135.png"
	width="1037"
	height="137"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-135_hu_67a4af0c187c2ec7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-135_hu_65a15923b88c66ed.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="756"
		data-flex-basis="1816px"
	
></p>
<p>推送到仓库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker push image_name:image_tag
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker push 192.168.172.137:5000/ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>出现报错：connection refused</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-136.png"
	width="793"
	height="61"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-136_hu_682ede3e0e59f4be.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-136_hu_c61e799aaee36fb9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1300"
		data-flex-basis="3120px"
	
></p>
<ul>
<li>查看docker运行的容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-137.png"
	width="579"
	height="65"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-137_hu_dbb39cf7c6cd991d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-137_hu_383bb2803735ca79.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="890"
		data-flex-basis="2137px"
	
></p>
<p>因为docker服务重启，所以docker容器都关闭了</p>
<ul>
<li>重启docker私服库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps -a
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-138.png"
	width="1054"
	height="196"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-138_hu_2b78cf0ae3d9fca7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-138_hu_ff07bfe4c297a085.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="537"
		data-flex-basis="1290px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker start 7f08a89d1fd9
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-139.png"
	width="370"
	height="51"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-139_hu_a87e864dafdb0b58.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-139_hu_6da4fa38e2e7d018.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="725"
		data-flex-basis="1741px"
	
></p>
<ul>
<li>再次推送镜像到仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker push 192.168.172.137:5000/ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-140.png"
	width="771"
	height="80"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-140_hu_940361ff7c55d2d7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-140_hu_8e3fa9ac257bf888.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="963"
		data-flex-basis="2313px"
	
></p>
<ul>
<li>请求仓库，查看仓库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl -XGET http://192.168.172.137:5000/v2/_catalog
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-141.png"
	width="571"
	height="31"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-141_hu_a8682c605e373b3b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-141_hu_4c6b5c7981b81d2e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1841"
		data-flex-basis="4420px"
	
></p>
<ul>
<li>pull到本地运行</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 删除本地镜像
</span></span><span class="line"><span class="cl">docker rmi -f 192.168.172.137:5000/ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-142.png"
	width="917"
	height="47"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-142_hu_a8ca9df023b764f0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-142_hu_d49494e4754a6086.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1951"
		data-flex-basis="4682px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 拉取镜像
</span></span><span class="line"><span class="cl">docker pull 192.168.172.137:5000/ylineubuntu:1.2
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-143.png"
	width="640"
	height="75"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-143_hu_7ac853023e90f74b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-143_hu_879d43f285eb8b63.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="853"
		data-flex-basis="2048px"
	
></p>
<ul>
<li>测试</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it 192.168.172.137:5000/ylineubuntu:1.2 /bin/bash
</span></span><span class="line"><span class="cl">ifconfig
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-144.png"
	width="659"
	height="273"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-144_hu_479b7859419f0166.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-144_hu_67f9780f9edf946b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="241"
		data-flex-basis="579px"
	
></p>
<h4 id="生词-5">生词
</h4><ul>
<li>volume / ˈvɑːljəm / n、体积；总数；音量；卷</li>
<li>bind / baɪnd / v、使紧密联系；捆绑</li>
<li>mount / maʊnt / v、组织；爬上；增多； 网络释义、挂载</li>
<li>privilege / ˈprɪvəlɪdʒ / v、给予特权；免除（某人） n、特权；</li>
</ul>
<h2 id="docker容器数据卷">docker容器数据卷
</h2><h3 id="坑容器卷记得加入">坑：容器卷记得加入
</h3><ul>
<li><code>--privileged=true</code></li>
</ul>
<p>Docker挂载主机目录访问如果出现 cannot open directory .: Permission denied</p>
<ul>
<li>解决办法：</li>
</ul>
<p>在挂载目录后多加一个&ndash;privileged=true参数即可。保证拥有root用户的权限。</p>
<h3 id="简介">简介
</h3><ul>
<li>
<p>映射，容器内的数据备份+持久化到本地主机目录</p>
</li>
<li>
<p>一句话：有点类似我们Redis里面的rdb和aof文件。将docker容器内的数据保存进宿主机的磁盘中，运行一个带有容器卷存储功能的容器实例。</p>
</li>
<li>
<p>语法</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录 镜像名
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="作用">作用
</h3><ul>
<li>
<p>将运用与运行的环境打包镜像，run后形成容器实例运行，但是我们对数据的希望是持久化的</p>
</li>
<li>
<p>Docker 容器产生的数据，如果不备份，那么当容器实例被删除后，容器内的数据自然也没有了。为了能保存数据在docker中我们使用卷。</p>
</li>
<li>
<p>特点：</p>
<ul>
<li>数据卷可在容器之间共享或重用数据。</li>
<li>卷中的更改可以直接实时生效。</li>
<li>数据卷中的更改不会包含在镜像的更新中。</li>
<li>数据卷的生命周期一直持续到没有容器使用它为止。</li>
</ul>
</li>
</ul>
<h3 id="案例-1">案例
</h3><h4 id="宿主vs容器之间映射添加容器卷">宿主vs容器之间映射添加容器卷
</h4><ul>
<li>命令</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录 镜像名
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>映射ubuntu容器内的/tmp/docker_data到本地的/tmp/host_data</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /tmp/host_data:/tmp/docker_data --name=u1 ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-145.png"
	width="841"
	height="49"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-145_hu_ebd5d863122b3449.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-145_hu_bca49c0a64e693dc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1716"
		data-flex-basis="4119px"
	
></p>
<ul>
<li>进入映射的卷，并创建一个文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /tmp/docker_data/
</span></span><span class="line"><span class="cl">touch dockerin.txt
</span></span><span class="line"><span class="cl">ls
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-146.png"
	width="441"
	height="82"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-146_hu_f2fed5bde970aa86.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-146_hu_56ab96939aca74ea.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="537"
		data-flex-basis="1290px"
	
></p>
<ul>
<li>查看宿主机挂载的目录</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ls /tmp/host_data
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-147.png"
	width="316"
	height="51"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-147_hu_1b5f3bc75b87dda6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-147_hu_e60f976ef03aba35.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="619"
		data-flex-basis="1487px"
	
></p>
<ul>
<li>在宿主机的目录下添加文件并修改</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">touch hostin.txt
</span></span><span class="line"><span class="cl">echo &#39;hello docker&#39; &gt; a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-148.png"
	width="457"
	height="112"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-148_hu_d1666798ac8ef101.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-148_hu_52699429c908999a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="408"
		data-flex-basis="979px"
	
></p>
<ul>
<li>查看容器下的目录</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-149.png"
	width="322"
	height="64"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-149_hu_ead98976ee52aec1.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-149_hu_8742faf293fff19f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="503"
		data-flex-basis="1207px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-150.png"
	width="377"
	height="56"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-150_hu_17eee6d6de8245cd.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-150_hu_f26dee2376701a97.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="673"
		data-flex-basis="1615px"
	
></p>
<ul>
<li>使用<code>docker inspect 容器ID</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker inspect 
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>在其中找到<code>Mounts</code>这段</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-151.png"
	width="346"
	height="151"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-151_hu_fe0583e594bdc0ae.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-151_hu_d04bc05ff9178e11.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="229"
		data-flex-basis="549px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;Mounts&#34;: [
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">        &#34;Type&#34;: &#34;bind&#34;,                       # 类型：绑定
</span></span><span class="line"><span class="cl">        &#34;Source&#34;: &#34;/tmp/host_data&#34;,           # 源目录
</span></span><span class="line"><span class="cl">        &#34;Destination&#34;: &#34;/tmp/docker_data&#34;,    # 目标目录
</span></span><span class="line"><span class="cl">        &#34;Mode&#34;: &#34;&#34;,
</span></span><span class="line"><span class="cl">        &#34;RW&#34;: true,
</span></span><span class="line"><span class="cl">        &#34;Propagation&#34;: &#34;rprivate&#34;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">],
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="停止容器然后修改映射目录">停止容器然后修改映射目录
</h5><ul>
<li>停止容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker stop 1e15ae792fb2
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>创建文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">echo &#39;stop: hello docker&#39; &gt; c.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-152.png"
	width="500"
	height="60"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-152_hu_6a31aad9ff17a669.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-152_hu_159fb4a9aa0d983d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="833"
		data-flex-basis="2000px"
	
></p>
<ul>
<li>重启容器并查看</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker start 1e15ae792fb2
</span></span><span class="line"><span class="cl">docker exec -it 1e15ae792fb2 /bin/bash
</span></span><span class="line"><span class="cl">cd /tmp/docker_data/
</span></span><span class="line"><span class="cl">cat c.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-153.png"
	width="543"
	height="117"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-153_hu_1f88716ddeb6e5a3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-153_hu_f9107f1823ab4483.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="464"
		data-flex-basis="1113px"
	
></p>
<h4 id="读写规则映射添加说明">读写规则映射添加说明
</h4><h5 id="读写默认">读写（默认）
</h5><ul>
<li>语法：与上述案例相同，不加读写规则，默认就是rw</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录:rw 镜像名
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="只读">只读
</h5><ul>
<li>语法（ro：read only）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录:ro 镜像名
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>在容器内：只能读取，不能写入。<br>在宿主机：可以读写，宿主机写入内容，容器可以读取到。</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /mydocker/u:/tmp/u:ro --name u2 ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>宿主机写入数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /mydocker/u/
</span></span><span class="line"><span class="cl">echo &#39;u2: host update&#39; &gt; a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-154.png"
	width="417"
	height="70"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-154_hu_7ea4fbacd37a9925.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-154_hu_240c62e0cf62ccef.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="595"
		data-flex-basis="1429px"
	
></p>
<ul>
<li>容器内部查看</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /tmp/u/
</span></span><span class="line"><span class="cl">ls
</span></span><span class="line"><span class="cl">cat a.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-155.png"
	width="296"
	height="78"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-155_hu_bd96a115587760fc.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-155_hu_60bfcc98b7756fa4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="379"
		data-flex-basis="910px"
	
></p>
<ul>
<li>在容器内创建文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">touch b.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-156.png"
	width="410"
	height="51"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-156_hu_b8932d140e1a16c0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-156_hu_c6903677d14d101b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="803"
		data-flex-basis="1929px"
	
></p>
<h4 id="卷的继承和共享">卷的继承和共享
</h4><h5 id="容器u3完成和宿主机的映射">容器u3完成和宿主机的映射
</h5><ul>
<li>创建容器u3</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true -v /mydocker/u3:/tmp/u --name u3 ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-157.png"
	width="743"
	height="55"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-157_hu_6585dab3c1e21be4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-157_hu_a935c25ae5d4963.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1350"
		data-flex-basis="3242px"
	
></p>
<ul>
<li>进入映射目录下，并创建文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /tmp/u
</span></span><span class="line"><span class="cl">ls
</span></span><span class="line"><span class="cl">touch u3data.txt
</span></span><span class="line"><span class="cl">ls
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-158.png"
	width="346"
	height="92"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-158_hu_d7706562a6ee10d7.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-158_hu_340713fbd97fa669.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="376"
		data-flex-basis="902px"
	
></p>
<h5 id="容器u4继承容器u3的卷规则">容器u4继承容器u3的卷规则
</h5><ul>
<li>语法</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true --volumes-from 父容器名 --name 子容器名 镜像名 
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>创建容器u4，并继承容器u3的卷规则</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -it --privileged=true --volumes-from u3 --name u4 ubuntu
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-159.png"
	width="713"
	height="42"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-159_hu_b9ccf41bb28e0f69.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-159_hu_57a8f7b7138c3242.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1697"
		data-flex-basis="4074px"
	
></p>
<ul>
<li>进入/tmp/u目录下并查看</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /tmp/u/
</span></span><span class="line"><span class="cl">ls
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-160.png"
	width="266"
	height="69"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-160_hu_f1f342c6c5ca338c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-160_hu_901bfb01d06f98ee.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="385"
		data-flex-basis="925px"
	
></p>
<ul>
<li>在u4容器创建新文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">touch u4data.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-161.png"
	width="353"
	height="67"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-161_hu_6d1e8d1301bf9568.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-161_hu_494f0fdfe46dd023.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="526"
		data-flex-basis="1264px"
	
></p>
<ul>
<li>在宿主机创建新文件，并查看文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /mydocker/u3/
</span></span><span class="line"><span class="cl">touch hostdata.txt
</span></span><span class="line"><span class="cl">ls
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-162.png"
	width="320"
	height="79"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-162_hu_600ded0c5ef830cc.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-162_hu_644f4b40cb856635.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="405"
		data-flex-basis="972px"
	
></p>
<ul>
<li>容器u3下该目录</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-163.png"
	width="301"
	height="58"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-163_hu_bf8d6204f671c88e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-163_hu_4e7539a26f1cf603.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="518"
		data-flex-basis="1245px"
	
></p>
<ul>
<li>容器u4下该目录</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-164.png"
	width="299"
	height="52"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-164_hu_fb3abc9df38af0f8.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-164_hu_5e397d0bf96802fe.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="575"
		data-flex-basis="1380px"
	
></p>
<h2 id="docker-上安装常用软件">docker 上安装常用软件
</h2><h3 id="总体步骤">总体步骤
</h3><ul>
<li>搜索镜像</li>
</ul>
<p>官方仓库网址：<a class="link" href="https://hub.docker.com/"  target="_blank" rel="noopener"
    >dockerhub</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker search
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>拉取镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>查看镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>启动镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>停止镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker stop
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>移除镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rmi 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装tomcat">安装tomcat
</h3><h4 id="最新版">最新版
</h4><ul>
<li>进入dockerhub官网:<a class="link" href="https://hub.docker.com/"  target="_blank" rel="noopener"
    >docker hub</a></li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-165.png"
	width="1395"
	height="839"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-165_hu_21484d8f9e72d7a2.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-165_hu_f5f2a0609442ceaf.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="166"
		data-flex-basis="399px"
	
></p>
<ul>
<li>搜索tomcat</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-166.png"
	width="1119"
	height="581"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-166_hu_cf352bf8d25f20c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-166_hu_db4e2216fe27befc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="192"
		data-flex-basis="462px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-167.png"
	width="569"
	height="429"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-167_hu_d8cf006933290a50.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-167_hu_39b11b69bcdc5c2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="132"
		data-flex-basis="318px"
	
></p>
<ul>
<li>点击三个点会弹出拉取该版本的命令</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-168.png"
	width="1323"
	height="700"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-168_hu_e375abd60ca8fe8.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-168_hu_452e1e5a51b4127a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="189"
		data-flex-basis="453px"
	
></p>
<ul>
<li>我们直接用默认命令，拉取最新版本</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull tomcat 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-169.png"
	width="643"
	height="96"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-169_hu_33f16323c2916b4a.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-169_hu_841a809689567360.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="669"
		data-flex-basis="1607px"
	
></p>
<p>因为我们已经下载了，所以这里没有再下载</p>
<ul>
<li>查看镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker images tomcat
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-170.png"
	width="469"
	height="72"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-170_hu_d51f0e76e5e581f5.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-170_hu_32dc7479b45c6b2f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="651"
		data-flex-basis="1563px"
	
></p>
<ul>
<li>使用tomcat镜像创建容器实例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d -p 8080:8080 --name t1 tomcat
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-171.png"
	width="525"
	height="51"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-171_hu_8a2f8caabb1ef2ac.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-171_hu_d256b962f02a4dc9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1029"
		data-flex-basis="2470px"
	
></p>
<ul>
<li>访问tomcat</li>
</ul>
<p>浏览器输入：ip:8080</p>
<ul>
<li>问题 404</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-172.png"
	width="525"
	height="184"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-172_hu_5664663c9a69113f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-172_hu_27779806b4c7f5ed.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="285"
		data-flex-basis="684px"
	
></p>
<ul>
<li>进入tomcat</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it 2839835a050a /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-173.png"
	width="473"
	height="35"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-173_hu_b138d486ef4811e3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-173_hu_a9bc3c3ded8df69c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1351"
		data-flex-basis="3243px"
	
></p>
<ul>
<li>查看当前目录下的文件</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-174.png"
	width="476"
	height="357"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-174_hu_c68b10fe40cbd647.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-174_hu_10b2999b97857c3e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="133"
		data-flex-basis="320px"
	
></p>
<p>tomcat返回的页面在webapps下</p>
<ul>
<li>进入<code>webapps</code>目录，并查看</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd webapps
</span></span><span class="line"><span class="cl">ll
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-175.png"
	width="393"
	height="94"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-175_hu_e0da57f4e0d2b1c6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-175_hu_b14aef8e6e68893a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="418"
		data-flex-basis="1003px"
	
></p>
<p>发现该目录下并没有文件</p>
<ul>
<li>
<p>原因：新版本tomcat，将文件放在了<code>webapps.dist</code>目录下</p>
</li>
<li>
<p>解决方法：删除webapps目录，并将webapps.dist 目录重命名为webapps</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">rm -r webapps
</span></span><span class="line"><span class="cl">mv webapps.dist/ webapps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-176.png"
	width="495"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-176_hu_3b30764f3614a619.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-176_hu_b0a7aac01ffef7a7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="990"
		data-flex-basis="2376px"
	
></p>
<ul>
<li><code>ctrl+f5</code>强制刷新页面</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-177.png"
	width="1043"
	height="725"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-177_hu_88d4bdf5556dc577.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-177_hu_19f2da990b512f65.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="143"
		data-flex-basis="345px"
	
></p>
<h4 id="免修改版">免修改版
</h4><ul>
<li>删除最新版容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker stop t1
</span></span><span class="line"><span class="cl">docker rm -f t1
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-178.png"
	width="293"
	height="65"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-178_hu_fccc42cd55ab55ee.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-178_hu_53e87215d55021e1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="450"
		data-flex-basis="1081px"
	
></p>
<ul>
<li>下载免修改版</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull billygoo/tomcat8-jdk8
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-179.png"
	width="643"
	height="287"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-179_hu_f86c61738bd9b5ce.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-179_hu_dbe48417d0bbbe63.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="224"
		data-flex-basis="537px"
	
></p>
<ul>
<li>运行免修改版</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d -p 8080:8080 --name mytomcat8 billygoo/tomcat8-jdk8
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-180.png"
	width="686"
	height="48"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-180_hu_a2bc93b42cf9d04.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-180_hu_1f9c5122d3927fa3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1429"
		data-flex-basis="3430px"
	
></p>
<ul>
<li>使用浏览器打开</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-181.png"
	width="1048"
	height="735"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-181_hu_746abc1add19ea00.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-181_hu_8fac130c09052e3b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="142"
		data-flex-basis="342px"
	
></p>
<h3 id="安装mysql">安装mysql
</h3><h4 id="docker-hub上查找mysql镜像">docker hub上查找mysql镜像
</h4><h4 id="从docker-hub上阿里云加速器拉取mysql镜像到本地标签为57">从docker hub上（阿里云加速器）拉取mysql镜像到本地标签为5.7
</h4><ul>
<li>拉取mysql:5.7镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-182.png"
	width="655"
	height="243"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-182_hu_b619e490e41b10be.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-182_hu_f0c120dff6cbf181.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="269"
		data-flex-basis="646px"
	
></p>
<h4 id="使用mysql57镜像创建容器运行容器">使用mysql5.7镜像创建容器（运行容器）
</h4><h5 id="简单版">简单版
</h5><ul>
<li>运行容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-183.png"
	width="694"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-183_hu_f97416be2854c07d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-183_hu_846174ca11268813.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1388"
		data-flex-basis="3331px"
	
></p>
<ul>
<li>查看容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker ps
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-184.png"
	width="1345"
	height="127"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-184_hu_b6f9f6857092158b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-184_hu_7d2ed798a80d4a5c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1059"
		data-flex-basis="2541px"
	
></p>
<ul>
<li>进入mysql容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it 6ffc4c39b796 /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-185.png"
	width="473"
	height="40"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-185_hu_f32b1d04bb8bc286.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-185_hu_be4b39f05756d25b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1182"
		data-flex-basis="2838px"
	
></p>
<ul>
<li>进入mysql</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mysql -uroot -p123456
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-186.png"
	width="648"
	height="241"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-186_hu_21ae88ef61a82df6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-186_hu_fbc6de51edb31af2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="268"
		data-flex-basis="645px"
	
></p>
<ul>
<li>查看数据库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">show databases;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-187.png"
	width="207"
	height="187"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-187_hu_961140f56eff5783.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-187_hu_4b5fc47ffad7f202.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="110"
		data-flex-basis="265px"
	
></p>
<ul>
<li>创建数据库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">create database db01;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-188.png"
	width="294"
	height="42"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-188_hu_b058fc501ed0ea91.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-188_hu_7def91509815dbd2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="700"
		data-flex-basis="1680px"
	
></p>
<ul>
<li>使用数据库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">use db01;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-189.png"
	width="141"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-189_hu_220f4c174c94fadf.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-189_hu_69ec5dba13bab660.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="282"
		data-flex-basis="676px"
	
></p>
<ul>
<li>创建表</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">create</span> <span class="n">table</span> <span class="n">t1</span><span class="p">(</span><span class="n">id</span> <span class="ne">int</span><span class="p">,</span><span class="n">name</span> <span class="n">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-190.png"
	width="392"
	height="32"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-190_hu_6e7060fdddd8ea0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-190_hu_ef630d7571d5c36.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1225"
		data-flex-basis="2940px"
	
></p>
<ul>
<li>插入数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">insert into t1 values(1,&#39;z3&#39;);
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-191.png"
	width="307"
	height="35"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-191_hu_c10a3f384ea4289d.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-191_hu_90308625376cc630.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="877"
		data-flex-basis="2105px"
	
></p>
<ul>
<li>查询数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from t1;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-192.png"
	width="215"
	height="108"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-192_hu_f6132221e9a087f1.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-192_hu_f7c6f46398239317.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="199"
		data-flex-basis="477px"
	
></p>
<p><strong>使用navicat连接mysql</strong></p>
<ul>
<li>点击连接选择mysql</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-193.png"
	width="239"
	height="303"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-193_hu_a22f8117c8813104.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-193_hu_75679a6e03f92627.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="78"
		data-flex-basis="189px"
	
></p>
<ul>
<li>输入连接名，主机ip和密码，并点击测试连接</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-194.png"
	width="562"
	height="707"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-194_hu_4f18134f64c2d8f6.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-194_hu_6a0f3bc842cc1920.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="79"
		data-flex-basis="190px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-195.png"
	width="341"
	height="380"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-195_hu_4a5995d5b98f0545.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-195_hu_c5db3b8baa99d7bf.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="89"
		data-flex-basis="215px"
	
></p>
<ul>
<li>点击确定，连接mysql</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-196.png"
	width="259"
	height="243"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-196_hu_f7c89e966db2b1f3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-196_hu_bb27d1248ebcba66.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="106"
		data-flex-basis="255px"
	
></p>
<ul>
<li>右键db01数据库，点击新建查询</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-197.png"
	width="289"
	height="437"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-197_hu_e3d48005650eb773.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-197_hu_b1928866541e342e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="66"
		data-flex-basis="158px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-198.png"
	width="517"
	height="224"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-198_hu_a50fc76d169cddd3.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-198_hu_42c96d1eebd6e559.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="230"
		data-flex-basis="553px"
	
></p>
<p>可以在查询界面，实现sql操作</p>
<ul>
<li>查询t1表，并插入数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;li4&#39;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;王五&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-199.png"
	width="559"
	height="403"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-199_hu_a5fa403e7b54341f.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-199_hu_7f07860b93e66c0e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="138"
		data-flex-basis="332px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-200.png"
	width="658"
	height="415"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-200_hu_32537fbb1df38d57.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-200_hu_4d29ab9b3ecb3e2c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="158"
		data-flex-basis="380px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-201.png"
	width="226"
	height="128"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-201_hu_312bce4cf5545744.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-201_hu_b94c06ca1cbd1fa0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="176"
		data-flex-basis="423px"
	
></p>
<p><strong>问题一：插入中文数据后报错</strong></p>
<ul>
<li>插入带中文的数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;王五&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-202.png"
	width="895"
	height="389"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-202_hu_eda96ea36ecc3801.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-202_hu_1fcc1e0f75662420.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="230"
		data-flex-basis="552px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">报错信息：1366 - Incorrect string value: &#39;\xE7\x8E\x8B\xE4\xBA\x94&#39; for column &#39;name&#39; at row 1
</span></span></code></pre></td></tr></table>
</div>
</div><p>原因：docker上默认字符集编码隐患</p>
<ul>
<li>在mysql容器里查看字符集</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">SHOW VARIABLES LIKE &#39;character%&#39;;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-203.png"
	width="473"
	height="215"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-203_hu_6ccb716347be3981.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-203_hu_83028b3e58e02088.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="220"
		data-flex-basis="528px"
	
></p>
<ul>
<li>不建议在navicat中执行，他会自动将一些客户端设置成utf8mb4</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-204.png"
	width="586"
	height="571"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-204_hu_67dbc0446f1613cf.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-204_hu_8555c321168bf76d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="102"
		data-flex-basis="246px"
	
></p>
<p><strong>问题二：删除容器后，里面的mysql数据怎么办</strong></p>
<h5 id="实战版">实战版
</h5><ul>
<li>删除数据库</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker rm -f 6ffc4c39b796
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>新建mysql容器实例</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3306</span><span class="p">:</span><span class="mi">3306</span> <span class="o">--</span><span class="n">privileged</span><span class="o">=</span><span class="bp">true</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="nb">log</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">mysql</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">data</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">conf</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span><span class="n">e</span> <span class="n">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="mi">123456</span> <span class="o">--</span><span class="n">name</span> <span class="n">mysql</span> <span class="n">mysql</span><span class="p">:</span><span class="mf">5.7</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-209.png"
	width="1323"
	height="44"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-209_hu_e3775b9be47177a1.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-209_hu_5c02569a01596e8d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="3006"
		data-flex-basis="7216px"
	
></p>
<ul>
<li>新建my.cnf，解决无法输入中文问题</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 进入配置文件目录
</span></span><span class="line"><span class="cl">cd /yline/mysql/conf
</span></span><span class="line"><span class="cl"># 查看当前目录下的文件
</span></span><span class="line"><span class="cl">ls
</span></span><span class="line"><span class="cl"># 创建并编辑my.cnf文件
</span></span><span class="line"><span class="cl">vim my.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-206.png"
	width="337"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-206_hu_a7f52782ffadc0fa.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-206_hu_2e04e09a2e37f6cc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="674"
		data-flex-basis="1617px"
	
></p>
<p><code>my.cnf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[client]
</span></span><span class="line"><span class="cl">default_character_set=utf8mb4
</span></span><span class="line"><span class="cl">[mysqld]
</span></span><span class="line"><span class="cl">collation_server=utf8mb4_general_ci
</span></span><span class="line"><span class="cl">character_set_server=utf8mb4
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-208.png"
	width="303"
	height="179"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-208_hu_c4c010a4f03c8ee1.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-208_hu_5b3d456ed4e5f02c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="169"
		data-flex-basis="406px"
	
></p>
<ul>
<li>查阅配置文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat my.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-207.png"
	width="293"
	height="110"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-207_hu_ed5202a0b1fe615b.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-207_hu_ddf5ffdb10e4c48e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="266"
		data-flex-basis="639px"
	
></p>
<ul>
<li>重新启动mysql容器实例再重新进入并查看字符编码</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 重启mysql
</span></span><span class="line"><span class="cl">docker restart mysql
</span></span><span class="line"><span class="cl"># 进入mysql容器
</span></span><span class="line"><span class="cl">docker exec -it mysql /bin/bash
</span></span><span class="line"><span class="cl"># 进入mysql
</span></span><span class="line"><span class="cl">mysql -uroot -p123456
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-210.png"
	width="645"
	height="304"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-210_hu_1520d35cc38970fd.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-210_hu_5ba14a62c29fe7d4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="509px"
	
></p>
<ul>
<li>在新建库新建表，插入中文测试</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">#</span><span class="w"> </span><span class="err">字符集编码格式</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SHOW</span><span class="w"> </span><span class="n">VARIABLES</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;character%&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">创建</span><span class="n">db01数据库</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">使用</span><span class="n">db01数据库</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">db01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">创建</span><span class="n">t1表</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="n">name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">#</span><span class="w"> </span><span class="err">插入数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;z3&#39;</span><span class="p">)</span><span class="err">；</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;王五&#39;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-211.png"
	width="468"
	height="220"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-211_hu_fe1e2a2ca5be38c2.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-211_hu_d1540b69bfcdfa71.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="510px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-212.png"
	width="404"
	height="162"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-212_hu_8c549011d582ce75.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-212_hu_5b5ba640f36d77e1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="249"
		data-flex-basis="598px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-213.png"
	width="939"
	height="309"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-213_hu_4e09414de6c762bc.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-213_hu_e0cc87f0d6051d69.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="303"
		data-flex-basis="729px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-214.png"
	width="209"
	height="124"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-214_hu_10e8ffb24aa27c99.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-214_hu_1591181a5619b9e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="168"
		data-flex-basis="404px"
	
></p>
<ul>
<li>删除mysql，并再次启动</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="c1"># 删除mysql数据库</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">rm</span> <span class="o">-</span><span class="n">f</span> <span class="n">mysql</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 新建mysql</span>
</span></span><span class="line"><span class="cl"><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3306</span><span class="p">:</span><span class="mi">3306</span> <span class="o">--</span><span class="n">privileged</span><span class="o">=</span><span class="bp">true</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="nb">log</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">mysql</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">data</span><span class="p">:</span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">mysql</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">yline</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">conf</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">mysql</span><span class="o">/</span><span class="n">conf</span><span class="o">.</span><span class="n">d</span> <span class="o">-</span><span class="n">e</span> <span class="n">MYSQL_ROOT_PASSWORD</span><span class="o">=</span><span class="mi">123456</span> <span class="o">--</span><span class="n">name</span> <span class="n">mysql</span> <span class="n">mysql</span><span class="p">:</span><span class="mf">5.7</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-215.png"
	width="339"
	height="64"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-215_hu_2472a1840e16d389.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-215_hu_df8dc824ade46d1d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="529"
		data-flex-basis="1271px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-216.png"
	width="1323"
	height="45"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-216_hu_99d569aa853a12b8.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-216_hu_13823b55aa4f8c5a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="2940"
		data-flex-basis="7056px"
	
></p>
<ul>
<li>进入mysql查询数据</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 进入mysql容器
</span></span><span class="line"><span class="cl">docker exec -it mysql /bin/bash
</span></span><span class="line"><span class="cl"># 进入mysql
</span></span><span class="line"><span class="cl">mysql -uroot -p123456
</span></span><span class="line"><span class="cl"># 查询数据库
</span></span><span class="line"><span class="cl">show databases;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-217.png"
	width="661"
	height="438"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-217_hu_a5ff17d7a3ed6521.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-217_hu_b5d1f9c139569815.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="150"
		data-flex-basis="362px"
	
></p>
<ul>
<li>进入db01库，并查看数据是否还在</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">use db01;
</span></span><span class="line"><span class="cl">show tables;
</span></span><span class="line"><span class="cl">select * from t1;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-218.png"
	width="544"
	height="327"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-218_hu_2727d9c67586f9b4.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-218_hu_2071d0441a9b28.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="166"
		data-flex-basis="399px"
	
></p>
<ul>
<li>结论</li>
</ul>
<blockquote>
<p>假如将当前容器实例删除，再重新来一次，之前建的db01实例和建的表数据都还存在。</p>
</blockquote>
<h3 id="安装redis">安装redis
</h3><ul>
<li>拉取redis镜像</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull redis:6.0.8
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-219.png"
	width="647"
	height="181"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-219_hu_76d377bf14aa80e0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-219_hu_18663bc439f249d0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="357"
		data-flex-basis="857px"
	
></p>
<ul>
<li>在宿主机下新建目录/app/redis</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mkdir -p /app/redis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-220.png"
	width="328"
	height="38"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-220_hu_a878abe23629ebb5.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-220_hu_29fbf0b964cb649e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="863"
		data-flex-basis="2071px"
	
></p>
<ul>
<li>上传原始的redis.conf文件到/app/redis目录下</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /app/redis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-221.png"
	width="541"
	height="150"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-221_hu_c2c0855695fa6f43.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-221_hu_3b1b698f3a0ada52.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="360"
		data-flex-basis="865px"
	
></p>
<ul>
<li>修改redis.conf文件</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># 开启redis验证 （可选）
</span></span><span class="line"><span class="cl">requirepass 123456
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 注释掉bind 127.0.0.1 ，表示允许redis外地连接
</span></span><span class="line"><span class="cl"># bind 127.0.0.1 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 将daemonize yes注释起来或者 设置 daemonize no，因为该配置和docker run中-d参数冲突，会导致容器一直启动失败
</span></span><span class="line"><span class="cl">daemonize no
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 开启redis数据持久化 appendonly yes （可选）
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-222.png"
	width="255"
	height="93"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-222_hu_a3e31aa2b8c7f042.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-222_hu_4b67a59b530561c3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="274"
		data-flex-basis="658px"
	
></p>
<p>redis 验证我就不开启了</p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-223.png"
	width="270"
	height="69"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-223_hu_1eda1e32370c8ca0.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-223_hu_1c64a8924d8681b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="391"
		data-flex-basis="939px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-224.png"
	width="208"
	height="86"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-224_hu_d41743ffd288a285.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-224_hu_be4b60a315820e8c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="241"
		data-flex-basis="580px"
	
></p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-225.png"
	width="127"
	height="61"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-225_hu_efe98cfe4b292426.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-225_hu_b1b2d0a1eaaccf55.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="208"
		data-flex-basis="499px"
	
></p>
<ul>
<li>运行redis</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker run -d -p 6379:6379 --name myredis --privileged=true -v /app/redis/redis.conf:/etc/redis/redis.conf -v /app/redis/data:/data -d redis:6.0.8 redis-server /etc/redis/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-226.png"
	width="1102"
	height="62"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-226_hu_2866a5360027b88e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-226_hu_5b03941bb089cbc6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1777"
		data-flex-basis="4265px"
	
></p>
<h4 id="验证宿主机redisconf是否生效">验证宿主机redis.conf是否生效
</h4><ul>
<li>进入redis容器</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it myredis /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-227.png"
	width="462"
	height="38"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-227_hu_1af12ac7f9e3326a.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-227_hu_3861534951e7abe4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1215"
		data-flex-basis="2917px"
	
></p>
<ul>
<li>使用redis-cli连接redis</li>
</ul>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-228.png"
	width="285"
	height="38"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-228_hu_771414f98823b228.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-228_hu_8e81a494bbd43828.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="750"
		data-flex-basis="1800px"
	
></p>
<ul>
<li>选择数据库15</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select 15
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-229.png"
	width="217"
	height="52"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-229_hu_d36e8ae60522b83e.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-229_hu_5df2a3be3ab3da25.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="417"
		data-flex-basis="1001px"
	
></p>
<ul>
<li>在宿主机修改redis.conf</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /app/redis/redis.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-230.png"
	width="237"
	height="107"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-230_hu_62ba4d11e7b998bf.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-230_hu_b4f485d0de33a70e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="221"
		data-flex-basis="531px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">databases 10
</span></span></code></pre></td></tr></table>
</div>
</div><p>修改成databases 10，并保存</p>
<p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-231.png"
	width="299"
	height="105"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-231_hu_22d664a50a24c85c.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-231_hu_7330d679598edaf2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="284"
		data-flex-basis="683px"
	
></p>
<ul>
<li>重启redis</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker restart myredis
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-232.png"
	width="384"
	height="50"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-232_hu_95354a85b3a392de.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-232_hu_f6a945c90bb96891.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="768"
		data-flex-basis="1843px"
	
></p>
<ul>
<li>再次进入测试</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker exec -it myredis /bin/bash
</span></span><span class="line"><span class="cl">redis-cli
</span></span><span class="line"><span class="cl">select 15
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/centosdocker%E5%9F%BA%E7%A1%80/image-233.png"
	width="465"
	height="78"
	srcset="/p/centosdocker%E5%9F%BA%E7%A1%80/image-233_hu_76218afd197cbbea.png 480w, /p/centosdocker%E5%9F%BA%E7%A1%80/image-233_hu_16c6c2bc09126ac.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="596"
		data-flex-basis="1430px"
	
></p>
<p>此时可以看到，数据库15已经超出了选择范围</p>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2025 リンボの個人ブログ
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
