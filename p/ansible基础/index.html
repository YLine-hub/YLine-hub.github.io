<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="AnsibleåŸºç¡€ è§‚çœ‹çš„æ•™ç¨‹ï¼šansibleå…¥é—¨åˆ°ç²¾é€š\nå®‰è£… å®‰è£…æ•™ç¨‹ï¼š[Ansible]å®‰è£…\nAnsibleæ‰§è¡Œè¿‡ç¨‹ ç”¨æˆ·å‘å‡ºAnsibleå‘½ä»¤ï¼ˆAd-Hocæˆ–Playbookï¼‰\n">
<title>[Ansible]åŸºç¡€</title>

<link rel='canonical' href='https://YLine-hub.github.io/p/ansible%E5%9F%BA%E7%A1%80/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="[Ansible]åŸºç¡€">
<meta property='og:description' content="AnsibleåŸºç¡€ è§‚çœ‹çš„æ•™ç¨‹ï¼šansibleå…¥é—¨åˆ°ç²¾é€š\nå®‰è£… å®‰è£…æ•™ç¨‹ï¼š[Ansible]å®‰è£…\nAnsibleæ‰§è¡Œè¿‡ç¨‹ ç”¨æˆ·å‘å‡ºAnsibleå‘½ä»¤ï¼ˆAd-Hocæˆ–Playbookï¼‰\n">
<meta property='og:url' content='https://YLine-hub.github.io/p/ansible%E5%9F%BA%E7%A1%80/'>
<meta property='og:site_name' content='ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-12-31T20:35:46&#43;08:00'/><meta property='article:modified_time' content='2025-12-31T20:35:46&#43;08:00'/>
<meta name="twitter:title" content="[Ansible]åŸºç¡€">
<meta name="twitter:description" content="AnsibleåŸºç¡€ è§‚çœ‹çš„æ•™ç¨‹ï¼šansibleå…¥é—¨åˆ°ç²¾é€š\nå®‰è£… å®‰è£…æ•™ç¨‹ï¼š[Ansible]å®‰è£…\nAnsibleæ‰§è¡Œè¿‡ç¨‹ ç”¨æˆ·å‘å‡ºAnsibleå‘½ä»¤ï¼ˆAd-Hocæˆ–Playbookï¼‰\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_de528bff5d5e9598.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ–ï¸</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°</a></h1>
            <h2 class="site-description">åŠªåŠ›ä¸ä¸€å®šèƒ½è·å¾—å›æŠ¥ï¼Œä½†ä¸åŠªåŠ›ä¸€å®šä¸ä¼šæœ‰å›æŠ¥ã€‚</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#å®‰è£…">å®‰è£…</a></li>
    <li><a href="#ansibleæ‰§è¡Œè¿‡ç¨‹">Ansibleæ‰§è¡Œè¿‡ç¨‹</a></li>
    <li><a href="#å‰ç½®">å‰ç½®</a>
      <ol>
        <li><a href="#ç¯å¢ƒ">ç¯å¢ƒ</a></li>
        <li><a href="#è®¾ç½®ä¸»æ§ç«¯åç§°ä¸ºansible">è®¾ç½®ä¸»æ§ç«¯åç§°ä¸ºansible</a></li>
      </ol>
    </li>
    <li><a href="#ansibleç›¸å…³æ–‡ä»¶">Ansibleç›¸å…³æ–‡ä»¶</a>
      <ol>
        <li><a href="#é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶</a></li>
        <li><a href="#ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶">ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶</a>
          <ol>
            <li><a href="#å¯ç”¨æ—¥å¿—">å¯ç”¨æ—¥å¿—</a></li>
          </ol>
        </li>
        <li><a href="#inventoryä¸»æœºæ¸…å•">inventoryä¸»æœºæ¸…å•</a>
          <ol>
            <li><a href="#ä¸»æœºæ¸…å•æ–‡ä»¶æ ¼å¼">ä¸»æœºæ¸…å•æ–‡ä»¶æ ¼å¼</a></li>
            <li><a href="#é…ç½®ä¸»æœºæ¸…å•">é…ç½®ä¸»æœºæ¸…å•</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ansibleç›¸å…³å·¥å…·">Ansibleç›¸å…³å·¥å…·</a>
      <ol>
        <li><a href="#ansible-doc">ansible-doc</a></li>
        <li><a href="#ansible">ansible</a>
          <ol>
            <li><a href="#å…³é—­æ£€æŸ¥æœåŠ¡å™¨çš„host_key">å…³é—­æ£€æŸ¥æœåŠ¡å™¨çš„host_key</a></li>
            <li><a href="#è¾“å…¥å¯†ç è¿æ¥å¹¶ä½¿ç”¨pingæ¨¡å—">è¾“å…¥å¯†ç è¿æ¥ï¼Œå¹¶ä½¿ç”¨pingæ¨¡å—</a></li>
            <li><a href="#ä½¿ç”¨keyéªŒè¯è¿æ¥">ä½¿ç”¨keyéªŒè¯è¿æ¥</a></li>
            <li><a href="#æŸ¥çœ‹ansibleç®¡ç†çš„ä¸»æœº">æŸ¥çœ‹ansibleç®¡ç†çš„ä¸»æœº</a></li>
            <li><a href="#ä½¿ç”¨ç”¨æˆ·è¿æ¥æµ‹è¯•pingæ¨¡å—">ä½¿ç”¨ç”¨æˆ·è¿æ¥ï¼Œæµ‹è¯•pingæ¨¡å—</a></li>
            <li><a href="#æ”¯æŒé€šé…ç¬¦">æ”¯æŒé€šé…ç¬¦</a></li>
            <li><a href="#ansibleæ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹">ansibleæ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹</a></li>
            <li><a href="#æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹">æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹</a></li>
            <li><a href="#ansibleæ‰§è¡ŒçŠ¶æ€">ansibleæ‰§è¡ŒçŠ¶æ€</a></li>
            <li><a href="#ansibleä½¿ç”¨èŒƒä¾‹">ansibleä½¿ç”¨èŒƒä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#ansible-galaxy">ansible-galaxy</a>
          <ol>
            <li><a href="#æŸ¥æ‰¾mysqlå¹¶ä¸‹è½½">æŸ¥æ‰¾mysqlå¹¶ä¸‹è½½</a></li>
            <li><a href="#èŒƒä¾‹">èŒƒä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#ansible-pull">ansible-pull</a></li>
        <li><a href="#ansible-playbook">ansible-playbook</a>
          <ol>
            <li><a href="#èŒƒä¾‹-1">èŒƒä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#ansible-vault">ansible-vault</a>
          <ol>
            <li><a href="#æ ¼å¼">æ ¼å¼</a></li>
            <li><a href="#ç¤ºä¾‹">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#ansible-console">ansible-console</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-1">ç¤ºä¾‹</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ansibleå¸¸ç”¨æ¨¡å—">Ansibleå¸¸ç”¨æ¨¡å—</a>
      <ol>
        <li><a href="#commandæ¨¡å—">Commandæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-2">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#shellæ¨¡å—">Shellæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-3">ç¤ºä¾‹</a></li>
            <li><a href="#å°†shellæ¨¡å—ä»£æ›¿commandè®¾ç½®ä¸ºé»˜è®¤æ¨¡å—">å°†shellæ¨¡å—ä»£æ›¿commandï¼Œè®¾ç½®ä¸ºé»˜è®¤æ¨¡å—</a></li>
          </ol>
        </li>
        <li><a href="#scriptæ¨¡å—">Scriptæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-4">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#copyæ¨¡å—">Copyæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-5">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#fetchæ¨¡å—">Fetchæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-6">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#fileæ¨¡å—">Fileæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-7">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#unarchiveæ¨¡å—">Unarchiveæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-8">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#archiveæ¨¡å—">Archiveæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-9">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#hostnameæ¨¡å—">Hostnameæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-10">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#cronæ¨¡å—">Cronæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-11">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#yumæ¨¡å—">Yumæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-12">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#serviceæ¨¡å—">Serviceæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-13">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#useræ¨¡å—">Useræ¨¡å—</a></li>
        <li><a href="#groupæ¨¡å—">Groupæ¨¡å—</a></li>
        <li><a href="#lineinfileæ¨¡å—">Lineinfileæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-14">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#replaceæ¨¡å—">Replaceæ¨¡å—</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-15">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#setupæ¨¡å—">Setupæ¨¡å—</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/ansible/" >
                Ansible
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/ansible%E5%9F%BA%E7%A1%80/">[Ansible]åŸºç¡€</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-12-31</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="ansibleåŸºç¡€">AnsibleåŸºç¡€
</h1><p>è§‚çœ‹çš„æ•™ç¨‹ï¼š<a class="link" href="https://www.bilibili.com/video/BV1HZ4y1p7Bf?spm_id_from=333.788.player.switch&amp;vd_source=249f56cf6ada7a6e3be8673111e8885a"  target="_blank" rel="noopener"
    >ansibleå…¥é—¨åˆ°ç²¾é€š</a></p>
<h2 id="å®‰è£…">å®‰è£…
</h2><p>å®‰è£…æ•™ç¨‹ï¼š<a class="link" href="https://yline-hub.github.io/p/ansible%E5%AE%89%E8%A3%85/"  target="_blank" rel="noopener"
    >[Ansible]å®‰è£…</a></p>
<h2 id="ansibleæ‰§è¡Œè¿‡ç¨‹">Ansibleæ‰§è¡Œè¿‡ç¨‹
</h2><ol>
<li>
<p>ç”¨æˆ·å‘å‡º<code>Ansible</code>å‘½ä»¤ï¼ˆ<code>Ad-Hoc</code>æˆ–<code>Playbook</code>ï¼‰</p>
</li>
<li>
<p><code>Ansible</code>ä¸»ç¨‹åºåŠ è½½è‡ªå·±çš„é…ç½®æ–‡ä»¶<code>/etc/ansible/ansible.cfg</code></p>
</li>
<li>
<p>è¯»å–ä¸»æœºæ¸…å•ä¸­çš„è®¾å¤‡<code>IP</code>æˆ–åŸŸååŠå˜é‡</p>
</li>
<li>
<p>è°ƒç”¨<code>Ansible</code>å‘½ä»¤ä¸­çš„æŒ‡å®šçš„æ¨¡å—ï¼Œé€šè¿‡<code>Ansible</code>å°†æ¨¡å—å‚æ•°ç”Ÿæˆå¯¹åº”çš„ä¸´æ—¶<code>python</code>è„šæœ¬ï¼Œä¼ è¾“è‡³ç›®æ ‡æœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p>å¯¹åº”ç›®æ ‡ä¸»æœºå’Œæ‰§è¡Œç”¨æˆ·çš„å®¶ç›®æ ‡ä¸­å‡ºç°<code>.ansible/tmp/xxx/xxx.py</code>æ–‡ä»¶ï¼Œç»™æ”¹æ–‡ä»¶èµ‹äºˆå¯æ‰§è¡Œæƒé™ã€‚æ‰§è¡Œè¯¥è„šæœ¬å¹¶è¿”å›ç»“æœã€‚</p>
</li>
</ol>
<h2 id="å‰ç½®">å‰ç½®
</h2><h3 id="ç¯å¢ƒ">ç¯å¢ƒ
</h3><ul>
<li>
<p>ä¸»æ§ç«¯1å°(å®‰è£…ansible)</p>
<ul>
<li>172.16.140.105</li>
</ul>
</li>
<li>
<p>è¢«æ§ç«¯3å°</p>
<ul>
<li>172.16.140.111</li>
<li>172.16.140.112</li>
<li>172.16.140.113</li>
</ul>
</li>
</ul>
<h3 id="è®¾ç½®ä¸»æ§ç«¯åç§°ä¸ºansible">è®¾ç½®ä¸»æ§ç«¯åç§°ä¸ºansible
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">hostname ansible
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image.png"
	width="558"
	height="92"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image_hu_8457f9e0bd6d2e1e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image_hu_1f015484e32b56c5.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="606"
		data-flex-basis="1455px"
	
></p>
<p>é€€å‡ºé‡æ–°è¿›å…¥åï¼Œä¸»æœºåä¿®æ”¹ä¸ºäº†ansible</p>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-1.png"
	width="344"
	height="76"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-1_hu_cc33eb83fe4874fe.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-1_hu_10f7e787d62ec631.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="452"
		data-flex-basis="1086px"
	
></p>
<h2 id="ansibleç›¸å…³æ–‡ä»¶">Ansibleç›¸å…³æ–‡ä»¶
</h2><h3 id="é…ç½®æ–‡ä»¶">é…ç½®æ–‡ä»¶
</h3><ul>
<li>/etc/ansible/ansible.cfg  ä¸»é…ç½®æ–‡ä»¶ï¼Œé…ç½®ansibleå·¥ä½œç‰¹æ€§</li>
<li>/etc/ansible/hosts        ä¸»æœºæ¸…å•</li>
<li>/etc/ansible/roles        å­˜æ”¾è§’è‰²ç›®å½•</li>
</ul>
<h3 id="ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶">ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶
</h3><ol>
<li>æŸ¥çœ‹<code>/etc/ansible/ansible.cfg</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat /etc/ansible/ansible.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Since Ansible 2.12 (core):
</span></span><span class="line"><span class="cl"># To generate an example config file (a &#34;disabled&#34; one with all default settings, commented out):
</span></span><span class="line"><span class="cl">#               $ ansible-config init --disabled &gt; ansible.cfg
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl"># Also you can now have a more complete file by including existing plugins:
</span></span><span class="line"><span class="cl"># ansible-config init --disabled -t all &gt; ansible.cfg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># For previous versions of Ansible you can check for examples in the &#39;stable&#39; branches of each version
</span></span><span class="line"><span class="cl"># Note that this file was always incomplete  and lagging changes to configuration settings
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># for example, for 2.9: https://github.com/ansible/ansible/blob/stable-2.9/examples/ansible.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-config init --disabled &gt; ansible.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-2.png"
	width="986"
	height="104"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-2_hu_5d56b17733b28cbe.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-2_hu_213bd464af43b271.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="948"
		data-flex-basis="2275px"
	
></p>
<ol start="3">
<li>æŸ¥çœ‹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat /etc/ansible/ansible.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-3.png"
	width="2880"
	height="1580"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-3_hu_5b6edeff9163436d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-3_hu_d1d1e89d3d15a5e0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">[</span><span class="n">defaults</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="c1">#inventory = /etc/ansible/hosts     # ä¸»æœºåˆ—è¡¨é…ç½®æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl"><span class="c1">#library = /usr/share/my_modules    # åº“æ–‡ä»¶å­˜æ”¾ç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="c1">#remote_tmp = $HOME/.ansible/tmp    # ä¸´æ—¶pyå‘½ä»¤æ–‡ä»¶å­˜æ”¾åœ¨è¿œç¨‹ä¸»æœºç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="c1">#local_tmp =$HOME/.ansible/tmp      # æœ¬æœºä¸´æ—¶å‘½ä»¤æ‰§è¡Œç›®å½•</span>
</span></span><span class="line"><span class="cl"><span class="c1">#forks = 5                          # é»˜è®¤å¹¶å‘æ•°</span>
</span></span><span class="line"><span class="cl"><span class="c1">#sudo_user = root                   # é»˜è®¤sudoç”¨æˆ·</span>
</span></span><span class="line"><span class="cl"><span class="c1">#ask_sudo_pass = True               # æ¯æ¬¡æ‰§è¡Œansibleå‘½ä»¤æ˜¯å¦æŸ¥è¯¢sshå¯†ç </span>
</span></span><span class="line"><span class="cl"><span class="c1">#ask_pass = True                    # </span>
</span></span><span class="line"><span class="cl"><span class="c1">#remote_port = 22                   # </span>
</span></span><span class="line"><span class="cl"><span class="c1">#host_key_checking = False          # æ£€æŸ¥å¯¹åº”æœåŠ¡å™¨çš„host_keyï¼Œå»ºè®®å–æ¶ˆæ³¨é‡Š</span>
</span></span><span class="line"><span class="cl"><span class="c1">#log_path = /var/log/ansible.log    # æ—¥å¿—æ–‡ä»¶ï¼Œå»ºè®®å¯ç”¨</span>
</span></span><span class="line"><span class="cl"><span class="c1">#module_name = command              # é»˜è®¤æ¨¡å—ï¼Œå¯ä»¥ä¿®æ”¹ä¸ºshellæ¨¡å—</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å¯ç”¨æ—¥å¿—">å¯ç”¨æ—¥å¿—
</h4><ul>
<li>è®¾ç½®æ—¥å¿—æ–‡ä»¶ï¼Œæ²¡è®¾ç½®çš„è¯å°±æ˜¯ä¸å¯ç”¨</li>
</ul>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-15.png"
	width="1284"
	height="98"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-15_hu_f1d6dc2cb76972e8.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-15_hu_9ac62364bee17e1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1310"
		data-flex-basis="3144px"
	
></p>
<p><font color=red>æ³¨æ„ï¼šè¿™é‡Œå­—ä½“é¢œè‰²å˜åŒ–ï¼Œæ˜¯å› ä¸ºæˆ‘å®‰è£…äº†vim</font></p>
<ul>
<li>å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æ²¡æœ‰æ—¥å¿—æ–‡ä»¶</li>
</ul>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-5.png"
	width="960"
	height="106"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-5_hu_59220a59ec5214b4.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-5_hu_6124c295bcfd4380.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="905"
		data-flex-basis="2173px"
	
></p>
<h3 id="inventoryä¸»æœºæ¸…å•">inventoryä¸»æœºæ¸…å•
</h3><p>ansibleçš„ä¸»è¦åŠŸç”¨åœ¨äºæ‰¹é‡ä¸»æœºæ“ä½œï¼Œä¸ºäº†ä¾¿æ·åœ°ä½¿ç”¨å…¶ä¸­çš„éƒ¨åˆ†ä¸»æœºï¼Œå¯ä»¥åœ¨inventory fileä¸­å°†å…¶åˆ†ç»„å‘½åã€‚
é»˜è®¤çš„inventory fileä¸º<code>/etc/ansible/hosts</code>ã€‚
inventory fileå¯ä»¥æœ‰å¤šä¸ªï¼Œä¸”ä¹Ÿå¯ä»¥é€šè¿‡Dynamic Inventoryæ¥åŠ¨æ€ç”Ÿæˆã€‚</p>
<h4 id="ä¸»æœºæ¸…å•æ–‡ä»¶æ ¼å¼">ä¸»æœºæ¸…å•æ–‡ä»¶æ ¼å¼
</h4><p>inventoryæ–‡ä»¶éµå¾ªINIæ–‡ä»¶é£æ ¼ï¼Œä¸­æ‹¬å·ä¸­çš„å­—ç¬¦ä¸ºç»„åã€‚å¯ä»¥å°†åŒä¸€ä¸ªä¸»æœºåŒæ—¶å½’å¹¶åˆ°å¤šä¸ªä¸åŒçš„ç»„ä¸­ã€‚æ­¤å¤–ï¼Œå½“å¦‚è‹¥ç›®æ ‡ä¸»æœºä½¿ç”¨äº†éé»˜è®¤çš„SSHç«¯å£ï¼Œè¿˜å¯ä»¥åœ¨ä¸»æœºåç§°ä¹‹åä½¿ç”¨å†’å·åŠ ç«¯å£å·æ¥æ ‡æ˜ã€‚å¦‚æœä¸»æœºåç§°éµå¾ªç›¸ä¼¼çš„å‘½åæ¨¡å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åˆ—è¡¨çš„æ–¹å¼æ ‡è¯†å„ä¸»æœºã€‚</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ntp.magedu.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[webservers]
</span></span><span class="line"><span class="cl">www1.magedu.com:222
</span></span><span class="line"><span class="cl">www2.magedu.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[dbservers]
</span></span><span class="line"><span class="cl">db1.magedu.com
</span></span><span class="line"><span class="cl">db2.magedu.com
</span></span><span class="line"><span class="cl">db3.magedu.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[websrvs]
</span></span><span class="line"><span class="cl">www[1:100].example.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[dbsrvs]
</span></span><span class="line"><span class="cl">db-[a:f].example.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[appsrvs]
</span></span><span class="line"><span class="cl">10.0.0.[1:100]   # è¡¨ç¤º10.0.0.1 - 10.0.0.100è¿™ä¸ªèŒƒå›´
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="é…ç½®ä¸»æœºæ¸…å•">é…ç½®ä¸»æœºæ¸…å•
</h4><ul>
<li><code>/etc/ansible/hosts</code></li>
</ul>
<p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[dbsrvs]
</span></span><span class="line"><span class="cl">172.16.140.113
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[websrvs]
</span></span><span class="line"><span class="cl">172.16.140.[112:113]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[appsrvs]
</span></span><span class="line"><span class="cl">172.16.140.[111:113]
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-6.png"
	width="314"
	height="316"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-6_hu_b4f2e9b729bfa190.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-6_hu_d9b74bc3a41f4309.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="99"
		data-flex-basis="238px"
	
></p>
<h2 id="ansibleç›¸å…³å·¥å…·">Ansibleç›¸å…³å·¥å…·
</h2><ul>
<li>/usr/bin/ansible                  ä¸»ç¨‹åºï¼Œä¸´æ—¶å‘½ä»¤æ‰§è¡Œå·¥å…·</li>
<li>/usr/bin/ansible-community</li>
<li>/usr/bin/ansible-config</li>
<li>/usr/bin/ansible-connection</li>
<li>/usr/bin/ansible-console          åŸºäºConsoleç•Œé¢ä¸ç”¨æˆ·äº¤äº’çš„æ‰§è¡Œå·¥å…·</li>
<li>/usr/bin/ansible-doc              æŸ¥çœ‹é…ç½®æ–‡æ¡£ï¼Œæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·</li>
<li>/usr/bin/ansible-galaxy           ä¸‹è½½/ä¸Šä¼ ä¼˜ç§€ä»£ç æˆ–Rolesæ¨¡å—çš„å®˜ç½‘å¹³å°</li>
<li>/usr/bin/ansible-inventory</li>
<li>/usr/bin/ansible-playbook         å®šåˆ¶è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç¼–æ’å‰§æœ¬å·¥å…·</li>
<li>/usr/bin/ansible-pull             è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„å·¥å…·</li>
<li>/usr/bin/ansible-vault            æ–‡ä»¶åŠ å¯†å·¥å…·</li>
</ul>
<h4>åˆ©ç”¨ansibleå®ç°ç®¡ç†çš„ä¸»è¦æ–¹å¼ï¼š</h4>
<ul>
<li>Ad-Hoc å³åˆ©ç”¨ansibleå‘½ä»¤ï¼Œä¸»è¦ç”¨äºä¸´æ—¶å‘½ä»¤ä½¿ç”¨åœºæ™¯</li>
<li>Ansible-playbook ä¸»è¦ç”¨äºé•¿æœŸè§„åˆ’å¥½çš„ï¼Œå¤§å‹é¡¹ç›®çš„åœºæ™¯ï¼Œéœ€è¦æœ‰å‰æœŸçš„è§„åˆ’è¿‡ç¨‹</li>
</ul>
<h3 id="ansible-doc">ansible-doc
</h3><p>æ­¤æ¨¡å—ç”¨æ¥æ˜¾ç¤ºå¸®åŠ©æ¨¡å—</p>
<p>æ ¼å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-doc [option] [module...]
</span></span><span class="line"><span class="cl">-l, --list          # åˆ—å‡ºå¯ç”¨æ¨¡å—
</span></span><span class="line"><span class="cl">-s, --snippet       # æ˜¾ç¤ºæŒ‡å®šæ¨¡å—çš„playbookç‰‡æ®µ
</span></span></code></pre></td></tr></table>
</div>
</div><p>èŒƒä¾‹ï¼š</p>
<ul>
<li>åˆ—å‡ºæ‰€æœ‰æ¨¡å—</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-doc -l
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-7.png"
	width="2880"
	height="1592"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-7_hu_a0a871ab0219c21b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-7_hu_e449607fcc6d5975.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="180"
		data-flex-basis="434px"
	
></p>
<p><code>e</code>:å‘ä¸‹ä¸€è¡Œ
<code>y</code>:å‘ä¸Šä¸€è¡Œ
<code>f</code>:å‘ä¸‹ä¸€é¡µ
<code>b</code>:å‘ä¸Šä¸€é¡µ</p>
<ul>
<li>ç»Ÿè®¡æ¨¡å—æ•°é‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-doc -l | wc -l
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-8.png"
	width="658"
	height="108"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-8_hu_5c20afd066a30b84.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-8_hu_273f82e603db0430.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="609"
		data-flex-basis="1462px"
	
></p>
<ul>
<li>æŸ¥çœ‹æŒ‡å®šæ¨¡å—å¸®åŠ©ç”¨æ³•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-doc ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-9.png"
	width="2880"
	height="1588"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-9_hu_ffd65d1ad998ac60.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-9_hu_69c5c625556411c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="435px"
	
></p>
<ul>
<li>æŸ¥çœ‹æŒ‡å®šæ¨¡å—å¸®åŠ©ç”¨æ³•(ç®€åŒ–)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-doc -s ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-10.png"
	width="2094"
	height="138"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-10_hu_9261496b7b7cf75d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-10_hu_99b4cc9009d30c5c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1517"
		data-flex-basis="3641px"
	
></p>
<h3 id="ansible">ansible
</h3><p>æ­¤å·¥å…·é€šè¿‡sshåè®®ï¼Œå®ç°å¯¹è¿œç¨‹ä¸»æœºçš„é…ç½®ç®¡ç†ã€åº”ç”¨éƒ¨ç½²ã€ä»»åŠ¡æ‰§è¡Œç­‰åŠŸèƒ½ã€‚</p>
<p>å»ºè®®ï¼šä½¿ç”¨æ­¤å·¥å…·å‰ï¼Œå…ˆé…ç½®ansibleä¸»æ§ç«¯èƒ½åŸºäºå¯†é’¥è®¤è¯çš„æ–¹å¼è”ç³»å„ä¸ªè¢«ç®¡ç†èŠ‚ç‚¹ã€‚</p>
<p>èŒƒä¾‹ï¼šåˆ©ç”¨sshpassæ‰¹é‡å®ç°åŸºäºkeyéªŒè¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">root</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span> <span class="o">-</span><span class="n">p</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">NET</span><span class="o">=</span><span class="mf">172.16</span><span class="o">.</span><span class="mi">140</span>
</span></span><span class="line"><span class="cl"><span class="k">export</span> <span class="n">SSHPASS</span><span class="o">=</span><span class="n">magedu</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="ne">IP</span> <span class="ow">in</span> <span class="p">{</span><span class="mf">1.</span><span class="o">.</span><span class="mi">200</span><span class="p">};</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="n">sshpass</span> <span class="o">-</span><span class="n">e</span> <span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span> <span class="o">$</span><span class="n">NET</span><span class="o">.$</span><span class="ne">IP</span>
</span></span><span class="line"><span class="cl"><span class="n">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ ¼å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &lt;host-pattern&gt; [-m module_name] [-a args]
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€‰é¡¹è¯´æ˜ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">--version               # æ˜¾ç¤ºç‰ˆæœ¬
</span></span><span class="line"><span class="cl">-m module               # æŒ‡å®šæ¨¡å—ï¼Œé»˜è®¤ä¸ºcommand
</span></span><span class="line"><span class="cl">-v                      # è¯¦ç»†è¿‡ç¨‹ -vv -vvvæ›´è¯¦ç»†
</span></span><span class="line"><span class="cl">--list-hosts            # æ˜¾ç¤ºä¸»æœºåˆ—è¡¨ï¼Œå¯ç®€å†™ --list
</span></span><span class="line"><span class="cl">-k, --ask-pass          # æç¤ºè¾“å…¥sshè¿æ¥å¯†ç ï¼Œé»˜è®¤keyéªŒè¯
</span></span><span class="line"><span class="cl">-C, --check             # æ£€æŸ¥ï¼Œå¹¶ä¸æ‰§è¡Œ
</span></span><span class="line"><span class="cl">-T, --timeout=TIMEOUT   # æ‰§è¡Œå‘½ä»¤çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤10s
</span></span><span class="line"><span class="cl">-u, --user=REMOTE_USER  # æ‰§è¡Œè¿œç¨‹æ‰§è¡Œçš„ç”¨æˆ·
</span></span><span class="line"><span class="cl">-b, --become            # ä»£æ›¿æ—§ç‰ˆçš„sudo åˆ‡æ¢
</span></span><span class="line"><span class="cl">--become-user=USERNAME  # æŒ‡å®šsudoçš„runasç”¨æˆ·ï¼Œé»˜è®¤ä¸ºroot
</span></span><span class="line"><span class="cl">-K, --ask-become-pass   # æç¤ºè¾“å…¥sudoæ—¶çš„å£ä»¤
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ansibleçš„Host-pattern</strong></p>
<p>ç”¨äºåŒ¹é…è¢«æ§åˆ¶çš„ä¸»æœºåˆ—è¡¨</p>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>å¯¹hostsä¸­æ‰€æœ‰ä¸»æœºï¼Œä½¿ç”¨pingæ¨¡å—æ“ä½œ</li>
</ul>
<p>allï¼šè¡¨ç¤ºæ‰€æœ‰ä¸»æœº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-11.png"
	width="2612"
	height="1102"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-11_hu_237d3e201b34e435.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-11_hu_e57b2d003e6f1575.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="237"
		data-flex-basis="568px"
	
></p>
<p>å‡ºç°æŠ¥é”™<code>UNREACHABLE</code>ï¼Œè¡¨ç¤ºä¸èƒ½è¾¾åˆ°ã€‚</p>
<p>åŸå› æ˜¯<code>Host key verification failed</code>ï¼Œä¸»æœºå¯†é’¥éªŒè¯å¤±è´¥ã€‚</p>
<h4 id="å…³é—­æ£€æŸ¥æœåŠ¡å™¨çš„host_key">å…³é—­æ£€æŸ¥æœåŠ¡å™¨çš„host_key
</h4><ol>
<li>æ‰“å¼€ansible.cfgeé…ç½®æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /etc/ansible/ansible.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>æœç´¢<code>host_key</code></li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-12.png"
	width="1850"
	height="82"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-12_hu_50eab09324482c05.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-12_hu_8455a6b0ed765713.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="2256"
		data-flex-basis="5414px"
	
></p>
<ol start="3">
<li>ä¿®æ”¹æˆ <code>False</code>ï¼Œå¹¶å»æ‰å‰é¢çš„<code>;</code></li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-14.png"
	width="1840"
	height="82"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-14_hu_a7c41841de7de2fb.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-14_hu_9e84978b17107470.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="2243"
		data-flex-basis="5385px"
	
></p>
<ol start="4">
<li>
<p>ä¿å­˜å¹¶é€€å‡º</p>
</li>
<li>
<p>æµ‹è¯•</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-16.png"
	width="2880"
	height="656"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-16_hu_f2e480a00408271b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-16_hu_2efdff0a5dd1c63c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="439"
		data-flex-basis="1053px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯æ›´æ”¹äº†ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡è¿æ¥å°±ä¸ç”¨å†æ•²yesäº†ã€‚å¹¶ä¸”è‡ªåŠ¨å°†ä¸»æœºçš„keyä¸‹è½½ä¸‹æ¥ã€‚</p>
<ol start="6">
<li>æŸ¥çœ‹key</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat ~/.ssh/known_hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-17.png"
	width="1362"
	height="188"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-17_hu_57678b6c29a3382b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-17_hu_248cd6d70da55913.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="724"
		data-flex-basis="1738px"
	
></p>
<h4 id="è¾“å…¥å¯†ç è¿æ¥å¹¶ä½¿ç”¨pingæ¨¡å—">è¾“å…¥å¯†ç è¿æ¥ï¼Œå¹¶ä½¿ç”¨pingæ¨¡å—
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -k -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-18.png"
	width="1118"
	height="712"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-18_hu_abd1e31f5b972926.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-18_hu_3cc34c91aee0c33d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="157"
		data-flex-basis="376px"
	
></p>
<p>åªè¾“å…¥ansible-1çš„å¯†ç ï¼ŒåªæˆåŠŸè¿æ¥ansible-1</p>
<p>å½“è¾“å…¥å¯†ç åï¼Œä»–å°±ä¼šç”¨è¿™ä¸ªå¯†ç å°è¯•è¿æ¥æ‰€æœ‰ä¸»æœºï¼Œæ‰€ä»¥å½“ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼è¿æ¥æ—¶ï¼Œéœ€è¦æ‰€æœ‰çš„ä¸»æœºå¯†ç ç›¸åŒã€‚</p>
<ul>
<li>å°†ä¸‰å°ä¸»æœºå¯†ç ä¿®æ”¹ä¸€è‡´</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-19.png"
	width="810"
	height="256"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-19_hu_4314b639bdfa290f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-19_hu_e0b88128bce2b6c6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="316"
		data-flex-basis="759px"
	
></p>
<p>ä¿®æ”¹æˆåŠŸ</p>
<ul>
<li>ä½¿ç”¨pingæ¨¡å—æµ‹è¯•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -k -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-20.png"
	width="882"
	height="830"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-20_hu_32badde2f6d4c9df.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-20_hu_1db6029ed183fe8f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="106"
		data-flex-basis="255px"
	
></p>
<h4 id="ä½¿ç”¨keyéªŒè¯è¿æ¥">ä½¿ç”¨keyéªŒè¯è¿æ¥
</h4><ol>
<li>ç”Ÿæˆå¯†é’¥å¯¹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ssh-keygen
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-21.png"
	width="1112"
	height="714"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-21_hu_85062ced13766265.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-21_hu_96274628ac4896c8.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="155"
		data-flex-basis="373px"
	
></p>
<ol start="2">
<li>å°†å…¬é’¥åˆ†åˆ«åˆ†é…ç»™è¿œç¨‹æœºå™¨</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ssh-copy-id 172.16.140.111
</span></span><span class="line"><span class="cl">ssh-copy-id 172.16.140.112
</span></span><span class="line"><span class="cl">ssh-copy-id 172.16.140.113
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-22.png"
	width="1650"
	height="370"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-22_hu_b6230b2affff3dcb.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-22_hu_bcb49b72f9c9d721.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="445"
		data-flex-basis="1070px"
	
></p>
<p>åŒç†ï¼Œåˆ†é…ç»™112ã€113ä¸»æœº</p>
<ol start="3">
<li>ä½¿ç”¨pingæ¨¡å—æµ‹è¯•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-23.png"
	width="872"
	height="748"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-23_hu_2cd58d40e511b0e7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-23_hu_b02fe6e0f330fa08.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="279px"
	
></p>
<h4 id="æŸ¥çœ‹ansibleç®¡ç†çš„ä¸»æœº">æŸ¥çœ‹ansibleç®¡ç†çš„ä¸»æœº
</h4><ul>
<li>æŸ¥çœ‹æ‰€æœ‰ç®¡ç†çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all --list-hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-24.png"
	width="604"
	height="218"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-24_hu_6e3fbc5262fd2b83.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-24_hu_6ad1a5de2022c695.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="277"
		data-flex-basis="664px"
	
></p>
<ul>
<li>æŸ¥çœ‹websrvsç»„ç®¡ç†çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs --list-hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-25.png"
	width="668"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-25_hu_d052dc16739a8114.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-25_hu_f474e3948e2041fa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="392"
		data-flex-basis="943px"
	
></p>
<h4 id="ä½¿ç”¨ç”¨æˆ·è¿æ¥æµ‹è¯•pingæ¨¡å—">ä½¿ç”¨ç”¨æˆ·è¿æ¥ï¼Œæµ‹è¯•pingæ¨¡å—
</h4><ul>
<li>æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">getent passwd
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-26.png"
	width="1086"
	height="794"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-26_hu_e97f61e5d84b97de.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-26_hu_f58590edfc542ca6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="136"
		data-flex-basis="328px"
	
></p>
<ul>
<li>ä½¿ç”¨ç”¨æˆ·åä¸ºlinçš„è´¦å·</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -u lin -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-27.png"
	width="1998"
	height="546"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-27_hu_7cb58a7fd8963fd.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-27_hu_9cab7b56b5867d50.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="365"
		data-flex-basis="878px"
	
></p>
<p>å‘ç”ŸæŠ¥é”™ï¼ŒåŸå› æ˜¯æ²¡æœ‰è¾“å…¥å¯†ç </p>
<ul>
<li>ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æµ‹è¯•pingæ¨¡å—</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -u lin -k -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-28.png"
	width="872"
	height="788"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-28_hu_fbfbbb8d9e696941.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-28_hu_e276c66949db5bd3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="110"
		data-flex-basis="265px"
	
></p>
<p>çº¢æ¡†å†…è¾“å…¥ç”¨æˆ·linçš„å¯†ç </p>
<h4 id="æ”¯æŒé€šé…ç¬¦">æ”¯æŒé€šé…ç¬¦
</h4><ul>
<li>ä½¿ç”¨&quot;*&quot;ï¼Œæµ‹è¯•pingæ¨¡å—</li>
</ul>
<p>&ldquo;*&ldquo;ç›¸å½“äºall</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;*&#34; -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-29.png"
	width="876"
	height="752"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-29_hu_c0c33ed5f74305a2.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-29_hu_a4d6d662732321ff.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="116"
		data-flex-basis="279px"
	
></p>
<ul>
<li>è¿æ¥ä¸»æœºæ¸…å•ä¸­ï¼Œç½‘æ®µä¸º172.16.140çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible 172.16.140.* -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-30.png"
	width="866"
	height="748"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-30_hu_d655e57d35863459.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-30_hu_9deb721f85dee69b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="115"
		data-flex-basis="277px"
	
></p>
<ul>
<li>æˆ–å…³ç³»ï¼šä½¿ç”¨<code>:</code>ï¼Œè¿æ¥ipä»172.16.140.111æˆ–ipä¸º172.16.140.113çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;172.16.140.111:172.16.140.113&#34; -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-31.png"
	width="946"
	height="506"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-31_hu_b3d5b1829b45ed8c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-31_hu_f73c05f56d18c741.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="448px"
	
></p>
<ul>
<li>é€»è¾‘ä¸ï¼šè¿æ¥ä¸»æœºç»„websrvså’Œdbsrvsä¸­éƒ½å­˜åœ¨çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;websrvs:&amp;dbsrvs&#34; -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-32.png"
	width="844"
	height="514"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-32_hu_36546d5c53441815.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-32_hu_4519d41cf09e6744.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="164"
		data-flex-basis="394px"
	
></p>
<ul>
<li>é€»è¾‘éï¼šè¿æ¥ä¸»æœºç»„websrvså’Œdbsrvsä¸­åªåœ¨ä¸€ç»„ä¸­å‡ºç°çš„ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># æ³¨æ„ï¼šæ­¤å¤„ä¸ºå•å¼•å·
</span></span><span class="line"><span class="cl">ansible &#39;websrvs:!dbsrvs&#39; -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-33.png"
	width="840"
	height="510"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-33_hu_8faf50b6cf0fcce9.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-33_hu_eaac23564116b0aa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="164"
		data-flex-basis="395px"
	
></p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼ï¼šwebsrvsæˆ–dbsrvs</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># ç›¸å½“äº ansible &#34;websrvs:dbsrvs&#34; -m ping 
</span></span><span class="line"><span class="cl">ansible &#34;~(web|db)srvs&#34; -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-34.png"
	width="856"
	height="510"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-34_hu_21b0d0419843d2d7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-34_hu_d2a5ff8dd1b395d1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="167"
		data-flex-basis="402px"
	
></p>
<h4 id="ansibleæ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹">ansibleæ‰§è¡Œå‘½ä»¤çš„è¿‡ç¨‹
</h4><ol>
<li>åŠ è½½è‡ªå·±çš„é…ç½®æ–‡ä»¶ é»˜è®¤/etc/ansible/ansible.cfg</li>
<li>åŠ è½½è‡ªå·±å¯¹åº”çš„æ¨¡å—æ–‡ä»¶ï¼Œå¦‚ï¼šcommand</li>
<li>é€šè¿‡ansibleå°†æ¨¡å—æˆ–å‘½ä»¤ç”Ÿæˆå¯¹åº”çš„ä¸´æ—¶pyæ–‡ä»¶ï¼Œå¹¶å°†è¯¥æ–‡ä»¶ä¼ è¾“è‡³è¿œç¨‹æœåŠ¡å™¨çš„å¯¹åº”æ‰§è¡Œç”¨æˆ·<br>$HOME/.ansible/tmp/ansible-tmp-æ•°å­—/xxx.pyæ–‡ä»¶</li>
<li>ç»™æ–‡ä»¶+xæ‰§è¡Œ</li>
<li>æ‰§è¡Œå¹¶è¿”å›ç»“æœ</li>
<li>åˆ é™¤ä¸´æ—¶pyæ–‡ä»¶ï¼Œé€€å‡º</li>
</ol>
<h4 id="æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹">æ˜¾ç¤ºæ‰§è¡Œè¿‡ç¨‹
</h4><ul>
<li>ç®€æ´æ˜¾ç¤ºpingæ¨¡å—æ‰§è¡Œè¿‡ç¨‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;websrvs:dbsrvs&#34; -v -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-35.png"
	width="846"
	height="544"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-35_hu_61c34ad89ea0c4ec.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-35_hu_c27f51d9020758bd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="155"
		data-flex-basis="373px"
	
></p>
<ul>
<li>è¯¦ç»†æ˜¾ç¤ºpingæ¨¡å—æ‰§è¡Œè¿‡ç¨‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;websrvs:dbsrvs&#34; -vv -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-36.png"
	width="1666"
	height="954"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-36_hu_551f70ded6d8e212.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-36_hu_694957c025d1c518.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="174"
		data-flex-basis="419px"
	
></p>
<ul>
<li>æœ€è¯¦ç»†æ˜¾ç¤ºpingæ¨¡å—æ‰§è¡Œè¿‡ç¨‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;websrvs:dbsrvs&#34; -vvv -m ping
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-37.png"
	width="2880"
	height="1426"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-37_hu_4bcefe8813232634.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-37_hu_560baeaecd0c8fd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="201"
		data-flex-basis="484px"
	
></p>
<ul>
<li>å±•ç¤ºè¿è¡Œè¿‡ç¨‹ä¸­çš„æ‰§è¡Œå†…å®¹</li>
</ul>
<ol>
<li>æŸ¥è¯¢æ—¥å¿—ä¸­ä¸chmodç›¸å…³çš„å†…å®¹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">grep</span> <span class="n">chmod</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="n">ansible</span><span class="o">/</span><span class="n">ansible</span><span class="o">.</span><span class="n">log</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-38.png"
	width="2880"
	height="230"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-38_hu_f8e608e62bebea81.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-38_hu_a0cff0ca4ca4d6c8.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1252"
		data-flex-basis="3005px"
	
></p>
<ol start="2">
<li>åœ¨å½“å‰ç›®å½•å°†è¿è¡Œè¿‡ç¨‹è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ï¼Œå¹¶æŸ¥è¯¢</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible &#34;websrvs:dbsrvs&#34; -vvv -m ping &gt; ansible.log
</span></span><span class="line"><span class="cl">grep chmod ansible.log
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ansibleæ‰§è¡ŒçŠ¶æ€">ansibleæ‰§è¡ŒçŠ¶æ€
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[colors]
</span></span><span class="line"><span class="cl">;changed=yellow
</span></span><span class="line"><span class="cl">;console_prompt=white
</span></span><span class="line"><span class="cl">;debug=dark gray
</span></span><span class="line"><span class="cl">;deprecate=purple
</span></span><span class="line"><span class="cl">;diff_add=green
</span></span><span class="line"><span class="cl">;diff_lines=cyan
</span></span><span class="line"><span class="cl">;diff_remove=red
</span></span><span class="line"><span class="cl">;error=red
</span></span><span class="line"><span class="cl">;highlight=white
</span></span><span class="line"><span class="cl">;ok=green
</span></span><span class="line"><span class="cl">;skip=cyan
</span></span><span class="line"><span class="cl">;unreachable=bright red
</span></span><span class="line"><span class="cl">;verbose=blue
</span></span><span class="line"><span class="cl">;warn=bright purple
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ç»¿è‰²ï¼šæ‰§è¡ŒæˆåŠŸå¹¶ä¸”ä¸éœ€è¦åšæ”¹å˜çš„æ“ä½œ</li>
<li>é»„è‰²ï¼šæ‰§è¡ŒæˆåŠŸå¹¶ä¸”å¯¹ç›®æ ‡ä¸»æœºåšå˜æ›´</li>
<li>çº¢è‰²ï¼šæ‰§è¡Œå¤±è´¥</li>
</ul>
<h4 id="ansibleä½¿ç”¨èŒƒä¾‹">ansibleä½¿ç”¨èŒƒä¾‹
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># ä»¥linç”¨æˆ·æ‰§è¡Œpingå­˜æ´»æ£€æµ‹
</span></span><span class="line"><span class="cl">ansible all -u lin -k -m ping 
</span></span><span class="line"><span class="cl"># ä»¥lin sudoè‡³rootæ‰§è¡Œpingå­˜æ´»æ£€æµ‹
</span></span><span class="line"><span class="cl">ansible all -u lin -k -b -m ping
</span></span><span class="line"><span class="cl"># ä»¥lin sudoè‡³mageç”¨æˆ·æ‰§è¡Œpingå­˜æ´»æ£€æµ‹
</span></span><span class="line"><span class="cl">ansible all -u lin -k -b  --become-user=mage -m ping
</span></span><span class="line"><span class="cl"># ä»¥lin sudoè‡³rootç”¨æˆ·æ‰§è¡Œls
</span></span><span class="line"><span class="cl">ansible all -u lin -a &#39;ls /root&#39; -b --become-user=root -k -K -m command
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ansible-galaxy">ansible-galaxy
</h3><p>æ­¤å·¥å…·ä¼šè¿æ¥https://galaxy.ansible.comä¸‹è½½ç›¸åº”çš„roles</p>
<h4 id="æŸ¥æ‰¾mysqlå¹¶ä¸‹è½½">æŸ¥æ‰¾mysqlå¹¶ä¸‹è½½
</h4><ol>
<li>è¿›å…¥å®˜ç½‘</li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-39.png"
	width="2880"
	height="1580"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-39_hu_d77ba440897348d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-39_hu_5b58c8e2a03d3d84.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<ol start="2">
<li>æŸ¥æ‰¾geerlingguyçš„mysqlï¼Œå¹¶ç‚¹è¿›å…¥</li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-40.png"
	width="2880"
	height="1580"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-40_hu_7055f98da4d31c7f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-40_hu_c1c8087c7ab68627.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<ol start="3">
<li>å¤åˆ¶å®‰è£…å‘½ä»¤</li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-41.png"
	width="2880"
	height="1580"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-41_hu_845c16c7bb3ff5e1.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-41_hu_786aa6b86649f572.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-galaxy role install geerlingguy.mysql
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…æˆåŠŸ</p>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-42.png"
	width="1350"
	height="204"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-42_hu_76a03176979632b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-42_hu_27d74d9e5e771e18.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="661"
		data-flex-basis="1588px"
	
></p>
<p>å…¶ä¸­å®‰è£…ç›®å½•ä¸º<code>/root/.ansible/roles/geerlingguy.mysql</code></p>
<ol start="4">
<li>æŸ¥çœ‹è„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /root/.ansible/roles/geerlingguy.mysql/tasks
</span></span><span class="line"><span class="cl">vim main.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-43.png"
	width="1572"
	height="940"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-43_hu_f973f1937fe75a24.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-43_hu_54994215b5669295.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="167"
		data-flex-basis="401px"
	
></p>
<h4 id="èŒƒä¾‹">èŒƒä¾‹
</h4><ul>
<li>åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„galaxy</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-galaxy list
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-44.png"
	width="610"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-44_hu_9861ff70a8f98ac9.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-44_hu_568f6bcb790b3de6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="358"
		data-flex-basis="861px"
	
></p>
<ul>
<li>å¤åˆ¶å¹¶é‡å‘½ååœ¨å…¶ç›®å½•ä¸‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /root/.ansible/roles
</span></span><span class="line"><span class="cl">cp -a geerlingguy.mysql/ lin.mysql
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å†æ¬¡åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„galaxy</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-galaxy list
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-45.png"
	width="606"
	height="204"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-45_hu_4df1a794d356ba8d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-45_hu_144a292d344bf3db.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="297"
		data-flex-basis="712px"
	
></p>
<ul>
<li>å¸è½½lin.mysql</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-galaxy remove lin.mysql
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-46.png"
	width="766"
	height="240"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-46_hu_df8ddbe4d46bfc9c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-46_hu_ef20bf054f290cfe.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="319"
		data-flex-basis="766px"
	
></p>
<ul>
<li>redisæ¨¡å—</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># å®‰è£…galaxy
</span></span><span class="line"><span class="cl">ansible-galaxy install geerlingguy.redis
</span></span><span class="line"><span class="cl"># åˆ é™¤galaxy
</span></span><span class="line"><span class="cl">ansible-galaxy remove geerlingguy.redis
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ansible-pull">ansible-pull
</h3><p>æ­¤å·¥å…·ä¼šæ¨é€ansibleçš„å‘½ä»¤è‡³è¿œç¨‹ï¼Œæ•ˆç‡æ— é™æå‡ï¼Œå¯¹è¿ç»´è¦æ±‚è¾ƒé«˜ã€‚</p>
<h3 id="ansible-playbook">ansible-playbook
</h3><p>æ­¤å·¥å…·ç”¨äºæ‰§è¡Œç¼–å†™å¥½çš„playbookä»»åŠ¡</p>
<h4 id="èŒƒä¾‹-1">èŒƒä¾‹
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-playbook hello.yml
</span></span><span class="line"><span class="cl">cat hello.yml
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"># hello world yml file
</span></span><span class="line"><span class="cl">- hosts: websrvs
</span></span><span class="line"><span class="cl">  remote_user: root
</span></span><span class="line"><span class="cl">  tasks:
</span></span><span class="line"><span class="cl">    - name: hello world
</span></span><span class="line"><span class="cl">      command: /usr/bin/wall hello world
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åˆ›å»ºhello.ymlæ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl"># hello world yml file
</span></span><span class="line"><span class="cl">- hosts: websrvs
</span></span><span class="line"><span class="cl">  remote_user: root
</span></span><span class="line"><span class="cl">  tasks:
</span></span><span class="line"><span class="cl">    - name: hello world
</span></span><span class="line"><span class="cl">      command: /usr/bin/wall hello world
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-47.png"
	width="636"
	height="284"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-47_hu_8e91435ca1ca880e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-47_hu_d5986b620cf09fe2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="223"
		data-flex-basis="537px"
	
></p>
<ul>
<li>æ‰§è¡Œè„šæœ¬</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-playbook hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-48.png"
	width="2880"
	height="540"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-48_hu_21a7648aa1a3a498.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-48_hu_f457bb496f86ac04.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="533"
		data-flex-basis="1280px"
	
></p>
<ul>
<li><code>172.16.140.112</code></li>
</ul>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-49.png"
	width="2880"
	height="270"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-49_hu_4565ffe72d89a311.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-49_hu_fd8700097335277.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1066"
		data-flex-basis="2560px"
	
></p>
<ul>
<li><code>172.16.140.113</code></li>
</ul>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-50.png"
	width="2880"
	height="260"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-50_hu_c8f0fa222b45ef6c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-50_hu_24d843208f3e1853.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1107"
		data-flex-basis="2658px"
	
></p>
<h3 id="ansible-vault">ansible-vault
</h3><p>æ­¤å·¥å…·å¯ä»¥ç”¨äºåŠ å¯†è§£å¯†ymlæ–‡ä»¶</p>
<h4 id="æ ¼å¼">æ ¼å¼
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-vault [create|decrypt|edit|encrypt|rekey|view]
</span></span></code></pre></td></tr></table>
</div>
</div><p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-vault encrypt hello.yml # åŠ å¯† 
</span></span><span class="line"><span class="cl">ansible-vault decrypt hello.yml # è§£å¯†
</span></span><span class="line"><span class="cl">ansible-vault view hello.yml    # æŸ¥çœ‹
</span></span><span class="line"><span class="cl">ansible-vault edit hello.yml    # ç¼–è¾‘åŠ å¯†æ–‡ä»¶
</span></span><span class="line"><span class="cl">ansible-vault rekey hello.yml   # ä¿®æ”¹å£ä»¤
</span></span><span class="line"><span class="cl">ansible-vault create new.yml    # åˆ›å»ºæ–°æ–‡ä»¶
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹">ç¤ºä¾‹
</h4><ul>
<li>åŠ å¯†hello.ymlæ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-vault encrypt hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-51.png"
	width="728"
	height="142"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-51_hu_ace3cd31738cec9e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-51_hu_be9d3435d239e605.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="512"
		data-flex-basis="1230px"
	
></p>
<p>éœ€è¦è¾“å…¥ä¸¤è¾¹å¯†ç </p>
<ul>
<li>æŸ¥çœ‹åŠ å¯†åçš„hello.yml</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-52.png"
	width="1158"
	height="444"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-52_hu_1be7504dd2e06edd.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-52_hu_2b02713fd9f54737.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="260"
		data-flex-basis="625px"
	
></p>
<ul>
<li>ä½¿ç”¨ansible-playbookæ‰§è¡ŒåŠ å¯†åçš„hello.yml</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-playbook hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-53.png"
	width="812"
	height="72"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-53_hu_62a95e00900bd14.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-53_hu_72e19ee22a6844eb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1127"
		data-flex-basis="2706px"
	
></p>
<p>å‘ç”Ÿå¦‚ä¸‹æŠ¥é”™ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ERROR! Attempting to decrypt but no vault secrets found
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¡¨ç¤ºæ²¡æœ‰å¯†é’¥å»è§£å¯†</p>
<ul>
<li>è§£å¯†åŠ å¯†åçš„hello.yml</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-vault decrypt hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-54.png"
	width="726"
	height="106"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-54_hu_d0b4e48d122ffb89.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-54_hu_a5fe497fb9059838.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="684"
		data-flex-basis="1643px"
	
></p>
<p>éœ€è¦è¾“å…¥ä¸€éå¯†ç </p>
<ul>
<li>æŸ¥çœ‹è§£å¯†åçš„hello.yml</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-55.png"
	width="602"
	height="272"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-55_hu_bc5c04f08c20df17.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-55_hu_552ad9d6ac451009.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="221"
		data-flex-basis="531px"
	
></p>
<ul>
<li>æŸ¥çœ‹åŠ å¯†çš„hello.yml</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-vault view hello.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-56.png"
	width="686"
	height="308"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-56_hu_735a8f3963c33a23.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-56_hu_8a6f87af7b0c5ca7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="222"
		data-flex-basis="534px"
	
></p>
<p>éœ€è¦è¾“å…¥ä¸€éåŠ å¯†çš„å¯†ç </p>
<h3 id="ansible-console">ansible-console
</h3><p>æ­¤å·¥å…·å¯äº¤äº’æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒtabï¼Œansible 2.0+æ–°å¢</p>
<p>æç¤ºç¬¦æ ¼å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">æ‰§è¡Œç”¨æˆ·@å½“å‰æ“ä½œçš„ä¸»æœºç»„ï¼ˆå½“å‰ç»„çš„ä¸»æœºæ•°é‡ï¼‰[f:å¹¶å‘æ•°]$
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¸¸ç”¨å­å‘½ä»¤ï¼š</p>
<ul>
<li>è®¾ç½®å¹¶å‘æ•°ï¼šforks n ä¾‹å¦‚ï¼šforks 10</li>
<li>åˆ‡æ¢ç»„ï¼šcd ä¸»æœºç»„ ä¾‹å¦‚ï¼šcd web</li>
<li>åˆ—å‡ºå½“å‰ç»„ä¸»æœºåˆ—è¡¨ï¼šlist</li>
<li>åˆ—å‡ºæ‰€æœ‰å†…ç½®å‘½ä»¤ï¼š?æˆ–help</li>
</ul>
<h4 id="ç¤ºä¾‹-1">ç¤ºä¾‹
</h4><ul>
<li>è¿›å…¥ansibleå‘½ä»¤è¡Œç•Œé¢</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible-console
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-57.png"
	width="908"
	height="158"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-57_hu_8b78014ed22941ef.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-57_hu_f7b21d0f9d9fda01.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="574"
		data-flex-basis="1379px"
	
></p>
<ul>
<li>æŸ¥çœ‹å½“å‰ç»„æ‰€æœ‰ä¸»æœº</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">root@all (3)[f:5]$ list
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-58.png"
	width="368"
	height="138"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-58_hu_c98f54d3e55dd205.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-58_hu_f430af4adf9fc677.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="266"
		data-flex-basis="640px"
	
></p>
<ul>
<li>åˆ‡æ¢websrvsç»„</li>
</ul>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-59.png"
	width="428"
	height="74"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-59_hu_d369824416c80de1.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-59_hu_196a9141081cdcee.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="578"
		data-flex-basis="1388px"
	
></p>
<ul>
<li>è®¾ç½®å¹¶å‘æ•°ä¸º10</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">forks 10
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-60.png"
	width="462"
	height="74"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-60_hu_b7296d908673a75.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-60_hu_397eee9024e3202e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="624"
		data-flex-basis="1498px"
	
></p>
<h2 id="ansibleå¸¸ç”¨æ¨¡å—">Ansibleå¸¸ç”¨æ¨¡å—
</h2><p>å¸¸ç”¨æ¨¡å—å¸®åŠ©æ–‡æ¡£ï¼š</p>
<p><a class="link" href="https://docs.ansible.com/projects/ansible/latest/module_plugin_guide/modules_intro.html"  target="_blank" rel="noopener"
    >ansible-modules-docs</a></p>
<h3 id="commandæ¨¡å—">Commandæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šåœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤ï¼Œæ­¤ä¸ºé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥-mé€‰é¡¹</p>
<p>æ³¨æ„ï¼šæ­¤å‘½ä»¤ä¸æ”¯æŒ<code>$VARNAME</code>ã€<code>&lt;</code>ã€<code>&gt;</code>ã€<code>|</code>ã€<code>;</code>ã€<code>&amp;</code>ç­‰ï¼Œç”¨shellæ¨¡å—å®ç°</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible srvs -m command -a &#39;srvice vsftpd start&#39;
</span></span><span class="line"><span class="cl">ansible srvs -m command -a &#39;echo magedu |passwd --stdin wang&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-2">ç¤ºä¾‹
</h4><ul>
<li>è®©ä¸»æœºç»„websrvsæ‰§è¡Œå‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;cat /etc/centos-release&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-61.png"
	width="1064"
	height="176"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-61_hu_c86915a4676e26f8.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-61_hu_6217e653aba02f6f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="604"
		data-flex-basis="1450px"
	
></p>
<ul>
<li>ä½¿ç”¨chdirï¼Œå…ˆè¿›å…¥/etcç›®å½•ï¼Œå†æŸ¥è¯¢centos-releaseçš„å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;chdir=/etc cat centos-release&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-62.png"
	width="1134"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-62_hu_253ba09a96ce9b5e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-62_hu_ab72c8beecaed922.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="651"
		data-flex-basis="1564px"
	
></p>
<p>è¯¥å‘½ä»¤ç›¸å½“äº</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd /etc
</span></span><span class="line"><span class="cl">cat centos-release
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¦‚æœ/data/f1.txtä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œåç»­å‘½ä»¤ï¼›å¦‚æœå­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œåç»­å‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;chdir=/etc creates=/data/f1.txt cat centos-release&#39; 
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶ï¼Œ<code>172.16.140.112</code>å’Œ<code>172.16.140.113</code>æœåŠ¡å™¨ä¸­ï¼Œéƒ½æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶</p>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-63.png"
	width="1428"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-63_hu_d01dac203628adde.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-63_hu_3cdd383fe9878c91.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="840"
		data-flex-basis="2016px"
	
></p>
<ul>
<li>åœ¨<code>172.16.140.113</code>ä¸‹åˆ›å»º/data/f1.txtåï¼Œå†æ¬¡æ‰§è¡Œä¸Šè¿°å‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mkdir /data
</span></span><span class="line"><span class="cl">touch /data/f1.txt
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-64.png"
	width="744"
	height="164"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-64_hu_8d9c20bdde8bc966.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-64_hu_be96cee3af76416a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="453"
		data-flex-basis="1088px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;chdir=/etc creates=/data/f1.txt cat centos-release&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-65.png"
	width="1434"
	height="168"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-65_hu_74d1ea47324f73cc.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-65_hu_9a1bd92f7bd93b1c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="853"
		data-flex-basis="2048px"
	
></p>
<p>ipä¸º<code>172.16.140.113</code>çš„æœåŠ¡å™¨ä¸Šï¼Œæ‰§è¡Œçš„å‘½ä»¤è‡ªåŠ¨è·³è¿‡äº†ï¼Œå› ä¸ºå­˜åœ¨/data/f1.txtæ–‡ä»¶</p>
<ul>
<li>å¦‚æœ/data/f1.txtå­˜åœ¨ï¼Œåˆ™æ‰§è¡Œåç»­å‘½ä»¤ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œåç»­å‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;chdir=/etc removes=/data/f1.txt cat centos-release&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-66.png"
	width="1426"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-66_hu_3018c0a43a25d602.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-66_hu_1c9b682432f109fd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="829"
		data-flex-basis="1989px"
	
></p>
<p>åˆšå¥½è¿”å›ç»“æœå’Œ<code>creates</code>ç›¸åï¼Œå½“æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œï¼›ä¸å­˜åœ¨å°±è‡ªåŠ¨è·³è¿‡ã€‚</p>
<ul>
<li>æŸ¥çœ‹ä¸»æœºç»„/dataç›®å½•ä¸‹çš„æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;ls -l /data&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-67.png"
	width="1034"
	height="202"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-67_hu_c4323a43cdeab312.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-67_hu_2d89d66696fe26e4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="511"
		data-flex-basis="1228px"
	
></p>
<ul>
<li>åˆ é™¤ä¸»æœºç»„/dataç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼ˆå®é™…ä¸ç”Ÿæ•ˆï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;rm -rf /data/*&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-68.png"
	width="932"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-68_hu_e6615e90728a6e9c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-68_hu_d0dcd49cdefe3d98.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="548"
		data-flex-basis="1315px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹ä¸»æœºç»„/dataç›®å½•ä¸‹çš„æ•°æ®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;ls -l /data&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-69.png"
	width="1044"
	height="204"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-69_hu_4ef311e4ef027837.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-69_hu_34f20396daeb1428.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="511"
		data-flex-basis="1228px"
	
></p>
<ul>
<li>ç›´æ¥åˆ é™¤/dataç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;rm -rf /data/&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-70.png"
	width="892"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-70_hu_fa8506a580afebd3.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-70_hu_1658d10278bc282e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="524"
		data-flex-basis="1259px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;ls -l /data&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-71.png"
	width="1050"
	height="168"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-71_hu_d550bd6967b5fa7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-71_hu_e9b7430af509304c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="625"
		data-flex-basis="1500px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨å·²ç»æ²¡æœ‰æ–‡ä»¶äº†</p>
<ul>
<li>è¾“å‡ºhelloï¼Œå¹¶å­˜åœ¨hello.logä¸­ï¼ˆå®é™…ä¸ç”Ÿæ•ˆï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;echo hello &gt; /data/hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-72.png"
	width="1116"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-72_hu_a943ea9b6f362da2.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-72_hu_c77eb721baa556f1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="648"
		data-flex-basis="1557px"
	
></p>
<p>å¯ä»¥æ‰§è¡ŒæˆåŠŸ</p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;cat /data/hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-73.png"
	width="992"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-73_hu_74ef371aa47594c6.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-73_hu_925e66337b7b5076.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="583"
		data-flex-basis="1400px"
	
></p>
<p>æ²¡æœ‰å‘ç°æ–‡ä»¶ï¼Œè¯´æ˜ä¸Šä¸€æ¡å‘½ä»¤æ²¡æœ‰æˆåŠŸ</p>
<ul>
<li>ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼ˆå®é™…ä¸ç”Ÿæ•ˆï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;echo centos | passwd --stdin lin&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-74.png"
	width="1188"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-74_hu_1c19ec9a458156c9.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-74_hu_86f8ff9984386b16.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="682"
		data-flex-basis="1638px"
	
></p>
<ul>
<li>æŸ¥çœ‹å­˜å‚¨å¯†ç çš„æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;ls -l /etc/shadow&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-75.png"
	width="964"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-75_hu_aad81e1192b4cd21.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-75_hu_c0a450b5b568c7a0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="560"
		data-flex-basis="1345px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°æ–‡ä»¶æ—¶é—´æ—¶1æœˆ1æ—¥21:13ï¼Œæ‰€ä»¥ä¸Šä¸€æ¡å‘½ä»¤çœ‹èµ·æ¥æ˜¯å®ç°äº†ï¼Œä½†æ˜¯å®é™…å¹¶æ²¡æœ‰å®ç°</p>
<ul>
<li>æŸ¥çœ‹å½“å‰æ—¶é—´</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;date&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-76.png"
	width="778"
	height="168"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-76_hu_497c0e65f3a16145.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-76_hu_32b4cc530bccb380.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="463"
		data-flex-basis="1111px"
	
></p>
<ul>
<li>æŸ¥çœ‹$HOSTNAMEå˜é‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;echo $HOSTNAME&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-77.png"
	width="924"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-77_hu_1926959834e0879c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-77_hu_895572fc1bab4aac.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="543"
		data-flex-basis="1304px"
	
></p>
<p>ç›´æ¥è¿”å›äº†è¿™ä¸ªå­—ç¬¦ä¸²</p>
<ul>
<li>ä½¿ç”¨åŒå¼•å·æŸ¥çœ‹$HOSTNAMEå˜é‡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#34;echo $HOSTNAME&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-78.png"
	width="922"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-78_hu_d1d0094b65e35ab4.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-78_hu_c65012324a88e213.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="536"
		data-flex-basis="1286px"
	
></p>
<p>ç»“æœç›´æ¥è¿”å›äº†æœ¬æœºçš„$HOSTNAMEï¼Œå¹¶ä¸æ˜¯ä¸»æœºç»„çš„ç”¨æˆ·å</p>
<h3 id="shellæ¨¡å—">Shellæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šå’Œcommandç›¸ä¼¼ï¼Œç”¨shellæ‰§è¡Œå‘½ä»¤</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible srvs -m shell -a &#39;echo magedu |passwd --stdin wang&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šè°ƒç”¨bashæ‰§è¡Œå‘½ä»¤ ç±»ä¼¼cat /tmp/test.md | awk -F&rsquo;|&rsquo; &lsquo;{print $1, $2}&rsquo; &amp;&gt; /tmp/example.txtè¿™äº›å¤æ‚çš„å‘½ä»¤ï¼Œå³ä½¿ä½¿ç”¨shellä¹Ÿå¯èƒ½ä¼šå¤±è´¥ï¼Œè§£å†³åŠæ³•ï¼šå†™åˆ°è„šæœ¬æ—¶ï¼Œcopyåˆ°è¿œç¨‹ï¼Œæ‰§è¡Œï¼Œå†æŠŠéœ€è¦çš„ç»“æœæ‹‰å›æ‰§è¡Œå‘½ä»¤çš„æœºå™¨ã€‚</p>
<h4 id="ç¤ºä¾‹-3">ç¤ºä¾‹
</h4><ul>
<li>æŸ¥è¯¢ä¸»æœºç»„çš„$HOSTNAME</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#34;echo $HOSTNAME&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-79.png"
	width="904"
	height="168"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-79_hu_434e0fb6157fa13c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-79_hu_b2d1a2510f7c6b85.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="538"
		data-flex-basis="1291px"
	
></p>
<p>å‘ç°è¿˜æ˜¯ä¸è¡Œ</p>
<ul>
<li>ä½¿ç”¨å•å¼•å·æŸ¥è¯¢æµ‹è¯•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;echo $HOSTNAME&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-80.png"
	width="902"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-80_hu_ea644b3a37c0d6e8.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-80_hu_50f71d438a788e7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="530"
		data-flex-basis="1273px"
	
></p>
<p>è¿™æ—¶å€™èƒ½æ­£å¸¸æ˜¾ç¤ºäº†</p>
<ul>
<li>ä¿®æ”¹å¯†ç </li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;echo centos | passwd --stdin lin&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-81.png"
	width="1156"
	height="240"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-81_hu_6fb6d3a86acfaaf2.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-81_hu_7ab26267ec701c71.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="481"
		data-flex-basis="1156px"
	
></p>
<p>æ˜¾ç¤ºä¿®æ”¹æˆåŠŸ</p>
<ul>
<li>æŸ¥çœ‹å¯†ç æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;ls -l /etc/shadow&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-82.png"
	width="946"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-82_hu_d19de7d75c162a8e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-82_hu_272e3fd837d01099.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="550"
		data-flex-basis="1320px"
	
></p>
<p>æ—¶é—´å·²ç»æ”¹å˜ï¼Œè¯´æ˜ä¿®æ”¹å¯†ç æˆåŠŸäº†</p>
<ul>
<li>å†™helloåˆ°hello.logä¸­</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;echo hello &gt; /data/hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-83.png"
	width="1140"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-83_hu_f4b9af49f3a1ce67.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-83_hu_286852449b86d8ec.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="670"
		data-flex-basis="1609px"
	
></p>
<p>æ˜¾ç¤ºæ²¡æœ‰é‚£ä¸ªç›®å½•</p>
<ul>
<li>ç›´æ¥åœ¨å½“å‰ç›®å½•å†™å…¥</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;echo hello &gt; hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-84.png"
	width="1004"
	height="162"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-84_hu_905454ed9f191ffc.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-84_hu_5c51d23e7d258183.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="619"
		data-flex-basis="1487px"
	
></p>
<ul>
<li>æŸ¥çœ‹hello.logå†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;cat hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-85.png"
	width="868"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-85_hu_c0fb58234e05b89b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-85_hu_d638ddf3f46a6cbc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="504"
		data-flex-basis="1211px"
	
></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;chdir=/data cat hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ä½¿ç”¨shellåˆ›å»º/dataç›®å½•ï¼Œå†åœ¨/dataç›®å½•ä¸‹åˆ›å»ºhello.log</li>
</ul>
<ol>
<li>åˆ›å»º/dataç›®å½•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;mkdir /data&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-86.png"
	width="854"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-86_hu_77850db6486e5c11.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-86_hu_cfd4d3655aeae754.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="502"
		data-flex-basis="1205px"
	
></p>
<ol start="2">
<li>åˆ›å»ºhello.log</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;echo hello &gt; /data/hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-87.png"
	width="1090"
	height="162"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-87_hu_ac92ea97898a7f38.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-87_hu_8b5aa9507d336909.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="672"
		data-flex-basis="1614px"
	
></p>
<ul>
<li><code>/etc/issue</code>å­˜åœ¨çš„è¯ï¼Œåˆ™ä¸æ‰§è¡Œå‘½ä»¤ï¼›ä¸å­˜åœ¨çš„è¯ï¼Œåˆ™æ‰§è¡Œå‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;chdir=/data creates=/etc/issue cat hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-88.png"
	width="1310"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-88_hu_5ffa690bd0005025.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-88_hu_d00a09f58d5eddaa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="761"
		data-flex-basis="1827px"
	
></p>
<ul>
<li><code>/etc/issue</code>ä¸å­˜åœ¨çš„è¯ï¼Œåˆ™ä¸æ‰§è¡Œå‘½ä»¤ï¼›å­˜åœ¨çš„è¯ï¼Œåˆ™æ‰§è¡Œå‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;chdir=/data removes=/etc/issue cat hello.log&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-89.png"
	width="1316"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-89_hu_ece51f1472d5aaf.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-89_hu_edb979554efc4378.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="774"
		data-flex-basis="1857px"
	
></p>
<h4 id="å°†shellæ¨¡å—ä»£æ›¿commandè®¾ç½®ä¸ºé»˜è®¤æ¨¡å—">å°†shellæ¨¡å—ä»£æ›¿commandï¼Œè®¾ç½®ä¸ºé»˜è®¤æ¨¡å—
</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[root@ansible ~]# vim /etc/ansible/ansible.cfg
</span></span><span class="line"><span class="cl">module_name=shell
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-90.png"
	width="1354"
	height="104"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-90_hu_21a00e523de8eda.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-90_hu_bf3a85d379d87f26.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="1301"
		data-flex-basis="3124px"
	
></p>
<ul>
<li>ä½¿ç”¨commandæ¨¡å—æŸ¥è¯¢/data/ä¸‹çš„æ‰€æœ‰å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m command -a &#39;ls /data/*&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-91.png"
	width="1082"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-91_hu_45650315108fbd4a.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-91_hu_30c29e59fa6edc9c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="621"
		data-flex-basis="1492px"
	
></p>
<ul>
<li>ä½¿ç”¨shellæ¨¡å—æŸ¥è¯¢/data/ä¸‹çš„æ‰€æœ‰å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m shell -a &#39;ls /data/*&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-92.png"
	width="850"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-92_hu_be19a90e8003be74.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-92_hu_ffbcee8817e983e0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="494"
		data-flex-basis="1186px"
	
></p>
<ul>
<li>ä½¿ç”¨é»˜è®¤æ¨¡å—æŸ¥è¯¢/data/ä¸‹çš„æ‰€æœ‰å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#39;ls /data/&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-93.png"
	width="716"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-93_hu_29eda6a30cf06ab.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-93_hu_a0347d3f90746f3e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="421"
		data-flex-basis="1010px"
	
></p>
<p>æ‰€ä»¥é»˜è®¤æ¨¡å—å·²ç»è¢«æ›¿æ¢æˆäº†shell</p>
<ul>
<li>æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">cat</span> <span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">ansible</span><span class="o">.</span><span class="n">log</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-94.png"
	width="2880"
	height="1588"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-94_hu_e10127001cdbf519.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-94_hu_12da7b942ee71e5d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="181"
		data-flex-basis="435px"
	
></p>
<h3 id="scriptæ¨¡å—">Scriptæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šåœ¨è¿œç¨‹ä¸»æœºä¸Šè¿è¡ŒansibleæœåŠ¡å™¨ä¸Šçš„è„šæœ¬</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m script -a /data/test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-4">ç¤ºä¾‹
</h4><ul>
<li>åœ¨ä¸»æ§ç«¯åˆ›å»ºè„šæœ¬</li>
</ul>
<ol>
<li>åˆ›å»º/dataç›®å½•</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mkdir /data
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ç¼–å†™test.shè„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="n">vim</span><span class="w"> </span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">test</span><span class="p">.</span><span class="n">sh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">#----------
</span></span></span><span class="line"><span class="cl"><span class="n">echo</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">hostname</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="o">`</span><span class="n">hostname</span><span class="o">`</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-95.png"
	width="482"
	height="122"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-95_hu_7cadf4040c53ea16.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-95_hu_7e193e524b3a84c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="395"
		data-flex-basis="948px"
	
></p>
<ol start="3">
<li>ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">chmod +x /data/test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>åœ¨ä¸»æœºç»„ä¸Šè¿è¡Œä¸­æ§ç«¯çš„/data/test.shè„šæœ¬</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m script -a &#39;/data/test.sh&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-96.png"
	width="956"
	height="852"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-96_hu_dfdf7f6737e8a203.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-96_hu_7bb1ddfd71388272.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="269px"
	
></p>
<ul>
<li>è§‚å¯Ÿè¿è¡Œè¿‡ç¨‹ï¼Œæ·»åŠ sleep 100ï¼Œæ–¹ä¾¿è¿›è¡Œè§‚å¯Ÿ</li>
</ul>
<ol>
<li>ä¿®æ”¹<code>test.sh</code>è„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">vim /data/test.sh
</span></span><span class="line"><span class="cl">#---------
</span></span><span class="line"><span class="cl">echo My hostname is `hostname
</span></span><span class="line"><span class="cl">sleep 100
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-97.png"
	width="460"
	height="148"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-97_hu_3624b874244ebece.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-97_hu_9a5431c6d4e2508a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="310"
		data-flex-basis="745px"
	
></p>
<ol start="2">
<li>åœ¨ä¸­æ§ç«¯ç»™ä¸»æœºç»„è¿è¡Œè„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m script -a &#39;/data/test.sh&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>æŸ¥çœ‹<code>172.16.140.112</code>ä¸‹çš„å†…å®¹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat .ansible/tmp/ansible-tmp-1767114710.7170281-19646-27799398627187/test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-99.png"
	width="1372"
	height="166"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-99_hu_c4b0bce9ca3f5428.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-99_hu_6c94d19b2c027205.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="826"
		data-flex-basis="1983px"
	
></p>
<ol start="4">
<li>æŸ¥çœ‹<code>172.16.140.113</code>ä¸‹çš„å†…å®¹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cat .ansible/tmp/ansible-tmp-1767114710.715692-19647-199942294205178/test.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-98.png"
	width="1362"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-98_hu_daa02df6ae4de130.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-98_hu_4576108c8d1e92f0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="801"
		data-flex-basis="1922px"
	
></p>
<p><font color=red>æ³¨æ„ï¼šå½“æ¨¡å—æ‰§è¡Œå®Œä»¥åä¸»æ§ç«¯å’Œè¢«æ§çš„<code>~/.ansible/tmp</code>ç›®å½•ä¸‹çš„å†…å®¹ä¼šè¢«æ¸…ç©ºï¼Œå³ä½¿åœ¨è¿è¡Œè¿‡ç¨‹ä¸­è¢«å¼ºåˆ¶å…³é—­ä¹Ÿä¸€æ ·</font></p>
<h3 id="copyæ¨¡å—">Copyæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šä»ansibleæœåŠ¡å™¨ä¸»æ§ç«¯å¤åˆ¶æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># å¦‚ç›®æ ‡å­˜åœ¨ï¼Œé»˜è®¤è¦†ç›–ï¼Œæ­¤å¤„æŒ‡å®šå…ˆå¤‡ä»½
</span></span><span class="line"><span class="cl">ansible srv -m copy -a &#34;src=/root/test1.sh dest=/tmp/test2.sh owner=lin mode=600 backup=yes&#34;
</span></span><span class="line"><span class="cl"># æŒ‡å®šå†…å®¹ï¼Œç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶
</span></span><span class="line"><span class="cl">ansible srv -m copy -a &#34;content=&#39;test content\n&#39; dest=/tmp/test.txt&#34;
</span></span><span class="line"><span class="cl"># å¤åˆ¶/etcä¸‹çš„æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬/etc/ç›®å½•è‡ªèº«
</span></span><span class="line"><span class="cl">ansible srv -m copy -a &#34;src=/etc/ dest=/backup&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-5">ç¤ºä¾‹
</h4><ul>
<li>æŒ‡å®šå†…å®¹ï¼Œç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m copy -a &#34;content=&#39;test line1\ntest line2&#39; dest=/tmp/test.txt&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-100.png"
	width="1412"
	height="1258"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-100_hu_e7948cf00961381d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-100_hu_3a0605981115f9b3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="269px"
	
></p>
<ul>
<li>æŸ¥çœ‹å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#34;cat /tmp/test.txt&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-101.png"
	width="818"
	height="240"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-101_hu_c785b0e9e145fd8b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-101_hu_2344518fcc139bb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="340"
		data-flex-basis="818px"
	
></p>
<ul>
<li>æ‹·è´æ–‡ä»¶ï¼Œé‡å‘½åï¼Œå¹¶ä¸”æŒ‡å®šæ‰€æœ‰è€…å’Œæƒé™</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#34;src=/etc/centos-release dest=/data/os.txt owner=lin mode=600&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-102.png"
	width="1520"
	height="1260"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-102_hu_30c9260142bdbf3e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-102_hu_b2aed5d30af18605.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="120"
		data-flex-basis="289px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#34;ls -l /data/os.txt&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-103.png"
	width="830"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-103_hu_4e05b1a8a8913bc1.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-103_hu_85a6aa0b309cc1be.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="477"
		data-flex-basis="1144px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#34;cat /data/os.txt&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-104.png"
	width="810"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-104_hu_cd9128d8d34d0fd4.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-104_hu_c69e858eae28e5dc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="465"
		data-flex-basis="1117px"
	
></p>
<ul>
<li>æ‹·è´æ–‡ä»¶åˆ°/dataç›®å½•ä¸‹ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…å’Œæƒé™</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -m copy -a &#34;src=/etc/sysconfig dest=/data/ owner=lin mode=600&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-105.png"
	width="1392"
	height="378"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-105_hu_a6a32c5218ee212b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-105_hu_1ee05761c18ec56e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="368"
		data-flex-basis="883px"
	
></p>
<ul>
<li>æŸ¥çœ‹ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible websrvs -a &#39;ls -l /data/&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-106.png"
	width="772"
	height="378"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-106_hu_72e23476b45c8830.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-106_hu_7eaa4fdbb5665569.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="204"
		data-flex-basis="490px"
	
></p>
<h3 id="fetchæ¨¡å—">Fetchæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šä»è¿œç¨‹ä¸»æœºæå–æ–‡ä»¶è‡³ansibleçš„ä¸»æ§ç«¯ï¼Œcopyç›¸åï¼Œç›®å‰ä¸æ”¯æŒç›®å½•</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible srv -m fetch -a &#39;src=/root/test.sh dest=/data/scripts&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-6">ç¤ºä¾‹
</h4><ul>
<li>ä»æ‰€æœ‰è¿œç¨‹ä¸»æœºç»„ä¸­æå–<code>/etc/redhat-release</code>åˆ°æœ¬åœ°<code>/data/os</code>ç›®å½•ä¸‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m fetch -a <span class="s1">&#39;src=/etc/redhat-release dest=/data/os&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-107.png"
	width="1170"
	height="852"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-107_hu_28e18b8b92ace6a8.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-107_hu_c04ec70113f7cd1a.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="137"
		data-flex-basis="329px"
	
></p>
<ul>
<li>æŸ¥çœ‹ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tree /data/os
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-108.png"
	width="424"
	height="346"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-108_hu_53880e0f935bd0f7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-108_hu_4e9ef22041b31014.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="122"
		data-flex-basis="294px"
	
></p>
<p>ç”Ÿæˆ<code>/os</code>ç›®å½•åï¼Œå¹¶åˆ†åˆ«ç»™æ¯ä¸ªä¸»æœºåˆ›å»ºå¯¹åº”çš„ç›®å½•ï¼Œç„¶åå°†æŠ“å–çš„æ•°æ®åˆ†åˆ«å­˜å‚¨</p>
<h3 id="fileæ¨¡å—">Fileæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šè®¾ç½®æ–‡ä»¶å±æ€§</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç©ºæ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">ansible srv -m file -a <span class="s1">&#39;path=/data/test.txt state=touch&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m file -a <span class="s1">&#39;path=/data/test.txt state=absent&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m file -a <span class="s1">&#39;path=/root/test.sh owner=lin mode=755&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç›®å½•</span>
</span></span><span class="line"><span class="cl">ansible srv -m file -a <span class="s1">&#39;path=/data/mysql state=directory owner=mysql group=mysql&#39;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºè½¯é“¾æ¥</span>
</span></span><span class="line"><span class="cl">ansible srv -m file -a <span class="s1">&#39;src=/data/testfile dest=/data/testfile-link state=link&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>state=absent è¡¨ç¤ºåˆ é™¤</li>
<li>state=touch  è¡¨ç¤ºç”Ÿæˆç©ºæ–‡ä»¶</li>
<li>path=xxx     è¡¨ç¤ºç®¡ç†çš„æ–‡ä»¶</li>
<li>state=directory  è¡¨ç¤ºé€’å½’è®¾ç½®æ–‡ä»¶ï¼ˆrecurseï¼‰</li>
</ul>
<h4 id="ç¤ºä¾‹-7">ç¤ºä¾‹
</h4><ul>
<li>åˆ›å»ºç©ºæ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m file -a <span class="s1">&#39;path=/data/test.txt state=touch&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-109.png"
	width="1132"
	height="1056"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-109_hu_212712ba1a908392.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-109_hu_6f1cdc4ba9c324e9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="107"
		data-flex-basis="257px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls -l /data/test.txt&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-110.png"
	width="860"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-110_hu_c42dbe650e6b1599.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-110_hu_2d42adc5141160d8.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="500"
		data-flex-basis="1200px"
	
></p>
<ul>
<li>ä¿®æ”¹æ–‡ä»¶çš„æ‰€å±ç»„å’Œæƒé™</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m file -a <span class="s1">&#39;path=/data/test.txt&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-111.png"
	width="1240"
	height="1056"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-111_hu_cb325a5e89b1494e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-111_hu_6e5bfe251203d5f9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="117"
		data-flex-basis="281px"
	
></p>
<h3 id="unarchiveæ¨¡å—">Unarchiveæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šè§£åŒ…è§£å‹ç¼©</p>
<p>å®ç°æœ‰ä¸¤ç§ç”¨æ³•ï¼š</p>
<ol>
<li>å°†ansibleä¸»æœºä¸Šçš„å‹ç¼©åŒ…ä¼ åˆ°è¿œç¨‹ä¸»æœºåè§£å‹è‡³ç‰¹å®šç›®å½•ï¼Œè®¾ç½®copy=yes</li>
<li>å°†è¿œç¨‹ä¸»æœºä¸Šçš„æŸä¸ªå‹ç¼©åŒ…è§£å‹ç¼©åˆ°æŒ‡å®šè·¯å¾„ä¸‹ï¼Œè®¾ç½®copy=no</li>
</ol>
<p>å¸¸è§å‚æ•°ï¼š</p>
<ul>
<li>copyï¼šé»˜è®¤ä¸ºyesï¼Œå½“copy=yesï¼Œæ‹·è´çš„æ–‡ä»¶æ˜¯ä»ansibleä¸»æœºå¤åˆ¶åˆ°è¿œç¨‹ä¸»æœºä¸Šè¿œç¨‹ä¸»æœºä¸Šï¼Œå¦‚æœè®¾ç½®ä¸ºcopy=noï¼Œä¼šåœ¨è¿œç¨‹ä¸»æœºä¸Šå¯»æ‰¾srcæºæ–‡ä»¶</li>
<li>remote_srcï¼šå’ŒcopyåŠŸèƒ½ä¸€æ ·ä¸”äº’æ–¥ï¼Œyesè¡¨ç¤ºåœ¨è¿œç¨‹ä¸»æœºï¼Œä¸åœ¨ansibleä¸»æœºï¼Œnoè¡¨ç¤ºæ–‡ä»¶åœ¨ansibleä¸»æœºä¸Š</li>
<li>srcï¼šæºè·¯å¾„ï¼Œå¯ä»¥æ˜¯ansibleä¸»æœºä¸Šçš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œå¦‚æœæ˜¯è¿œç¨‹ä¸»æœºä¸Šçš„è·¯å¾„ï¼Œåˆ™éœ€è¦è®¾ç½®copy=no</li>
<li>destï¼šè¿œç¨‹ä¸»æœºä¸Šçš„ç›®æ ‡è·¯å¾„</li>
<li>modeï¼šè®¾ç½®è§£å‹ç¼©åçš„æ–‡ä»¶æƒé™</li>
</ul>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible srv -m unarchive -a <span class="s1">&#39;src=/data/foo.tgz dest=/var/lib/foo&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m unarchive -a <span class="s1">&#39;src=/tmp/foo.zip dest=/data copy=no mode=0777&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m unarchive -a <span class="s1">&#39;src=https://example.com/example.zip dest=/data copy=no&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-8">ç¤ºä¾‹
</h4><ul>
<li>æ‰“åŒ…<code>/etc</code>ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar zcvf /data/etc.tar.gz /etc
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-115.png"
	width="822"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-115_hu_6ac18986b2fd2e4.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-115_hu_f72de3fa617ff822.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="483"
		data-flex-basis="1160px"
	
></p>
<ul>
<li>æ‰“åŒ…<code>/etc</code>ç›®å½•ï¼ˆxzç»“å°¾ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar Jcvf /data/etc.tar.xz /etc
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-116.png"
	width="826"
	height="208"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-116_hu_a1584fc046eb93b7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-116_hu_982120a124a067bf.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="397"
		data-flex-basis="953px"
	
></p>
<ul>
<li>æŸ¥çœ‹websrvsä¸»æœºç»„<code>/data</code>ç›®å½•ä¸‹çš„æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls /data/&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-112.png"
	width="712"
	height="376"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-112_hu_be662c05b8a38315.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-112_hu_ce4bd6e2f4759ffa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="189"
		data-flex-basis="454px"
	
></p>
<ul>
<li>æ¸…ç†websrvsä¸»æœºç»„<code>/data</code>ç›®å½•ä¸‹çš„æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;rm -rf /data/*&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-113.png"
	width="774"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-113_hu_ba3f2c58fb314b6f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-113_hu_a4a671f007b4b71d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="450"
		data-flex-basis="1080px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹websrvsä¸»æœºç»„<code>/data</code>ç›®å½•ä¸‹çš„æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls /data/&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-114.png"
	width="704"
	height="168"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-114_hu_e544c7997c20ef00.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-114_hu_a797ccbceb7486e2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="419"
		data-flex-basis="1005px"
	
></p>
<ul>
<li>å°†ansibleä¸»æ§ç«¯ä¸‹<code>/data/etc.tar.gz</code>ä¼ è¾“åˆ°websrvsä¸»æœºç»„<code>/data</code>ç›®å½•ä¸‹å¹¶è§£åŒ…ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…ä¸ºlin</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m unarchive -a <span class="s1">&#39;src=/data/etc.tar.gz dest=/data owner=lin&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-117.png"
	width="2880"
	height="578"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-117_hu_5506853d8d259019.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-117_hu_7eaa6f0e8f5b975f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="498"
		data-flex-basis="1195px"
	
></p>
<p>è¡¨ç¤ºç›®æ ‡ä¸»æœºæ²¡æœ‰å®‰è£…å‘½ä»¤</p>
<ul>
<li>ä½¿websrvsä¸»æœºç»„è¿è¡Œå®‰è£…<code>tar</code>å‘½ä»¤</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;dnf install tar -y&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-118.png"
	width="1160"
	height="1484"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-118_hu_48dfe8a4a9f32796.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-118_hu_9af375c235252b01.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="78"
		data-flex-basis="187px"
	
></p>
<ul>
<li>å°†ansibleä¸»æ§ç«¯ä¸‹<code>/data/etc.tar.gz</code>ä¼ è¾“åˆ°websrvsä¸»æœºç»„<code>/data</code>ç›®å½•ä¸‹å¹¶è§£åŒ…ï¼Œå¹¶è®¾ç½®æ‰€æœ‰è€…ä¸ºlin</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m unarchive -a <span class="s1">&#39;src=/data/etc.tar.gz dest=/data owner=lin&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-119.png"
	width="1346"
	height="1478"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-119_hu_43225fe796c599.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-119_hu_73c11253cab8618b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="91"
		data-flex-basis="218px"
	
></p>
<ul>
<li>æŸ¥è¯¢<code>/data</code>ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls /data&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-120.png"
	width="704"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-120_hu_dc503f7b5bf7f3b0.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-120_hu_8bab34f265a747c3.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="414"
		data-flex-basis="993px"
	
></p>
<ul>
<li>æ‹·è´ä¸­æ§ç«¯çš„<code>/data/etc.tar.xz</code>åˆ°websrvsä¸»æœºç»„çš„<code>/data</code>ç›®å½•ä¸‹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m copy -a <span class="s1">&#39;src=/data/etc.tar.xz dest=/data/&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-121.png"
	width="1318"
	height="1258"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-121_hu_ad0d41b627d747be.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-121_hu_3e2cd726c1f06266.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="104"
		data-flex-basis="251px"
	
></p>
<ul>
<li>æŸ¥çœ‹websrvsä¸»æœºç»„çš„<code>/data</code>ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls -l /data&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-122.png"
	width="838"
	height="308"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-122_hu_f901c70854f07990.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-122_hu_646be8cbaf77df18.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="272"
		data-flex-basis="652px"
	
></p>
<ul>
<li>è§£å‹websrvsä¸»æœºç»„<code>/data/etc.tar.xz</code>æ–‡ä»¶åˆ°<code>/opt</code>ç›®å½•ä¸‹ï¼Œå¹¶è®¾ç½®æƒé™ä¸º700</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m unarchive -a <span class="s1">&#39;src=/data/etc.tar.xz dest=/opt/ copy=no mode=700&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-123.png"
	width="1422"
	height="1484"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-123_hu_d1aa75dbd53ad22a.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-123_hu_ed49d2a0e309ae6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="95"
		data-flex-basis="229px"
	
></p>
<ul>
<li>æŸ¥çœ‹websrvsä¸»æœºç»„çš„<code>/opt</code>ç›®å½•</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls -l /opt/&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-124.png"
	width="738"
	height="240"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-124_hu_57d5df6575ecfe3b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-124_hu_bbbc7d0221ff9a13.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="307"
		data-flex-basis="738px"
	
></p>
<ul>
<li>æŸ¥çœ‹è§£å‹çš„<code>/etc</code>ç›®å½•å¤§å°</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;du -sh /opt/etc&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-125.png"
	width="788"
	height="172"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-125_hu_5de98087430167ae.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-125_hu_e595ffb3dd947cb6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="458"
		data-flex-basis="1099px"
	
></p>
<h3 id="archiveæ¨¡å—">Archiveæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šæ‰“åŒ…å‹ç¼©</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m archive -a <span class="s1">&#39;path=/var/log dest=/data/log.tar.bz2 format=bz2&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-9">ç¤ºä¾‹
</h4><ul>
<li>æ‰“åŒ…websrvsä¸»æœºç»„çš„<code>/var/log</code>ç›®å½•ä¸º<code>/data/log.tar.bz2</code>å‹ç¼©åŒ…ï¼Œè®¾ç½®å‹ç¼©åŒ…ç±»å‹ä¸ºbz2ï¼Œæ‰€æœ‰è€…ä¸ºlinï¼Œè®¾ç½®æƒé™ä¸º600</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m archive -a <span class="s1">&#39;path=/var/log/ dest=/data/log.tar.bz2 format=bz2 owner=lin mode=600&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-126.png"
	width="1668"
	height="1482"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-126_hu_7b2b669eba761bf2.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-126_hu_c9cc0a626b325351.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="270px"
	
></p>
<ul>
<li>æŸ¥çœ‹<code>/data/log.tar.bz2</code>æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ls -l /data/log.tar.bz2&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-127.png"
	width="898"
	height="174"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-127_hu_2213c262a6f303d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-127_hu_1948efb7b48450f6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="516"
		data-flex-basis="1238px"
	
></p>
<ul>
<li>æŸ¥çœ‹<code>/data/log.tar.bz2</code>æ–‡ä»¶è¯¦æƒ…</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;file /data/log.tar.bz2&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-128.png"
	width="882"
	height="170"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-128_hu_99288b75ee87dcce.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-128_hu_d596a117788c2b48.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="518"
		data-flex-basis="1245px"
	
></p>
<h3 id="hostnameæ¨¡å—">Hostnameæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šç®¡ç†ä¸»æœºå</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible node1 -m hostname -a <span class="s2">&#34;name=websrv&#34;</span>
</span></span><span class="line"><span class="cl">ansible 192.168.100.18 -m hostname -a <span class="s1">&#39;name=node18.magedu.com&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-10">ç¤ºä¾‹
</h4><ul>
<li>ä¿®æ”¹ä¸»æœº<code>172.16.140.113</code>çš„ä¸»æœºåä¸º<code>centos9.lin.com</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible 172.16.140.113 -m hostname - a <span class="s1">&#39;name=centos9.lin.com&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-129.png"
	width="1120"
	height="406"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-129_hu_15206e6608c1dfa5.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-129_hu_b376d36798f4cc51.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="275"
		data-flex-basis="662px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰ä¸»æœºçš„ä¸»æœºå</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;hostname&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-130.png"
	width="620"
	height="240"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-130_hu_6ef29b4d35a174b7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-130_hu_fe596f335a9e9bf1.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="258"
		data-flex-basis="620px"
	
></p>
<h3 id="cronæ¨¡å—">Cronæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šè®¡åˆ’ä»»åŠ¡
æ”¯æŒæ—¶é—´ï¼šminuteï¼Œhourï¼Œdayï¼Œmonthï¼Œweekday</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># å¤‡ä»½æ•°æ®åº“è„šæœ¬</span>
</span></span><span class="line"><span class="cl">mysqldump -A -F --single-transaction --master-data<span class="o">=</span><span class="m">2</span> -q uroot <span class="p">|</span> gzip &gt; /data/mysql_<span class="sb">`</span>date +%F_%T<span class="sb">`</span>.sql.gz
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºä»»åŠ¡</span>
</span></span><span class="line"><span class="cl">ansible 172.16.140.111 -m cron -a <span class="s1">&#39;hour=2 minute=30 weekday=1-5 name=&#34;baclup mysql&#34; job=/root/mysql_backup.sh&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m cron -a <span class="s2">&#34;minute=*/5 job=&#39;/usr/sbin/ntpdate 172.20.0.1 &amp;&gt;/dev/null&#39; name=Synctime&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ç¦ç”¨è®¡åˆ’ä»»åŠ¡</span>
</span></span><span class="line"><span class="cl">ansible srv -m cron -a <span class="s2">&#34;minute=*/5 job=&#39;/usr/sbin/ntpdate 172.20.0.1 &amp;&gt;/dev/null&#39; name=Synctime disabled=yes&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å¯ç”¨è®¡åˆ’ä»»åŠ¡</span>
</span></span><span class="line"><span class="cl">ansible srv -m cron -a <span class="s2">&#34;minute=*/5 job=&#39;/usr/sbin/ntpdate 172.20.0.1 &amp;&gt;/dev/null&#39; name=Synctime disabled=no&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ é™¤ä»»åŠ¡</span>
</span></span><span class="line"><span class="cl">ansible srv -m cron -a <span class="s2">&#34;name=&#39;backup mysql&#39; state=absent&#34;</span>
</span></span><span class="line"><span class="cl">ansible srv -m cron -a <span class="s1">&#39;state=absent name=Synctime&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-11">ç¤ºä¾‹
</h4><ul>
<li>åœ¨dbsrvsä¸»æœºç»„ä¸­åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆ/root/mysql_backup.shæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯è¯´è¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -m cron -a <span class="s1">&#39;hour=2 minute=30 weekday=1-5 name=&#34;backup mysql&#34; job=/root/mysql_backup.sh&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-131.png"
	width="1694"
	height="380"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-131_hu_3549965a15f8b5c4.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-131_hu_a7e0dcad9a66574e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="445"
		data-flex-basis="1069px"
	
></p>
<ul>
<li>åœ¨dbsrvsä¸»æœºç»„ä¸­æŸ¥çœ‹æ˜¯å¦åˆ›å»ºè®¡åˆ’ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;crontab -l&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-132.png"
	width="704"
	height="142"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-132_hu_7bbb7f0c7e4124d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-132_hu_d44caaee38d25024.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="495"
		data-flex-basis="1189px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ–‡ä»¶<code>/var/spool/cron/root</code>å’Œä¸Šä¸€ä¸ªå‘½ä»¤æ•ˆæœä¸€è‡´</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;cat /var/spool/cron/root&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-133.png"
	width="896"
	height="136"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-133_hu_d9d3082344d76a78.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-133_hu_db51b2df4592fe75.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="658"
		data-flex-basis="1581px"
	
></p>
<ul>
<li>ç¦ç”¨å®šæ—¶ä»»åŠ¡ï¼ˆæ·»åŠ å‚æ•°disabled=yesï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -m cron -a <span class="s1">&#39;hour=2 minute=30 weekday=1-5 name=&#34;backup mysql&#34; job=/root/mysql_backup.sh disabled=yes&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-134.png"
	width="1896"
	height="380"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-134_hu_b66f34d7c2c34143.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-134_hu_1a2100e87feefb86.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="498"
		data-flex-basis="1197px"
	
></p>
<ul>
<li>åœ¨æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;cat /var/spool/cron/root&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-135.png"
	width="892"
	height="140"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-135_hu_149c7076b468d7ce.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-135_hu_6d407ad99cf41ac9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="637"
		data-flex-basis="1529px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°å®šæ—¶ä»»åŠ¡å‰åŠ äº†æ³¨é‡Š</p>
<ul>
<li>å¯ç”¨å®šæ—¶ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -m cron -a <span class="s1">&#39;hour=2 minute=30 weekday=1-5 name=&#34;backup mysql&#34; job=/root/mysql_backup.sh disabled=no&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-136.png"
	width="1880"
	height="380"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-136_hu_ab6c20ace682c992.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-136_hu_6a8af008be789a5e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="494"
		data-flex-basis="1187px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹å®šæ—¶ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;cat /var/spool/cron/root&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-137.png"
	width="894"
	height="138"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-137_hu_42b01d95f41ff722.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-137_hu_a59a4b62e7e10632.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="647"
		data-flex-basis="1554px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°å®šæ—¶ä»»åŠ¡å»äº†æ³¨é‡Š</p>
<ul>
<li>åˆ é™¤nameä¸º<code>backup mysql</code>çš„å®šæ—¶ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -m cron -a <span class="s1">&#39;name=&#34;backup mysql&#34; state=absent&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-138.png"
	width="1132"
	height="314"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-138_hu_c89ec802cfb3818f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-138_hu_cad4c6a8992c4cd5.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="360"
		data-flex-basis="865px"
	
></p>
<ul>
<li>æŸ¥è¯¢æ‰€æœ‰å®šæ—¶ä»»åŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;cat /var/spool/cron/root&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-139.png"
	width="900"
	height="100"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-139_hu_8e71456fd5636e32.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-139_hu_6198737fcb670564.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="900"
		data-flex-basis="2160px"
	
></p>
<h3 id="yumæ¨¡å—">Yumæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šç®¡ç†è½¯ä»¶åŒ…ï¼Œåªæ”¯æŒRHELï¼ŒCentOSï¼Œfedoraï¼Œä¸æ”¯æŒUbuntuå…¶ä»–ç‰ˆæœ¬</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible srv -m yum -a <span class="s1">&#39;name=httpd state=started enabled=yes&#39;</span> <span class="c1"># å®‰è£…</span>
</span></span><span class="line"><span class="cl">ansible srv -m yum -a <span class="s1">&#39;name=httpd state=absent&#39;</span> <span class="c1">#ã€€åˆ é™¤</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-12">ç¤ºä¾‹
</h4><ul>
<li>åœ¨ä¸­æ§ç«¯ä½¿ç”¨yumæ¨¡å—è®©æ‰€æœ‰ä¸»æœºå®‰è£…httpdåŒ…</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m yum -a <span class="s1">&#39;name=httpd&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-140.png"
	width="930"
	height="1478"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-140_hu_ad943e41cd7b883d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-140_hu_f08dc80e5318647e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="62"
		data-flex-basis="151px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰ä¸»æœºçš„httpdåŒ…æƒ…å†µ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;rpm -qi httpd&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-141.png"
	width="1196"
	height="1484"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-141_hu_4375b802d0c23978.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-141_hu_3c10884ef6f4800d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="80"
		data-flex-basis="193px"
	
></p>
<ul>
<li>åœ¨ä¸­æ§ç«¯ä½¿ç”¨yumæ¨¡å—å¸è½½æ‰€æœ‰ä¸»æœºçš„httpdåŒ…</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m yum -a <span class="s1">&#39;name=httpd state=absent&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-142.png"
	width="938"
	height="1264"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-142_hu_29fa5f86f3d517e3.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-142_hu_99eb9e28296c03d7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="74"
		data-flex-basis="178px"
	
></p>
<h3 id="serviceæ¨¡å—">Serviceæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šç®¡ç†æœåŠ¡</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible srv -m service -a <span class="s1">&#39;name=httpd state=started enabled=yes&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m service -a <span class="s1">&#39;name=httpd state=stopped&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m service -a <span class="s1">&#39;name=httpd state=reloaded&#39;</span>
</span></span><span class="line"><span class="cl">ansible srv -m shell -a <span class="s2">&#34;sed -i &#39;s/^Listen 80/Listen 8080/&#39; /etc/httpd/conf/httpd.conf&#34;</span>
</span></span><span class="line"><span class="cl">ansible srv -m service -a <span class="s1">&#39;name=httpd state=restarted&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-13">ç¤ºä¾‹
</h4><ul>
<li>ä½¿ç”¨ä¸­æ§ç«¯è®©æ‰€æœ‰ä¸»æœºå®‰è£…httpdæœåŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m yum -a <span class="s1">&#39;name=httpd&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-144.png"
	width="872"
	height="1260"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-144_hu_181a542f83af927f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-144_hu_a89eb6a1a14b1b8d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="69"
		data-flex-basis="166px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰ä¸»æœºçš„ç«¯å£å·</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;ss -ntl&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-143.png"
	width="858"
	height="442"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-143_hu_a40b0695d6204b8f.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-143_hu_f60846cd6c0c9082.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="194"
		data-flex-basis="465px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°æ‰€æœ‰ä¸»æœºéƒ½åªå¯åŠ¨äº†22ç«¯å£</p>
<ul>
<li>è®©æ‰€æœ‰ä¸»æœºå¯åŠ¨httpdæœåŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m service -a <span class="s1">&#39;name=httpd state=started&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-145.png"
	width="2880"
	height="1476"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-145_hu_bd64899d2ccf9b7b.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-145_hu_1d698a577fc842d9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="195"
		data-flex-basis="468px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹è¢«æ§ç«¯çš„ç«¯å£æƒ…å†µ</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;ss -ntl&#39;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-146.png"
	width="836"
	height="548"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-146_hu_4a9ae818a905f93c.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-146_hu_6c43e23a5a881faa.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="152"
		data-flex-basis="366px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°80ç«¯å£æ­£åœ¨è¢«ç›‘å¬ã€‚</p>
<ul>
<li>å¯åŠ¨ï¼Œå¹¶è®¾ç½®æœåŠ¡å¼€æœºé»˜è®¤å¯åŠ¨</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m service -a <span class="s1">&#39;name=httpd state=started enabled=yes&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä¸­enabled=yesè¡¨ç¤ºå¼€æœºé»˜è®¤å¯åŠ¨</p>
<ul>
<li>æŸ¥çœ‹httpdç›‘å¬ç«¯å£çš„é…ç½®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;grep ^Listen /etc/httpd/conf/httpd.conf&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-147.png"
	width="1062"
	height="242"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-147_hu_cae47610c95873d7.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-147_hu_b1766d787f45da57.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="438"
		data-flex-basis="1053px"
	
></p>
<ul>
<li>ä¿®æ”¹æ–‡ä»¶ç›‘å¬ç«¯å£çš„80æ”¹ä¸º8080</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s2">&#34;sed -i &#39;s/^Listen 80/Listen 8080/&#39; /etc/httpd/conf/httpd.conf&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è§£æï¼š</p>
<p><code>sed</code>è¡¨ç¤ºç¼–è¾‘æ–‡ä»¶å‘½ä»¤</p>
<ol>
<li><code>-i</code>è¡¨ç¤ºç›´æ¥ä¿®æ”¹åŸæ–‡ä»¶</li>
<li><code>s</code>è¡¨ç¤ºå–ä»£</li>
<li><code>s/^Listen 80/Listen 8080/</code>è¡¨ç¤ºä¸ºå°†å¼€å¤´ä¸º<code>Listen 80</code>æ›¿æ¢ä¸º<code>Listen 8080</code></li>
</ol>
<p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-148.png"
	width="1386"
	height="232"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-148_hu_488cb0eab87f6e65.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-148_hu_1b0d5cca8a73ada0.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="597"
		data-flex-basis="1433px"
	
></p>
<ul>
<li>æŸ¥çœ‹ä¿®æ”¹åçš„ç›‘å¬é…ç½®</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;grep ^Listen /etc/httpd/conf/httpd.conf&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-149.png"
	width="1062"
	height="242"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-149_hu_54957a0851967e95.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-149_hu_3457493299756cb7.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="438"
		data-flex-basis="1053px"
	
></p>
<ul>
<li>æŸ¥çœ‹æ‰€æœ‰è¢«æ§æœºçš„ç›‘å¬ç«¯å£</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;ss -ntl&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-150.png"
	width="874"
	height="544"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-150_hu_309587b67b09bb7e.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-150_hu_be05f450e4d90c4f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="160"
		data-flex-basis="385px"
	
></p>
<ul>
<li>è®©æ‰€æœ‰è¢«æ§ç«¯é‡å¯httpdæœåŠ¡</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m service -a <span class="s1">&#39;name=httpd state=restarted&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-151.png"
	width="2880"
	height="1472"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-151_hu_c24d03ca0e1caaea.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-151_hu_7265eda9a27cba62.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="195"
		data-flex-basis="469px"
	
></p>
<p>é‡å¯httpdæœåŠ¡ã€‚</p>
<ul>
<li>å†æ¬¡æŸ¥è¯¢ç›‘å¬ç«¯å£</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;ss -ntl&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-152.png"
	width="858"
	height="548"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-152_hu_4b4b66359b7ec4d2.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-152_hu_1bf3f65f564e7633.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="156"
		data-flex-basis="375px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°ç›‘å¬çš„80ç«¯å£ç»Ÿä¸€ä¸º8080ç«¯å£äº†ã€‚</p>
<h3 id="useræ¨¡å—">Useræ¨¡å—
</h3><p>åŠŸèƒ½ï¼šç®¡ç†ç”¨æˆ·</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç”¨æˆ·</span>
</span></span><span class="line"><span class="cl">ansible srv -m user -a <span class="s1">&#39;name=user1 comment=&#34;test user&#34; uid=2048 home=/app/user1 group=root&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç”¨æˆ·ï¼ˆç”¨æˆ·åä¸ºnginxï¼Œå¤‡æ³¨ä¸ºnginxï¼Œuidä¸º88ï¼Œç»„ä¸ºnginxã€äº‹å…ˆæœ‰ã€‘ï¼Œé™„åŠ ç»„ä¸ºrootå’Œdaemonï¼Œshellç±»å‹ä¸º/sbin/nologinï¼Œæ˜¯ç³»ç»Ÿè´¦å·ï¼Œä¸åˆ›å»ºå®¶ç›®å½•ï¼Œå®¶ç›®å½•è·¯å¾„ä¸º/data/nginxï¼Œä¸è¦æ±‚å”¯ä¸€æ€§ä¸ºyesï¼‰</span>
</span></span><span class="line"><span class="cl">ansible srv -m user -a <span class="s1">&#39;name=nginx comment=nginx uid=88 group=nginx groups=&#34;root,daemon&#34; shell=/sbin/nologin system=yes create_home=no home=/data/nignx non_unique=yes&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ é™¤ç”¨æˆ·åŠå®¶ç›®å½•ç­‰æ•°æ®ï¼ˆabsentè¡¨ç¤ºåˆ é™¤ç”¨æˆ·ï¼Œremove=yesè¡¨ç¤ºåˆ é™¤å®¶ç›®å½•ï¼‰</span>
</span></span><span class="line"><span class="cl">ansible srv -m user -a <span class="s1">&#39;name=nginx state=absent remove=yes&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="groupæ¨¡å—">Groupæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šç®¡ç†ç»„</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># åˆ›å»ºç»„</span>
</span></span><span class="line"><span class="cl">ansible websrvs -m group -a <span class="s1">&#39;name=nginx gid=88 system=yes&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ é™¤ç»„</span>
</span></span><span class="line"><span class="cl">ansible websrvs -m group -a <span class="s1">&#39;name=nginx state=absent&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="lineinfileæ¨¡å—">Lineinfileæ¨¡å—
</h3><p>ansibleåœ¨ä½¿ç”¨sedè¿›è¡Œæ›¿æ¢æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦è½¬ä¹‰çš„é—®é¢˜ï¼Œè€Œä¸”ansibleåœ¨é‡åˆ°ç‰¹æ®Šå­—ç¬¦è¿›è¡Œæ›¿æ¢æ—¶ï¼Œå­˜åœ¨é—®é¢˜ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œæ›¿æ¢ã€‚å…¶å®åœ¨ansibleè‡ªèº«æä¾›äº†ä¸¤ä¸ªæ¨¡å—ï¼šlineinfileæ¨¡å—å’Œreplaceæ¨¡å—ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ›¿æ¢ã€‚</p>
<p>åŠŸèƒ½ï¼šç›¸å½“äºsedï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m lineinfile -a <span class="s2">&#34;path=/etc/selinux/config regexp=&#39;^SELINUX=&#39; line=&#39;SELINUX=enforcing&#39;&#34;</span>
</span></span><span class="line"><span class="cl">ansible all -m lineinfile -a <span class="s1">&#39;dest=/etc/fstab state=absent regexp=&#34;^#&#34;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-14">ç¤ºä¾‹
</h4><ul>
<li>æŸ¥çœ‹æ–‡ä»¶<code>/etc/selinux/config</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ansible all -a &#39;cat /etc/selinux/config&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-153.png"
	width="2880"
	height="1482"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-153_hu_b734beefc7c9007.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-153_hu_fab66801314bb75e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="194"
		data-flex-basis="466px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°å…¶ä¸­çš„SELINUXå€¼ä¸ºenforcing</p>
<ul>
<li>å°†SELINUX=enforcingæ”¹ä¸ºSELINUX=disabled</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ansible all -m lineinfile -a <span class="s2">&#34;path=/etc/selinux/config regexp=&#39;^SELINUX=&#39; line=&#39;SELINUX=disabled&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-154.png"
	width="1668"
	height="854"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-154_hu_f7b88639bf777076.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-154_hu_b424ef037e857c43.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="195"
		data-flex-basis="468px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹æ‰€æœ‰è¢«æ§ç«¯çš„<code>/etc/selinux/config</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ansibel all -a <span class="s1">&#39;cat /etc/selinux/config&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-155.png"
	width="2880"
	height="1478"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-155_hu_21a3ca19ef28af9d.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-155_hu_e4a6497f37134b32.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="194"
		data-flex-basis="467px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°SELINUX=enforcingå·²ç»è¢«ä¿®æ”¹æˆäº†SELINUX=disabled</p>
<ul>
<li>æŸ¥çœ‹è¢«æ§ç«¯<code>/etc/fstab</code>æ–‡ä»¶</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;cat /etc/fstab&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-156.png"
	width="1282"
	height="1478"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-156_hu_98a9a8b629c9536.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-156_hu_e10523ac034c31fc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="86"
		data-flex-basis="208px"
	
></p>
<ul>
<li>æ¸…ç©ºæ‰€æœ‰è¢«æ§ç«¯<code>/etc/fstab</code>çš„æ³¨é‡Šï¼Œå³åˆ é™¤<code>#</code>å¼€å¤´çš„å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m lineinfile -a <span class="s1">&#39;dest=/etc/fstab state=absent regexp=&#34;^#&#34;&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-157.png"
	width="1278"
	height="950"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-157_hu_733a2e78b6375869.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-157_hu_ab01ab0170c15360.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="134"
		data-flex-basis="322px"
	
></p>
<ul>
<li>å†æ¬¡æŸ¥çœ‹æ‰€æœ‰è¢«æ§ç«¯<code>/etc/fstab</code>æ–‡ä»¶å†…å®¹</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -a <span class="s1">&#39;cat /etc/fstab&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansible%E5%9F%BA%E7%A1%80/image-158.png"
	width="1378"
	height="648"
	srcset="/p/ansible%E5%9F%BA%E7%A1%80/image-158_hu_48cd48e6f551bf5a.png 480w, /p/ansible%E5%9F%BA%E7%A1%80/image-158_hu_68e949ebd561f553.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="510px"
	
></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ³¨é‡Šå†…å®¹å·²ç»è¢«æ¸…ç©ºäº†ã€‚</p>
<h3 id="replaceæ¨¡å—">Replaceæ¨¡å—
</h3><p>è¯¥æ¨¡å—æœ‰ç‚¹ç±»ä¼¼äºsedå‘½ä»¤ï¼Œä¸»è¦ä¹Ÿæ˜¯åŸºäºæ­£åˆ™è¿›è¡ŒåŒ¹é…å’Œæ›¿æ¢ã€‚</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible all -m replace -a <span class="s2">&#34;path=/etc/fstab regexp=&#39;^(UUID.*)&#39; replace=&#39;#\1&#39;&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>è§£æï¼š
<ul>
<li><code>regexp='^(UUID.*)'</code>ï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä»¥ UUID å¼€å¤´çš„è¡Œ</li>
<li><code>replace='#\1'</code>ï¼šæ›¿æ¢å†…å®¹ï¼Œåœ¨åŒ¹é…è¡Œå‰åŠ  <code>#</code> æ³¨é‡Š</li>
<li><code>\1</code>ï¼šå¼•ç”¨ç¬¬ä¸€ä¸ªæ•è·ç»„çš„å†…å®¹ï¼ˆæ•´ä¸ªåŒ¹é…çš„è¡Œï¼‰</li>
</ul>
</li>
</ul>
<h4 id="ç¤ºä¾‹-15">ç¤ºä¾‹
</h4><ul>
<li>åœ¨</li>
</ul>
<h3 id="setupæ¨¡å—">Setupæ¨¡å—
</h3><p>åŠŸèƒ½ï¼šsetupæ¨¡å—æ¥æ”¶é›†ä¸»æœºçš„ç³»ç»Ÿä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç›´æ¥ä»¥å˜é‡çš„å½¢å¼ä½¿ç”¨ï¼Œä½†æ˜¯å¦‚æœä¸»æœºè¾ƒå¤šï¼Œä¼šå½±å“æ‰§è¡Œé€Ÿåº¦ï¼Œå¯ä»¥ä½¿ç”¨<code>gather_facts: no</code>æ¥ç¦æ­¢Ansibleæ”¶é›†factsä¿¡æ¯ã€‚</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible srv -m setup
</span></span><span class="line"><span class="cl">ansible srv -m setup -a <span class="s2">&#34;filter=ansible_nodename&#34;</span>
</span></span><span class="line"><span class="cl">ansible srv -m setup -a <span class="s2">&#34;filter=ansible_hostname&#34;</span>
</span></span><span class="line"><span class="cl">ansible srv -m setup -a <span class="s2">&#34;filter=ansible_domain&#34;</span>
</span></span><span class="line"><span class="cl">ansible srv -m setup -a <span class="s2">&#34;filter=ansible_memtotal_mb&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/ansible%E5%AE%89%E8%A3%85/">
        
        

        <div class="article-details">
            <h2 class="article-title">[Ansible]å®‰è£…</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2025 - 
        
        2026 ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
