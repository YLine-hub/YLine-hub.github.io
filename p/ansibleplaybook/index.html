<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="Playbook Playbookä»‹ç» playbookå‰§æœ¬æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªâ€œplayâ€ç»„æˆçš„åˆ—è¡¨ã€‚ playçš„ä¸»è¦åŠŸèƒ½åœ¨äºå°†é¢„å®šä¹‰çš„ä¸€ç»„ä¸»æœºï¼Œè£…æ‰®æˆäº‹å…ˆé€šè¿‡ansibleä¸­çš„taskå®šä¹‰å¥½çš„è§’è‰²ã€‚Taskå®é™…æ˜¯è°ƒç”¨ansibleçš„ä¸€ä¸ªmoduleï¼Œå°†å¤šä¸ªplayç»„ç»‡åœ¨ä¸€ä¸ªplaybookä¸­ï¼Œå³å¯ä»¥è®©å®ƒä»¬è”åˆèµ·æ¥ï¼ŒæŒ‰äº‹å…ˆç¼–æ’çš„æœºåˆ¶æ‰§è¡Œé¢„å®šä¹‰çš„åŠ¨ä½œã€‚ Playbookæ–‡ä»¶é‡‡ç”¨YAMLè¯­è¨€ç¼–å†™çš„ã€‚\n">
<title>[Ansible]Playbook</title>

<link rel='canonical' href='https://YLine-hub.github.io/p/ansibleplaybook/'>

<link rel="stylesheet" href="/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css"><meta property='og:title' content="[Ansible]Playbook">
<meta property='og:description' content="Playbook Playbookä»‹ç» playbookå‰§æœ¬æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªâ€œplayâ€ç»„æˆçš„åˆ—è¡¨ã€‚ playçš„ä¸»è¦åŠŸèƒ½åœ¨äºå°†é¢„å®šä¹‰çš„ä¸€ç»„ä¸»æœºï¼Œè£…æ‰®æˆäº‹å…ˆé€šè¿‡ansibleä¸­çš„taskå®šä¹‰å¥½çš„è§’è‰²ã€‚Taskå®é™…æ˜¯è°ƒç”¨ansibleçš„ä¸€ä¸ªmoduleï¼Œå°†å¤šä¸ªplayç»„ç»‡åœ¨ä¸€ä¸ªplaybookä¸­ï¼Œå³å¯ä»¥è®©å®ƒä»¬è”åˆèµ·æ¥ï¼ŒæŒ‰äº‹å…ˆç¼–æ’çš„æœºåˆ¶æ‰§è¡Œé¢„å®šä¹‰çš„åŠ¨ä½œã€‚ Playbookæ–‡ä»¶é‡‡ç”¨YAMLè¯­è¨€ç¼–å†™çš„ã€‚\n">
<meta property='og:url' content='https://YLine-hub.github.io/p/ansibleplaybook/'>
<meta property='og:site_name' content='ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2026-01-11T18:23:12&#43;08:00'/><meta property='article:modified_time' content='2026-01-11T18:23:12&#43;08:00'/>
<meta name="twitter:title" content="[Ansible]Playbook">
<meta name="twitter:description" content="Playbook Playbookä»‹ç» playbookå‰§æœ¬æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªâ€œplayâ€ç»„æˆçš„åˆ—è¡¨ã€‚ playçš„ä¸»è¦åŠŸèƒ½åœ¨äºå°†é¢„å®šä¹‰çš„ä¸€ç»„ä¸»æœºï¼Œè£…æ‰®æˆäº‹å…ˆé€šè¿‡ansibleä¸­çš„taskå®šä¹‰å¥½çš„è§’è‰²ã€‚Taskå®é™…æ˜¯è°ƒç”¨ansibleçš„ä¸€ä¸ªmoduleï¼Œå°†å¤šä¸ªplayç»„ç»‡åœ¨ä¸€ä¸ªplaybookä¸­ï¼Œå³å¯ä»¥è®©å®ƒä»¬è”åˆèµ·æ¥ï¼ŒæŒ‰äº‹å…ˆç¼–æ’çš„æœºåˆ¶æ‰§è¡Œé¢„å®šä¹‰çš„åŠ¨ä½œã€‚ Playbookæ–‡ä»¶é‡‡ç”¨YAMLè¯­è¨€ç¼–å†™çš„ã€‚\n">
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_de528bff5d5e9598.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ–ï¸</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°</a></h1>
            <h2 class="site-description">åŠªåŠ›ä¸ä¸€å®šèƒ½è·å¾—å›æŠ¥ï¼Œä½†ä¸åŠªåŠ›ä¸€å®šä¸ä¼šæœ‰å›æŠ¥ã€‚</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#playbookä»‹ç»">Playbookä»‹ç»</a></li>
    <li><a href="#yamlè¯­è¨€">YAMLè¯­è¨€</a>
      <ol>
        <li><a href="#yamlè¯­è¨€ä»‹ç»">YAMLè¯­è¨€ä»‹ç»</a></li>
        <li><a href="#yamlè¯­è¨€ç‰¹æ€§">YAMLè¯­è¨€ç‰¹æ€§</a></li>
        <li><a href="#yamlè¯­æ³•ç®€ä»‹">YAMLè¯­æ³•ç®€ä»‹</a>
          <ol>
            <li><a href="#liståˆ—è¡¨">Liståˆ—è¡¨</a></li>
            <li><a href="#dictionaryå­—å…¸">Dictionaryå­—å…¸</a></li>
          </ol>
        </li>
        <li><a href="#ä¸‰ç§å¸¸è§çš„æ ¼å¼">ä¸‰ç§å¸¸è§çš„æ ¼å¼</a></li>
      </ol>
    </li>
    <li><a href="#playbookæ ¸å¿ƒå…ƒç´ ">Playbookæ ¸å¿ƒå…ƒç´ </a>
      <ol>
        <li><a href="#hostsç»„ä»¶">hostsç»„ä»¶</a></li>
        <li><a href="#remote_userç»„ä»¶">remote_userç»„ä»¶</a></li>
        <li><a href="#taskåˆ—è¡¨å’Œactionç»„ä»¶">taskåˆ—è¡¨å’Œactionç»„ä»¶</a></li>
        <li><a href="#å…¶ä»–ç»„ä»¶">å…¶ä»–ç»„ä»¶</a></li>
        <li><a href="#shellscript-vs-playbookæ¡ˆä¾‹">ShellScript VS Playbookæ¡ˆä¾‹</a></li>
      </ol>
    </li>
    <li><a href="#playbookå‘½ä»¤">Playbookå‘½ä»¤</a></li>
    <li><a href="#playbookåˆæ­¥">Playbookåˆæ­¥</a>
      <ol>
        <li><a href="#åˆ©ç”¨playbookåˆ›å»ºmysqlç”¨æˆ·">åˆ©ç”¨playbookåˆ›å»ºmysqlç”¨æˆ·</a>
          <ol>
            <li><a href="#ç¤ºä¾‹">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#åˆ©ç”¨playbookå®‰è£…nginx">åˆ©ç”¨playbookå®‰è£…nginx</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-1">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#åˆ©ç”¨playbookå®‰è£…å’Œå¸è½½httpd">åˆ©ç”¨playbookå®‰è£…å’Œå¸è½½httpd</a>
          <ol>
            <li><a href="#ç¤ºä¾‹-2">ç¤ºä¾‹</a></li>
          </ol>
        </li>
        <li><a href="#åˆ©ç”¨playbookå®‰è£…mysql">åˆ©ç”¨playbookå®‰è£…mysql</a>
          <ol>
            <li><a href="#å®‰è£…å‰ç½®">å®‰è£…å‰ç½®</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/ansible/" >
                Ansible
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/ansibleplaybook/">[Ansible]Playbook</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2026-01-11</time>
            </div>
        

        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="playbook">Playbook
</h1><h2 id="playbookä»‹ç»">Playbookä»‹ç»
</h2><p><img src="/p/ansibleplaybook/image.png"
	width="1594"
	height="584"
	srcset="/p/ansibleplaybook/image_hu_6c76e71b093f0ef1.png 480w, /p/ansibleplaybook/image_hu_5f16c671fb3435fc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="272"
		data-flex-basis="655px"
	
></p>
<blockquote>
<p>playbookå‰§æœ¬æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªâ€œplayâ€ç»„æˆçš„åˆ—è¡¨ã€‚</br>
playçš„ä¸»è¦åŠŸèƒ½åœ¨äºå°†é¢„å®šä¹‰çš„ä¸€ç»„ä¸»æœºï¼Œè£…æ‰®æˆäº‹å…ˆé€šè¿‡ansibleä¸­çš„taskå®šä¹‰å¥½çš„è§’è‰²ã€‚Taskå®é™…æ˜¯è°ƒç”¨ansibleçš„ä¸€ä¸ªmoduleï¼Œå°†å¤šä¸ªplayç»„ç»‡åœ¨ä¸€ä¸ªplaybookä¸­ï¼Œå³å¯ä»¥è®©å®ƒä»¬è”åˆèµ·æ¥ï¼ŒæŒ‰äº‹å…ˆç¼–æ’çš„æœºåˆ¶æ‰§è¡Œé¢„å®šä¹‰çš„åŠ¨ä½œã€‚</br>
Playbookæ–‡ä»¶é‡‡ç”¨YAMLè¯­è¨€ç¼–å†™çš„ã€‚</p>
</blockquote>
<h2 id="yamlè¯­è¨€">YAMLè¯­è¨€
</h2><h3 id="yamlè¯­è¨€ä»‹ç»">YAMLè¯­è¨€ä»‹ç»
</h3><blockquote>
<p>YAMLæ˜¯ä¸€ä¸ªå¯è¯»æ€§é«˜çš„ç”¨æ¥è¡¨è¾¾èµ„æ–™åºåˆ—çš„æ ¼å¼ã€‚YAMLå‚è€ƒäº†å…¶ä»–å¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬ï¼šXMLã€Cè¯­è¨€ã€Pythonã€Perlä»¥åŠç”µå­é‚®ä»¶æ ¼å¼RFC2822ç­‰ã€‚Clark Evansåœ¨2001å¹´åœ¨é¦–æ¬¡å‘è¡¨äº†è¿™ç§è¯­è¨€ï¼Œå¦å¤–Ingy dÃ¶t Netä¸Oren Ben-Kikiä¹Ÿæ˜¯è¿™ç§è¯­è¨€çš„å…±åŒè®¾è®¡è€…ï¼Œç›®å‰å¾ˆå¤šè½¯ä»¶ä¸­é‡‡æœ‰æ­¤æ ¼å¼çš„æ–‡ä»¶ï¼Œå¦‚ï¼šubuntuï¼Œansibleï¼Œdockerï¼Œk8sç­‰</br>
YAMLï¼šYAML Ainâ€˜t Markup Languageï¼Œå³YAMLä¸æ˜¯XMLã€‚ä¸è¿‡ï¼Œåœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAMLçš„æ„æ€å…¶å®æ˜¯ï¼šâ€œYet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</p>
</blockquote>
<p><a class="link" href="http://www.yaml.org"  target="_blank" rel="noopener"
    >YAMLå®˜æ–¹ç½‘ç«™</a></p>
<h3 id="yamlè¯­è¨€ç‰¹æ€§">YAMLè¯­è¨€ç‰¹æ€§
</h3><ul>
<li>YAMLçš„å¯è¯»æ€§å¥½</li>
<li>YAMlå’Œè„šæœ¬è¯­è¨€çš„äº¤äº’æ€§å¥½</li>
<li>YAMLä½¿ç”¨å®ç°è¯­è¨€çš„æ•°æ®ç±»å‹</li>
<li>YAMLæœ‰ä¸€ä¸ªä¸€è‡´çš„ä¿¡æ¯æ¨¡å‹</li>
<li>YAMLæ˜“äºå®ç°</li>
<li>YAMLå¯ä»¥åŸºäºæµæ¥å¤„ç†</li>
<li>YAMLè¡¨è¾¾èƒ½åŠ›å¼ºï¼Œæ‰©å±•æ€§å¥½</li>
</ul>
<h3 id="yamlè¯­æ³•ç®€ä»‹">YAMLè¯­æ³•ç®€ä»‹
</h3><ul>
<li>åœ¨å•ä¸€æ–‡ä»¶ç¬¬ä¸€è¡Œï¼Œç”¨è¿ç»­ä¸‰ä¸ªè¿å­—å·â€œ-â€å¼€å§‹ï¼Œè¿˜æœ‰é€‰æ‹©æ€§çš„è¿ç»­ä¸‰ä¸ªç‚¹å·(&hellip;)ç”¨æ¥è¡¨ç¤ºæ–‡ä»¶çš„ç»“å°¾</li>
<li>æ¬¡è¡Œå¼€å§‹æ­£å¸¸å†™Playbookçš„å†…å®¹ï¼Œä¸€èˆ¬å»ºè®®å†™æ˜è¯¥Playbookçš„åŠŸèƒ½</li>
<li>ä½¿ç”¨#å·æ³¨é‡Šä»£ç </li>
<li>ç¼©è¿›å¿…é¡»æ˜¯ç»Ÿä¸€çš„ï¼Œä¸èƒ½ä½¿ç”¨ç©ºæ ¼å’Œtabæ··ç”¨</li>
<li>ç¼©è¿›çš„çº§åˆ«ä¹Ÿå¿…é¡»æ˜¯ä¸€è‡´çš„ï¼ŒåŒæ ·çš„ç¼©è¿›ä»£è¡¨åŒæ ·çš„çº§åˆ«ï¼Œç¨‹åºåˆ¤åˆ«é…ç½®çš„çº§åˆ«æ˜¯é€šè¿‡ç¼©è¿›ç»“åˆæ¢è¡Œæ¥å®ç°çš„</li>
<li>YAMLæ–‡ä»¶å†…å®¹æ˜¯åŒºåˆ«å¤§å°å†™çš„ï¼Œkey/valueçš„å€¼å‡éœ€å¤§å°å†™æ•æ„Ÿ</li>
<li>å¤šä¸ªk/vå¯åŒè¡Œå†™ä¹Ÿå¯æ¢è¡Œå†™ï¼ŒåŒè¡Œä½¿ç”¨ï¼Œåˆ†éš”</li>
<li>vå¯æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨</li>
<li>ä¸€ä¸ªå®Œæ•´çš„ä»£ç å—åŠŸèƒ½éœ€æœ€å°‘å…ƒç´ åŒ…æ‹¬nameå’Œtask</li>
<li>ä¸€ä¸ªnameåªèƒ½åŒ…æ‹¬ä¸€ä¸ªtask</li>
<li>YAMLæ–‡ä»¶æ‰©å±•åé€šå¸¸ä¸ºymlæˆ–yaml</li>
</ul>
<p>YAMLçš„è¯­æ³•å’Œå…¶ä»–é«˜é˜¶è¯­è¨€ç±»ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ç®€å•è¡¨è¾¾æ¸…å•ã€æ•£åˆ—è¡¨ã€æ ‡é‡ç­‰æ•°æ®ç»“æ„ã€‚å…¶ç»“æ„ï¼ˆStructureï¼‰é€šè¿‡ç©ºæ ¼æ¥å±•ç¤ºï¼Œåºåˆ—ï¼ˆSequenceï¼‰é‡Œçš„é¡¹ç”¨â€œ-â€æ¥ä»£è¡¨ï¼ŒMapé‡Œçš„é”®å€¼å¯¹ç”¨â€œ:â€åˆ†éš”ï¼Œä¸‹é¢ä»‹ç»å¸¸è§çš„æ•°æ®ç»“æ„ã€‚</p>
<h4 id="liståˆ—è¡¨">Liståˆ—è¡¨
</h4><p>åˆ—è¡¨ç”±å¤šä¸ªå…ƒç´ ç»„æˆï¼Œä¸”æ‰€æœ‰å…ƒç´ å‰å‡ä½¿ç”¨â€œ-â€æ‰“å¤´
èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># A list of fruits</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="l">Apple</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="l">Orange</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="l">Strawberry</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="l">Mango</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">[</span><span class="l">Apple,Orange,Strawberry,Mango]</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="dictionaryå­—å…¸">Dictionaryå­—å…¸
</h4><p>å­—å…¸é€šå¸¸ç”±å¤šä¸ªkeyä¸valueæ„æˆ
èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># An employee record</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Example Developer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">job</span><span class="p">:</span><span class="w"> </span><span class="l">Developer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">skill</span><span class="p">:</span><span class="w"> </span><span class="l">Elite</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># ä¹Ÿå¯ä»¥å°†key:valueæ”¾ç½®äº{}ä¸­è¿›è¡Œè¡¨ç¤ºï¼Œç”¨,åˆ†éš”å¤šä¸ªkey:value</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># An employee record</span><span class="w">
</span></span></span><span class="line"><span class="cl">{<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Example Developer&#34;</span><span class="nt">,job</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Developer&#34;</span><span class="nt">,skill</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Elite&#34;</span>}<span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ï¼šåˆ—è¡¨å’Œå­—å…¸å¯ä»¥äº’ç›¸åµŒå¥—</p>
<p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">John Smith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="m">41</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="l">Male</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spouse</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">jane Smith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="m">37</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="l">Female</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">children</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Jimmy Simth</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="m">17</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="l">Male</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Jenny Smith</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">age</span><span class="p">:</span><span class="w"> </span><span class="m">13</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">gender</span><span class="p">:</span><span class="w"> </span><span class="l">Female</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä¸‰ç§å¸¸è§çš„æ ¼å¼">ä¸‰ç§å¸¸è§çš„æ ¼å¼
</h3><ul>
<li>XMLï¼šExtensible Markup Languageï¼Œå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼Œå¯ç”¨äºæ•°æ®äº¤æ¢å’Œé…ç½®</li>
<li>JSONï¼šJavaScript Object Notationï¼ŒjavaScriptå¯¹è±¡æ ‡è®°è¯­è¨€ï¼Œä¸»è¦ç”¨æ¥æ•°æ®äº¤æ¢æˆ–é…ç½®ï¼Œä¸æ”¯æŒæ³¨è§£</li>
<li>YAMLï¼šYAML Ainâ€˜t Markup Language YAMLä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œä¸»è¦ç”¨æ¥é…ç½®ï¼Œå¤§å°å†™æ•æ„Ÿï¼Œä¸æ”¯æŒtab</li>
</ul>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>XML</th>
          <th>JSON</th>
          <th>YAML</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>&lt;Servers&gt;</br>â€ƒ&lt;Server&gt;</br>â€ƒâ€ƒ&lt;name&gt;Server1&lt;/name&gt;</br>â€ƒâ€ƒ&lt;owner&gt;John&lt;/owner&gt;</br>â€ƒâ€ƒ&lt;created&gt;123456&lt;/created&gt;</br>â€ƒâ€ƒ&lt;status&gt;active&lt;/status&gt;</br>â€ƒ&lt;/Server&gt;</br>&lt;/Servers&gt;</td>
          <td>{</br>â€ƒServers: [</br>â€ƒâ€ƒ{</br>â€ƒâ€ƒâ€ƒname: Server1,</br>â€ƒâ€ƒâ€ƒowner: John,</br>â€ƒâ€ƒâ€ƒcreated: 123456,</br>â€ƒâ€ƒâ€ƒstatus: active</br>â€ƒâ€ƒ}</br>â€ƒ]</br>}</td>
          <td>Servers:</br>â€ƒname: Server1</br>â€ƒowner: John</br>â€ƒcreated: 123456</br>â€ƒstatus: active</br></td>
      </tr>
  </tbody>
</table></div>
<p>å¯ä»¥ç”¨å·¥å…·ç›¸äº’è½¬æ¢ã€‚</br>
å‚è€ƒç½‘ç«™ï¼šhttps://www.json2yaml.com</br>
æ–°ç½‘å€ï¼šhttps://www.bairesdev.com/tools/json2yaml/</p>
<h2 id="playbookæ ¸å¿ƒå…ƒç´ ">Playbookæ ¸å¿ƒå…ƒç´ 
</h2><ul>
<li>Hosts æ‰§è¡Œçš„è¿œç¨‹ä¸»æœºåˆ—è¡¨</li>
<li>Tasks ä»»åŠ¡é›†</li>
<li>Variables å†…ç½®å˜é‡æˆ–è‡ªå®šä¹‰å˜é‡åœ¨playbookä¸­è°ƒç”¨</li>
<li>Templates æ¨¡æ¿ï¼Œå¯æ›¿æ¢æ¨¡æ¿æ–‡ä»¶ä¸­çš„å˜é‡å¹¶å®ç°ä¸€äº›ç®€å•é€»è¾‘çš„æ–‡ä»¶</li>
<li>Handlers å’Œ notify ç»“åˆä½¿ç”¨ï¼Œç”±ç‰¹å®šæ¡ä»¶è§¦å‘çš„æ“ä½œï¼Œæ»¡è¶³æ¡ä»¶æ–¹æ‰æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œ</li>
<li>tagsæ ‡ç­¾ æŒ‡å®šæŸæ¡ä»»åŠ¡æ‰§è¡Œï¼Œç”¨äºé€‰æ‹©è¿è¡Œplaybookä¸­çš„éƒ¨åˆ†ä»£ç ã€‚ansibleå…·æœ‰å¹‚ç­‰æ€§ï¼Œå› æ­¤ä¼šè‡ªåŠ¨è·³è¿‡æ²¡æœ‰å˜åŒ–çš„éƒ¨åˆ†ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæœ‰äº›ä»£ç ä¸ºæµ‹è¯•å…¶ç¡®å®šæ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ä¾ç„¶ä¼šéå¸¸åœ°é•¿ã€‚æ­¤æ—¶ï¼Œå¦‚æœç¡®ä¿¡æ²¡æœ‰å˜åŒ–ï¼Œå°±å¯ä»¥é€šè¿‡tagsè·³è¿‡è¿™äº›ä»£ç ç‰‡æ®µã€‚</li>
</ul>
<h3 id="hostsç»„ä»¶">hostsç»„ä»¶
</h3><p>Hostsï¼šplaybookä¸­çš„æ¯ä¸€ä¸ªplayçš„ç›®çš„éƒ½æ˜¯ä¸ºäº†è®©ç‰¹å®šä¸»æœºä»¥æŸä¸ªæŒ‡å®šçš„ç”¨æˆ·èº«ä»½æ‰§è¡Œä»»åŠ¡ã€‚hostsç”¨äºæŒ‡å®šè¦æ‰§è¡ŒæŒ‡å®šä»»åŠ¡çš„ä¸»æœºï¼Œé¡»äº‹å…ˆå®šä¹‰åœ¨ä¸»æœºæ¸…å•ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">one.example.com
</span></span><span class="line"><span class="cl">one.example.com:two.example.com
</span></span><span class="line"><span class="cl">192.168.1.50
</span></span><span class="line"><span class="cl">192.168.1.*
</span></span><span class="line"><span class="cl">websrvs:dbsrvs        # æˆ–è€…ï¼Œä¸¤ä¸ªç»„çš„å¹¶é›†
</span></span><span class="line"><span class="cl">websrvs:&amp;dbsrvs       # ä¸ï¼Œä¸¤ä¸ªç»„çš„äº¤é›†
</span></span><span class="line"><span class="cl">webservers:!phoneix   # åœ¨webserversç»„ï¼Œä½†ä¸åœ¨phoneixç»„
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¡ˆä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs:appsrvs</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="remote_userç»„ä»¶">remote_userç»„ä»¶
</h3><p>remote_userï¼šå¯ç”¨äºHostå’Œtaskä¸­ã€‚ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šå…¶é€šè¿‡sudoçš„æ–¹å¼åœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œä»»åŠ¡ï¼Œå…¶å¯ç”¨äºplayå…¨å±€æˆ–æŸä»»åŠ¡ï¼›æ­¤å¤–ï¼Œç”šè‡³å¯ä»¥åœ¨sudoæ—¶ä½¿ç”¨sudo_useræŒ‡å®šsudoæ—¶åˆ‡æ¢çš„ç”¨æˆ·</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">test connection</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">ping</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">magedu</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">sudo</span><span class="p">:</span><span class="w"> </span><span class="kc">yes</span><span class="w">               </span><span class="c"># é»˜è®¤sudoä¸ºroot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">sudo_user</span><span class="p">:</span><span class="w"> </span><span class="l">wang        </span><span class="w"> </span><span class="c"># sudoä¸ºwang</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="taskåˆ—è¡¨å’Œactionç»„ä»¶">taskåˆ—è¡¨å’Œactionç»„ä»¶
</h3><p>playçš„ä¸»æœºéƒ¨åˆ†æ—¶task listï¼Œtask listä¸­æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªtaskï¼Œå„ä¸ªtaskæŒ‰æ¬¡åºé€ä¸ªåœ¨hostsä¸­æŒ‡å®šçš„æ‰€æœ‰ä¸»æœºä¸Šæ‰§è¡Œï¼Œå³åœ¨æ‰€æœ‰ä¸»æœºä¸Šå®Œæˆç¬¬ä¸€ä¸ªtaskåï¼Œå†å¼€å§‹ç¬¬äºŒä¸ªtask
taskçš„ç›®çš„æ˜¯ä½¿ç”¨æŒ‡å®šçš„å‚æ•°æ‰§è¡Œæ¨¡å—ï¼Œè€Œåœ¨æ¨¡å—å‚æ•°ä¸­å¯ä»¥ä½¿ç”¨å˜é‡ã€‚æ¨¡å—æ‰§è¡Œæ˜¯å¹‚ç­‰çš„ï¼Œè¿™æ„å‘³ç€å¤šæ¬¡æ‰§è¡Œæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå…¶ç»“æœå‡ä¸€è‡´
æ¯ä¸ªtaskéƒ½åº”è¯¥æœ‰å…¶nameï¼Œç”¨äºplaybookçš„æ‰§è¡Œç»“æœè¾“å‡ºï¼Œå»ºè®®å…¶å†…å®¹èƒ½æ¸…æ™°åœ°æè¿°ä»»åŠ¡æ‰§è¡Œæ­¥éª¤ã€‚å¦‚æœæœªæä¾›nameï¼Œåˆ™actionçš„ç»“æœå°†ç”¨äºè¾“å‡º</p>
<p><strong>taskä¸¤ç§æ ¼å¼ï¼š</strong></p>
<p>(1)action:module arguments
(2)module:arguments           å»ºè®®ä½¿ç”¨</p>
<p>æ³¨æ„ï¼šshellå’Œcommandæ¨¡å—åé¢è·Ÿå‘½ä»¤ï¼Œè€Œékey=value
èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w"> 
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">install httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># ä¹Ÿå¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># - {name: install httpd, yum: name=httpd}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">start httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=started enable=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å…¶ä»–ç»„ä»¶">å…¶ä»–ç»„ä»¶
</h3><p>æŸä»»åŠ¡çš„çŠ¶æ€åœ¨è¿è¡Œåä¸ºchangedæ—¶ï¼Œå¯é€šè¿‡â€œnotifyâ€é€šçŸ¥ç»™ç›¸åº”çš„handlers
ä»»åŠ¡å¯ä»¥é€šè¿‡â€œtagsâ€æ‰“æ ‡ç­¾ï¼Œå¯åœ¨ansible-playbookå‘½ä»¤ä¸Šä½¿ç”¨-tæŒ‡å®šè¿›è¡Œè°ƒç”¨</p>
<h3 id="shellscript-vs-playbookæ¡ˆä¾‹">ShellScript VS Playbookæ¡ˆä¾‹
</h3><ul>
<li>ShellScript</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># SHELLè„šæœ¬å®ç°</span>
</span></span><span class="line"><span class="cl"><span class="c1">#!/bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="c1"># å®‰è£…Apach</span>
</span></span><span class="line"><span class="cl">yum install --quiet -y httpd
</span></span><span class="line"><span class="cl"><span class="c1"># å¤åˆ¶é…ç½®æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">cp /tmp/httpd.conf /etc/httpd/conf/httpd.conf
</span></span><span class="line"><span class="cl">cp /tmp/vhosts.conf /etc/httpd/conf.d
</span></span><span class="line"><span class="cl"><span class="c1"># å¯åŠ¨Apacheï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</span>
</span></span><span class="line"><span class="cl">systemctl <span class="nb">enable</span> --now httpd
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Playbook</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w"> 
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;å®‰è£…Apache&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;å¤åˆ¶é…ç½®æ–‡ä»¶&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=/tmp/httpd.conf dest=/etc/httpd/conf/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;å¤åˆ¶é…ç½®æ–‡ä»¶&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=/tmp/vhosts.conf dest=/etc/httpd/conf.d/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;å¯åŠ¨Apachï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=started enabled=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="playbookå‘½ä»¤">Playbookå‘½ä»¤
</h2><p>æ ¼å¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook &lt;filename.yml&gt; ... <span class="o">[</span>options<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¸¸è§é€‰é¡¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">--check -c          # åªæ£€æµ‹å¯èƒ½ä¼šå‘ç”Ÿçš„æ”¹å˜ï¼Œä½†ä¸çœŸæ­£æ‰§è¡Œæ“ä½œ 
</span></span><span class="line"><span class="cl">--list-hosts        # åˆ—å‡ºè¿è¡Œä»»åŠ¡çš„ä¸»æœº
</span></span><span class="line"><span class="cl">--list-tags         # åˆ—å‡ºtag
</span></span><span class="line"><span class="cl">--list-tasks        # åˆ—å‡ºtask
</span></span><span class="line"><span class="cl">--limit hosts       # åªé’ˆå¯¹ä¸»æœºåˆ—è¡¨ä¸­çš„ä¸»æœºæ‰§è¡Œ
</span></span><span class="line"><span class="cl">-v -vv -vvv         # æ˜¾ç¤ºè¿‡ç¨‹
</span></span></code></pre></td></tr></table>
</div>
</div><p>èŒƒä¾‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook file.yml --check
</span></span><span class="line"><span class="cl">ansible-playbook file.yml
</span></span><span class="line"><span class="cl">ansible-playbook file.yml --limit websrvs
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="playbookåˆæ­¥">Playbookåˆæ­¥
</h2><h3 id="åˆ©ç”¨playbookåˆ›å»ºmysqlç”¨æˆ·">åˆ©ç”¨playbookåˆ›å»ºmysqlç”¨æˆ·
</h3><p>èŒƒä¾‹ï¼šmysql_user.yml</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">dbsrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- {<span class="nt">name: create group, group</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql system=yes gid=306}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">create user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql shell=/sbin/nologin system=yes group=mysql uid=306 home=/data/mysql create_home=no</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹">ç¤ºä¾‹
</h4><ul>
<li>åˆ©ç”¨playbookåˆ›å»ºmysql</li>
</ul>
<ol>
<li>ä¿®æ”¹æ–‡ä»¶<code>/etc/ansible/hosts</code>ï¼Œæ·»åŠ ip<code>172.16.140.112</code>åˆ°ç»„<code>dbsrvs</code>ä¸­</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /etc/ansible/hosts
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-1.png"
	width="376"
	height="358"
	srcset="/p/ansibleplaybook/image-1_hu_1a5b12527b3254a.png 480w, /p/ansibleplaybook/image-1_hu_f1694ef36bc07e0f.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="105"
		data-flex-basis="252px"
	
></p>
<ol start="2">
<li>åˆ›å»ºç›®å½•<code>/data/ansible</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /data/ansible
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>åˆ›å»ºå¹¶ç¼–å†™æ–‡ä»¶<code>/data/ansible/mysql_user.yml</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /data/ansible/mysql_user.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>mysql_user.yml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># create mysql user and group</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">dbsrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- {<span class="nt">name: create group, group</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql system=yes gid=306}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">create user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql system=yes group=mysql shell=/sbin/nologin create_home=no home=/data/mysql uid=306</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-2.png"
	width="1508"
	height="324"
	srcset="/p/ansibleplaybook/image-2_hu_82c9851afd45207.png 480w, /p/ansibleplaybook/image-2_hu_d6f9197deed1f1be.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="465"
		data-flex-basis="1117px"
	
></p>
<ol start="4">
<li>æ£€æŸ¥æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook mysql_user.yml --check
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-3.png"
	width="1680"
	height="676"
	srcset="/p/ansibleplaybook/image-3_hu_7d14b6a437463ad.png 480w, /p/ansibleplaybook/image-3_hu_cedb56a6a8491a67.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="248"
		data-flex-basis="596px"
	
></p>
<p>å…¶ä¸­[Gathering Facts]è¡¨ç¤ºAnsibleæ”¶é›†factsä¿¡æ¯</p>
<ol start="5">
<li><code>mysql_user.yml</code>æ·»åŠ <code>gather_facts: no</code>æ¥ç¦æ­¢Ansibleæ”¶é›†factsä¿¡æ¯</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># create mysql user and group</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">dbsrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- {<span class="nt">name: create group, group</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql system=yes gid=306}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">create user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=mysql system=yes group=mysql shell=/sbin/nologin create_home=no home=/data/mysql uid=306</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-4.png"
	width="1524"
	height="370"
	srcset="/p/ansibleplaybook/image-4_hu_2d6e88de884c54dc.png 480w, /p/ansibleplaybook/image-4_hu_e17ca53ee2171fe.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="411"
		data-flex-basis="988px"
	
></p>
<ol start="6">
<li>æ£€æŸ¥æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook mysql_user.yml --check 
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-5.png"
	width="1642"
	height="536"
	srcset="/p/ansibleplaybook/image-5_hu_351117523211c19d.png 480w, /p/ansibleplaybook/image-5_hu_9938db1ba42125db.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="306"
		data-flex-basis="735px"
	
></p>
<ol start="7">
<li>æŸ¥çœ‹mysqlç”¨æˆ·æ˜¯å¦å­˜åœ¨</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;getent passwd mysql&#39;</span>
</span></span><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;id mysql&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-6.png"
	width="940"
	height="338"
	srcset="/p/ansibleplaybook/image-6_hu_e0bed91312e933b.png 480w, /p/ansibleplaybook/image-6_hu_d7b020d1f7d0e163.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="278"
		data-flex-basis="667px"
	
></p>
<ol start="8">
<li>æ‰§è¡Œè„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook mysql_user.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-7.png"
	width="1628"
	height="534"
	srcset="/p/ansibleplaybook/image-7_hu_568877c4ee139365.png 480w, /p/ansibleplaybook/image-7_hu_c38a6594ae67e32c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="304"
		data-flex-basis="731px"
	
></p>
<p>æ˜¾ç¤ºéƒ½æ‰§è¡ŒæˆåŠŸäº†</p>
<ol start="9">
<li>æŸ¥çœ‹mysqlç”¨æˆ·æ˜¯å¦å­˜åœ¨</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;getent passwd mysql&#39;</span>
</span></span><span class="line"><span class="cl">ansible dbsrvs -a <span class="s1">&#39;id mysql&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-8.png"
	width="938"
	height="346"
	srcset="/p/ansibleplaybook/image-8_hu_905a14a424846f0a.png 480w, /p/ansibleplaybook/image-8_hu_f7a56902fbf78e41.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="271"
		data-flex-basis="650px"
	
></p>
<p>åˆ›å»ºæˆåŠŸ</p>
<h3 id="åˆ©ç”¨playbookå®‰è£…nginx">åˆ©ç”¨playbookå®‰è£…nginx
</h3><p>èŒƒä¾‹ï¼šinstall_nginx.yml</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># install nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add group nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add user nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present group=nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Start Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=started enabled=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-1">ç¤ºä¾‹
</h4><ul>
<li>åˆ©ç”¨playbookå®‰è£…nginx</li>
</ul>
<ol>
<li>å¸è½½httpdè½¯ä»¶åŒ…ï¼ŒhttpdæœåŠ¡å ç”¨äº†80ç«¯å£</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m yum -a <span class="s1">&#39;name=httpd state=present&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-9.png"
	width="1108"
	height="650"
	srcset="/p/ansibleplaybook/image-9_hu_3edc8181cfd350ff.png 480w, /p/ansibleplaybook/image-9_hu_bea001c36615e4b6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="170"
		data-flex-basis="409px"
	
></p>
<p>ç»¿è‰²è¡¨ç¤ºæ²¡æœ‰æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè¯´æ˜è½¯ä»¶åŒ…æ²¡å®‰è£…æˆ–å·²ç»è¢«å¸è½½ã€‚</p>
<ol start="2">
<li>åˆ›å»ºæ–‡ä»¶<code>/data/ansible/install_nginx.yml</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /data/ansible/install_nginx.yml
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ç¼–å†™<code>install_nginx.yml</code>æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># install nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add group nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add user nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present group=nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Start Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=started enabled=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-10.png"
	width="782"
	height="530"
	srcset="/p/ansibleplaybook/image-10_hu_d6f0e79cb201ed7e.png 480w, /p/ansibleplaybook/image-10_hu_d18e1d81e986681b.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="147"
		data-flex-basis="354px"
	
></p>
<ol start="4">
<li>æ£€æµ‹æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_nginx.yml --check
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-11.png"
	width="1638"
	height="794"
	srcset="/p/ansibleplaybook/image-11_hu_902d682d51825b8f.png 480w, /p/ansibleplaybook/image-11_hu_2bdb2c130ac05671.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="206"
		data-flex-basis="495px"
	
></p>
<ol start="5">
<li>æ‰§è¡Œæ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_nginx.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-12.png"
	width="1640"
	height="802"
	srcset="/p/ansibleplaybook/image-12_hu_333a909eab5f5f6b.png 480w, /p/ansibleplaybook/image-12_hu_7f8a276b18061b6e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="204"
		data-flex-basis="490px"
	
></p>
<ol start="6">
<li>æŸ¥çœ‹ç«¯å£æ˜¯å¦å¤„äºç›‘å¬çŠ¶æ€</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ss -ntl&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-13.png"
	width="834"
	height="448"
	srcset="/p/ansibleplaybook/image-13_hu_4bdf1ea4432e0c7.png 480w, /p/ansibleplaybook/image-13_hu_32e20741ca111afc.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="186"
		data-flex-basis="446px"
	
></p>
<ol start="7">
<li>è®¿é—®æµ‹è¯•</li>
</ol>
<p><a class="link" href="http://172.16.140.112"  target="_blank" rel="noopener"
    >172.16.140.112</a></br>
<a class="link" href="http://172.16.140.113"  target="_blank" rel="noopener"
    >172.16.140.113</a></p>
<p><img src="/p/ansibleplaybook/image-14.png"
	width="2128"
	height="1328"
	srcset="/p/ansibleplaybook/image-14_hu_6b6fc9f5b175b860.png 480w, /p/ansibleplaybook/image-14_hu_1d3596a6d4385967.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="160"
		data-flex-basis="384px"
	
></p>
<ol start="8">
<li>æŸ¥çœ‹è¢«æ§ç«¯å¼€æ”¾çš„æ‰€æœ‰ç«¯å£</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;firewall-cmd --list-ports&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-15.png"
	width="916"
	height="168"
	srcset="/p/ansibleplaybook/image-15_hu_56cd57e1f8b634a0.png 480w, /p/ansibleplaybook/image-15_hu_8adbde2148eac563.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="545"
		data-flex-basis="1308px"
	
></p>
<ol start="9">
<li>æ‰“å¼€è¢«æ§ç«¯80ç«¯å£</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m firewalld -a <span class="s1">&#39;port=80/tcp permanent=true state=enabled immediate=true&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-16.png"
	width="1514"
	height="518"
	srcset="/p/ansibleplaybook/image-16_hu_bc32dfa8e9344c4e.png 480w, /p/ansibleplaybook/image-16_hu_99714f3e1cbb9459.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="292"
		data-flex-basis="701px"
	
></p>
<p><code>immediate=true</code>ï¼šè¡¨ç¤ºç«‹å³å¼€å¯</p>
<ol start="10">
<li>å†æ¬¡æŸ¥çœ‹è¢«æ§ç«¯å¼€æ”¾çš„ç«¯å£å·</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;firewall-cmd --list-ports&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-17.png"
	width="926"
	height="168"
	srcset="/p/ansibleplaybook/image-17_hu_92d4e6d602fb84a6.png 480w, /p/ansibleplaybook/image-17_hu_e55c2c7651aeb8c2.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="551"
		data-flex-basis="1322px"
	
></p>
<ol start="11">
<li>å†æ¬¡è®¿é—®æµ‹è¯•</li>
</ol>
<p><a class="link" href="http://172.16.140.112"  target="_blank" rel="noopener"
    >172.16.140.112</a></br>
<a class="link" href="http://172.16.140.113"  target="_blank" rel="noopener"
    >172.16.140.113</a></p>
<p><img src="/p/ansibleplaybook/image-18.png"
	width="2880"
	height="1580"
	srcset="/p/ansibleplaybook/image-18_hu_a4bb3cd3dfc48de3.png 480w, /p/ansibleplaybook/image-18_hu_ee89cd9461fa0566.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<p>nginxçš„é»˜è®¤é¡µé¢åœ¨<code>/usr/share/nginx/html/index.html</code></p>
<ul>
<li>ä¿®æ”¹nginxä¸»é¡µé¢</li>
</ul>
<ol>
<li>åˆ›å»ºç›®å½•<code>/data/ansible/files</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir /data/ansible/files
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>åˆ›å»ºæ–‡ä»¶<code>/data/ansible/files/index.html</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /data/ansible/files/index.html
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ç¼–è¾‘æ–‡ä»¶</li>
</ol>
<p><code>index.html</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Welcome to Nginx!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-19.png"
	width="396"
	height="88"
	srcset="/p/ansibleplaybook/image-19_hu_e327f39a17ae4481.png 480w, /p/ansibleplaybook/image-19_hu_2b397bcebd37584.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="450"
		data-flex-basis="1080px"
	
></p>
<ol start="4">
<li>ç¼–è¾‘<code>/data/ansible/install_nginx.yml</code>ï¼Œä¸Šä¼ æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c"># install nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add group nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">add user nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present group=nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">upload nginx html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=files/index.html dest=/usr/share/nginx/html/index.html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Start Nginx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=nginx state=started enabled=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-20.png"
	width="1026"
	height="612"
	srcset="/p/ansibleplaybook/image-20_hu_fe2c4dfcb82cd34c.png 480w, /p/ansibleplaybook/image-20_hu_a4094a55805b94d6.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="167"
		data-flex-basis="402px"
	
></p>
<ol start="5">
<li>æ£€æµ‹æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_mysql.yml -C
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-21.png"
	width="1646"
	height="950"
	srcset="/p/ansibleplaybook/image-21_hu_fe056a25b0f06022.png 480w, /p/ansibleplaybook/image-21_hu_dcb69811a93ac76d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="173"
		data-flex-basis="415px"
	
></p>
<ol start="6">
<li>æ‰§è¡Œæ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_mysql.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-22.png"
	width="1636"
	height="952"
	srcset="/p/ansibleplaybook/image-22_hu_bbf718f4f4bf9d14.png 480w, /p/ansibleplaybook/image-22_hu_ca30505b1cd2327c.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="171"
		data-flex-basis="412px"
	
></p>
<ol start="7">
<li>è®¿é—®æµ‹è¯•</li>
</ol>
<p><a class="link" href="http://172.16.140.112"  target="_blank" rel="noopener"
    >172.16.140.112</a></br>
<a class="link" href="http://172.16.140.113"  target="_blank" rel="noopener"
    >172.16.140.113</a></p>
<p><img src="/p/ansibleplaybook/image-23.png"
	width="2880"
	height="1580"
	srcset="/p/ansibleplaybook/image-23_hu_36b1fcf6a522cd46.png 480w, /p/ansibleplaybook/image-23_hu_8a165fc62c17a5fb.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<h3 id="åˆ©ç”¨playbookå®‰è£…å’Œå¸è½½httpd">åˆ©ç”¨playbookå®‰è£…å’Œå¸è½½httpd
</h3><p>èŒƒä¾‹ï¼šinstall_httpd.yml</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="c"># install httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gether_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install configure file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=files/httpd.conf dest=/etc/httpd/conf/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">start service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=started enabled=yes</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>èŒƒä¾‹ï¼šremote_httpd.yml</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># remove_httpd.yml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove httpd package</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=absent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove apache user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=apache state=absent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove data file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">name=/etc/httpd state=absent</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ç¤ºä¾‹-2">ç¤ºä¾‹
</h4><ul>
<li>åˆ©ç”¨playbookå®‰è£…httpd</li>
</ul>
<ol>
<li>å®‰è£…httpdè½¯ä»¶åŒ…</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">dnf install httpd -y
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>å°†æ–‡ä»¶<code>/etc/httpd/conf/httpd.conf</code>å¤åˆ¶åˆ°<code>/data/ansible/files</code>ç›®å½•ä¸‹</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp /etc/httpd/conf/httpd.conf /data/ansible/files/
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>ä¿®æ”¹<code>/data/ansible/files</code>æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">#Listen 80
</span></span><span class="line"><span class="cl">Listen 8080
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-24.png"
	width="368"
	height="166"
	srcset="/p/ansibleplaybook/image-24_hu_946bb6bd9e899112.png 480w, /p/ansibleplaybook/image-24_hu_94553f46ef4160ec.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="221"
		data-flex-basis="532px"
	
></p>
<ol start="4">
<li>åˆ›å»º<code>install_httpd.yml</code>æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /data/ansible/install_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>ç¼–è¾‘<code>install_httpd.yml</code></li>
</ol>
<p><code>install_httpd.yml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install httpd</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=present</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Install configuration file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=files/httpd.conf dest=/etc/httpd/conf/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">httpd html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">copy</span><span class="p">:</span><span class="w"> </span><span class="l">src=files/index.html dest=/usr/share/httpd/noindex/index.html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">start service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=started enabled=yes </span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-25.png"
	width="1044"
	height="516"
	srcset="/p/ansibleplaybook/image-25_hu_f850efc78a743e6.png 480w, /p/ansibleplaybook/image-25_hu_2f17f3e2cb84bee9.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="202"
		data-flex-basis="485px"
	
></p>
<ol start="6">
<li>æ£€æŸ¥æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook -C install_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-26.png"
	width="1646"
	height="810"
	srcset="/p/ansibleplaybook/image-26_hu_d1341848a4fa86eb.png 480w, /p/ansibleplaybook/image-26_hu_fd9f715e900a48fd.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="203"
		data-flex-basis="487px"
	
></p>
<ol start="7">
<li>æ‰§è¡Œè„šæœ¬</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-27.png"
	width="1634"
	height="814"
	srcset="/p/ansibleplaybook/image-27_hu_c3291e6492fdb14e.png 480w, /p/ansibleplaybook/image-27_hu_1b2a938c0ff56b18.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="200"
		data-flex-basis="481px"
	
></p>
<p>å¦‚æœåªæƒ³å®‰è£…åœ¨<code>172.16.140.113</code>æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook install_httpd.yml --limit 172.16.140.113
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="8">
<li>æŸ¥çœ‹websrvsç›‘å¬çš„æ‰€æœ‰ç«¯å£</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;ss -ntl&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-28.png"
	width="830"
	height="516"
	srcset="/p/ansibleplaybook/image-28_hu_62705119e7a29f82.png 480w, /p/ansibleplaybook/image-28_hu_8442edb88eeb3e9e.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="160"
		data-flex-basis="386px"
	
></p>
<ol start="9">
<li>å¼€æ”¾websrvsç»„8080ç«¯å£</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -m firewalld -a <span class="s1">&#39;port=8080/tcp permanent=true state=enabled immediate=true&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-29.png"
	width="1630"
	height="510"
	srcset="/p/ansibleplaybook/image-29_hu_1492c7586d73cb17.png 480w, /p/ansibleplaybook/image-29_hu_619936459c96ed96.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="319"
		data-flex-basis="767px"
	
></p>
<ol start="10">
<li>æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„ç«¯å£å·</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible websrvs -a <span class="s1">&#39;firewall-cmd --list-ports&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-30.png"
	width="1006"
	height="170"
	srcset="/p/ansibleplaybook/image-30_hu_47cb8981657562ea.png 480w, /p/ansibleplaybook/image-30_hu_7bdf053dc2ccb5f5.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="591"
		data-flex-basis="1420px"
	
></p>
<ol start="11">
<li>è®¿é—®æµ‹è¯•</li>
</ol>
<p><a class="link" href="http://172.16.140.112:8080/"  target="_blank" rel="noopener"
    >172.16.140.112</a></br>
<a class="link" href="http://172.16.140.113:8080/"  target="_blank" rel="noopener"
    >172.16.140.113</a></p>
<p><img src="/p/ansibleplaybook/image-31.png"
	width="2880"
	height="1580"
	srcset="/p/ansibleplaybook/image-31_hu_d656d2daaf5db4d8.png 480w, /p/ansibleplaybook/image-31_hu_ac843743d03ed945.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="182"
		data-flex-basis="437px"
	
></p>
<ul>
<li>å¸è½½httpd</li>
</ul>
<ol>
<li>åˆ›å»º<code>/data/ansible/remove_httpd.yml</code>æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vim /data/ansible/remove_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>ç¼–å†™<code>/data/ansible/remove_httpd.yml</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># æ— æ³•å¸è½½å¹²å‡€</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove httpd package</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">yum</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=absent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove apache user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=apache state=absent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove data file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">name=/etc/httpd state=absent</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-32.png"
	width="588"
	height="446"
	srcset="/p/ansibleplaybook/image-32_hu_d80e45e9b836e156.png 480w, /p/ansibleplaybook/image-32_hu_d17aec7babfeda63.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="131"
		data-flex-basis="316px"
	
></p>
<p>ä¿®æ”¹åçš„å¸è½½ç‰ˆæœ¬ï¼š</p>
<p><code>remove_httpd.yml</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl">- <span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">websrvs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">remote_user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="kc">no</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove httpd service</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">name=httpd state=stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove httpd package</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">shell</span><span class="p">:</span><span class="w"> </span><span class="l">dnf remove httpd -y</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove apache user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">name=apache state=absent</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">remove data file</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">name=/etc/httpd state=absent</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>æ£€æŸ¥æ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook -C remove_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-33.png"
	width="1634"
	height="652"
	srcset="/p/ansibleplaybook/image-33_hu_53c5aea46f64ed67.png 480w, /p/ansibleplaybook/image-33_hu_67ccaf45651a88a4.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="250"
		data-flex-basis="601px"
	
></p>
<ol start="4">
<li>æ‰§è¡Œæ–‡ä»¶</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ansible-playbook remove_httpd.yml
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/p/ansibleplaybook/image-34.png"
	width="1636"
	height="658"
	srcset="/p/ansibleplaybook/image-34_hu_652c2e7986a5958b.png 480w, /p/ansibleplaybook/image-34_hu_d20feea72b1750d.png 1024w"
	loading="lazy"
	
		alt="alt text"
	
	
		class="gallery-image" 
		data-flex-grow="248"
		data-flex-basis="596px"
	
></p>
<ol start="5">
<li>å†æ¬¡è®¿é—®å°±æ˜¾ç¤ºè¿æ¥è¢«æ‹’ç»</li>
</ol>
<h3 id="åˆ©ç”¨playbookå®‰è£…mysql">åˆ©ç”¨playbookå®‰è£…mysql
</h3><h4 id="å®‰è£…å‰ç½®">å®‰è£…å‰ç½®
</h4><ol>
<li>mysqlå®‰è£…åŒ…</li>
<li>mysqlé…ç½®æ–‡ä»¶</li>
<li>å®‰å…¨äº¤äº’è„šæœ¬</li>
<li>å®‰è£…mysqlçš„yml</li>
</ol>

</section>


    <footer class="article-footer">
    

    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/ansible%E5%9F%BA%E7%A1%80/">
        
        

        <div class="article-details">
            <h2 class="article-title">[Ansible]åŸºç¡€</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/ansible%E5%AE%89%E8%A3%85/">
        
        

        <div class="article-details">
            <h2 class="article-title">[Ansible]å®‰è£…</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2025 - 
        
        2026 ãƒªãƒ³ãƒœã®å€‹äººãƒ–ãƒ­ã‚°
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
